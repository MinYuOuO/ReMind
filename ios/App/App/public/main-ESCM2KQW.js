import{d as os}from"./chunk-APCB5YTZ.js";import{a as is}from"./chunk-7TAETYRY.js";import{a as on,b as as,c as Mr}from"./chunk-OJQROCLB.js";import{A as Yt,Aa as Mn,Ab as Xn,B as Jt,Kb as es,Lb as ts,Nb as rs,Oa as Un,Pa as qn,Pb as ns,R as Er,Ra as Wn,Sb as ss,_a as Vn,cb as Gn,db as Hn,f as jn,g as Rn,gb as Kn,hb as Yn,ib as Jn,ma as Nn,nb as zr,oa as Cn,ob as Zn,q as $r,qa as Fn,ra as Bn,s as Lr,sa as $n,yb as Qn,z as _t}from"./chunk-NFYGWNBG.js";import"./chunk-5ARS7AGD.js";import"./chunk-QUJFQN2Y.js";import"./chunk-42773FH6.js";import"./chunk-LJTVJC5R.js";import"./chunk-V35JPV4T.js";import"./chunk-XCIV33A6.js";import"./chunk-WWQJI6ZF.js";import"./chunk-FN7XDZ7X.js";import"./chunk-4WA3IE3Y.js";import"./chunk-MYWE4PUO.js";import"./chunk-6675UF34.js";import"./chunk-PYNURLWC.js";import"./chunk-VWBCFL5K.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-BMA72V62.js";import"./chunk-CKP3SGE2.js";import"./chunk-EULU7H5A.js";import{a as In,b as On}from"./chunk-AWFO5LBT.js";import"./chunk-ZHQITZWE.js";import"./chunk-NJ63EZW4.js";import"./chunk-DEDRJWY3.js";import{b as Ln,j as lr,l as zn}from"./chunk-RADHBB3Y.js";import"./chunk-JHFNTCF2.js";import"./chunk-4WFVMWDK.js";import"./chunk-LRFGNCHE.js";import"./chunk-M2X7KQLB.js";import"./chunk-OZYWYLNK.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-42C7ZIID.js";import{c as Si,f as j}from"./chunk-MCHWYEYM.js";var cs=(()=>{let e=class e{constructor(){this.environmentInjector=jn(Rn),zr({triangle:ss,ellipse:Qn,square:ns})}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Lr({type:e,selectors:[["app-tabs"]],decls:18,vars:0,consts:[["slot","bottom","color","light"],["tab","home","href","/home"],["name","home-outline","aria-hidden","true"],["tab","rsearch","href","/rsearch"],["name","search-outline","aria-hidden","true"],["tab","roulette","href","/roulette"],["name","shuffle-outline","aria-hidden","true"],["tab","settings","href","/settings"],["name","settings-outline","aria-hidden","true"]],template:function(n,s){n&1&&(_t(0,"ion-tabs")(1,"ion-tab-bar",0)(2,"ion-tab-button",1),Jt(3,"ion-icon",2),_t(4,"ion-label"),Er(5,"Home"),Yt()(),_t(6,"ion-tab-button",3),Jt(7,"ion-icon",4),_t(8,"ion-label"),Er(9,"RSearch"),Yt()(),_t(10,"ion-tab-button",5),Jt(11,"ion-icon",6),_t(12,"ion-label"),Er(13,"Roulette"),Yt()(),_t(14,"ion-tab-button",7),Jt(15,"ion-icon",8),_t(16,"ion-label"),Er(17,"Setting"),Yt()()()())},dependencies:[Kn,Gn,Hn,Jn,Vn],encapsulation:2});let c=e;return c})();var ls=[{path:"",component:cs,children:[{path:"home",loadComponent:()=>import("./chunk-YNFBLNJB.js").then(c=>c.FriendListPage)},{path:"rsearch",loadComponent:()=>import("./chunk-5EGFX3BY.js").then(c=>c.RSearchPage)},{path:"roulette",loadComponent:()=>import("./chunk-3YMUX2EF.js").then(c=>c.RoulettePage)},{path:"settings",loadComponent:()=>import("./chunk-HS4V35RL.js").then(c=>c.SettingsPage)},{path:"",redirectTo:"/home",pathMatch:"full"}]},{path:"",redirectTo:"/home",pathMatch:"full"}];var cn=On("SplashScreen",{web:()=>import("./chunk-PRZPYEMF.js").then(c=>new c.SplashScreenWeb)});var us=(()=>{let e=class e{constructor(r,n,s){this.platform=r,this.dbInit=n,this.db=s,e.alreadyInitialized||(e.alreadyInitialized=!0,this.initApp())}initApp(){return j(this,null,function*(){try{yield this.platform.ready(),console.log("[App] Platform ready \u2014 initializing SQLite...");let r=yield is.requestPermissions();console.log("[App] Notification permissions:",r),yield this.dbInit.init(),console.log("[App] Database initialized."),yield new Promise(n=>setTimeout(n,400)),yield cn.hide()}catch(r){console.error("[App] Initialization failed:",r);try{yield cn.hide()}catch{}}})}};e.alreadyInitialized=!1,e.\u0275fac=function(n){return new(n||e)($r(Mn),$r(Mr),$r(as))},e.\u0275cmp=Lr({type:e,selectors:[["app-root"]],decls:2,vars:0,template:function(n,s){n&1&&(_t(0,"ion-app"),Jt(1,"ion-router-outlet"),Yt())},dependencies:[Wn,qn],encapsulation:2});let c=e;return c})();var Tr=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{};function ps(){throw new Error("setTimeout has not been defined")}function ys(){throw new Error("clearTimeout has not been defined")}var zt=ps,Mt=ys;typeof Tr.setTimeout=="function"&&(zt=setTimeout);typeof Tr.clearTimeout=="function"&&(Mt=clearTimeout);function gs(c){if(zt===setTimeout)return setTimeout(c,0);if((zt===ps||!zt)&&setTimeout)return zt=setTimeout,setTimeout(c,0);try{return zt(c,0)}catch{try{return zt.call(null,c,0)}catch{return zt.call(this,c,0)}}}function xi(c){if(Mt===clearTimeout)return clearTimeout(c);if((Mt===ys||!Mt)&&clearTimeout)return Mt=clearTimeout,clearTimeout(c);try{return Mt(c)}catch{try{return Mt.call(null,c)}catch{return Mt.call(this,c)}}}var jt=[],hr=!1,Zt,Ur=-1;function ki(){!hr||!Zt||(hr=!1,Zt.length?jt=Zt.concat(jt):Ur=-1,jt.length&&vs())}function vs(){if(!hr){var c=gs(ki);hr=!0;for(var e=jt.length;e;){for(Zt=jt,jt=[];++Ur<e;)Zt&&Zt[Ur].run();Ur=-1,e=jt.length}Zt=null,hr=!1,xi(c)}}function Pi(c){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];jt.push(new bs(c,e)),jt.length===1&&!hr&&gs(vs)}function bs(c,e){this.fun=c,this.array=e}bs.prototype.run=function(){this.fun.apply(null,this.array)};var Di="browser",Ai="browser",Ii=!0,Oi={},ji=[],Ri="",Ni={},Ci={},Fi={};function er(){}var Bi=er,$i=er,Li=er,zi=er,Mi=er,Ui=er,qi=er;function Wi(c){throw new Error("process.binding is not supported")}function Vi(){return"/"}function Gi(c){throw new Error("process.chdir is not supported")}function Hi(){return 0}var ur=Tr.performance||{},Ki=ur.now||ur.mozNow||ur.msNow||ur.oNow||ur.webkitNow||function(){return new Date().getTime()};function Yi(c){var e=Ki.call(ur)*.001,t=Math.floor(e),r=Math.floor(e%1*1e9);return c&&(t=t-c[0],r=r-c[1],r<0&&(t--,r+=1e9)),[t,r]}var Ji=new Date;function Zi(){var c=new Date,e=c-Ji;return e/1e3}var Qi={nextTick:Pi,title:Di,browser:Ii,env:Oi,argv:ji,version:Ri,versions:Ni,on:Bi,addListener:$i,once:Li,off:zi,removeListener:Mi,removeAllListeners:Ui,emit:qi,binding:Wi,cwd:Vi,chdir:Gi,umask:Hi,hrtime:Yi,platform:Ai,release:Ci,config:Fi,uptime:Zi},Ut=Qi,Xi="/Volumes/Development_Lacie/Development/latest/jeep-sqlite/node_modules/sql.js/dist",Pt=[],yt=[],ea=typeof Uint8Array<"u"?Uint8Array:Array,dn=!1;function ws(){dn=!0;for(var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,t=c.length;e<t;++e)Pt[e]=c[e],yt[c.charCodeAt(e)]=e;yt[45]=62,yt[95]=63}function ta(c){dn||ws();var e,t,r,n,s,i,o=c.length;if(o%4>0)throw new Error("Invalid string. Length must be a multiple of 4");s=c[o-2]==="="?2:c[o-1]==="="?1:0,i=new ea(o*3/4-s),r=s>0?o-4:o;var f=0;for(e=0,t=0;e<r;e+=4,t+=3)n=yt[c.charCodeAt(e)]<<18|yt[c.charCodeAt(e+1)]<<12|yt[c.charCodeAt(e+2)]<<6|yt[c.charCodeAt(e+3)],i[f++]=n>>16&255,i[f++]=n>>8&255,i[f++]=n&255;return s===2?(n=yt[c.charCodeAt(e)]<<2|yt[c.charCodeAt(e+1)]>>4,i[f++]=n&255):s===1&&(n=yt[c.charCodeAt(e)]<<10|yt[c.charCodeAt(e+1)]<<4|yt[c.charCodeAt(e+2)]>>2,i[f++]=n>>8&255,i[f++]=n&255),i}function ra(c){return Pt[c>>18&63]+Pt[c>>12&63]+Pt[c>>6&63]+Pt[c&63]}function na(c,e,t){for(var r,n=[],s=e;s<t;s+=3)r=(c[s]<<16)+(c[s+1]<<8)+c[s+2],n.push(ra(r));return n.join("")}function fs(c){dn||ws();for(var e,t=c.length,r=t%3,n="",s=[],i=16383,o=0,f=t-r;o<f;o+=i)s.push(na(c,o,o+i>f?f:o+i));return r===1?(e=c[t-1],n+=Pt[e>>2],n+=Pt[e<<4&63],n+="=="):r===2&&(e=(c[t-2]<<8)+c[t-1],n+=Pt[e>>10],n+=Pt[e>>4&63],n+=Pt[e<<2&63],n+="="),s.push(n),s.join("")}function Hr(c,e,t,r,n){var s,i,o=n*8-r-1,f=(1<<o)-1,l=f>>1,p=-7,m=t?n-1:0,v=t?-1:1,y=c[e+m];for(m+=v,s=y&(1<<-p)-1,y>>=-p,p+=o;p>0;s=s*256+c[e+m],m+=v,p-=8);for(i=s&(1<<-p)-1,s>>=-p,p+=r;p>0;i=i*256+c[e+m],m+=v,p-=8);if(s===0)s=1-l;else{if(s===f)return i?NaN:(y?-1:1)*(1/0);i=i+Math.pow(2,r),s=s-l}return(y?-1:1)*i*Math.pow(2,s-r)}function _s(c,e,t,r,n,s){var i,o,f,l=s*8-n-1,p=(1<<l)-1,m=p>>1,v=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=r?0:s-1,_=r?1:-1,b=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,i=p):(i=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-i))<1&&(i--,f*=2),i+m>=1?e+=v/f:e+=v*Math.pow(2,1-m),e*f>=2&&(i++,f/=2),i+m>=p?(o=0,i=p):i+m>=1?(o=(e*f-1)*Math.pow(2,n),i=i+m):(o=e*Math.pow(2,m-1)*Math.pow(2,n),i=0));n>=8;c[t+y]=o&255,y+=_,o/=256,n-=8);for(i=i<<n|o,l+=n;l>0;c[t+y]=i&255,y+=_,i/=256,l-=8);c[t+y-_]|=b*128}var sa={}.toString,Es=Array.isArray||function(c){return sa.call(c)=="[object Array]"};var ia=50;ne.TYPED_ARRAY_SUPPORT=Tr.TYPED_ARRAY_SUPPORT!==void 0?Tr.TYPED_ARRAY_SUPPORT:!0;function ln(){return ne.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Rt(c,e){if(ln()<e)throw new RangeError("Invalid typed array length");return ne.TYPED_ARRAY_SUPPORT?(c=new Uint8Array(e),c.__proto__=ne.prototype):(c===null&&(c=new ne(e)),c.length=e),c}function ne(c,e,t){if(!ne.TYPED_ARRAY_SUPPORT&&!(this instanceof ne))return new ne(c,e,t);if(typeof c=="number"){if(typeof e=="string")throw new Error("If encoding is specified then the first argument must be a string");return mn(this,c)}return Ss(this,c,e,t)}ne.poolSize=8192;ne._augment=function(c){return c.__proto__=ne.prototype,c};function Ss(c,e,t,r){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer?ca(c,e,t,r):typeof e=="string"?oa(c,e,t):la(c,e)}ne.from=function(c,e,t){return Ss(null,c,e,t)};ne.TYPED_ARRAY_SUPPORT&&(ne.prototype.__proto__=Uint8Array.prototype,ne.__proto__=Uint8Array);function Ts(c){if(typeof c!="number")throw new TypeError('"size" argument must be a number');if(c<0)throw new RangeError('"size" argument must not be negative')}function aa(c,e,t,r){return Ts(e),e<=0?Rt(c,e):t!==void 0?typeof r=="string"?Rt(c,e).fill(t,r):Rt(c,e).fill(t):Rt(c,e)}ne.alloc=function(c,e,t){return aa(null,c,e,t)};function mn(c,e){if(Ts(e),c=Rt(c,e<0?0:pn(e)|0),!ne.TYPED_ARRAY_SUPPORT)for(var t=0;t<e;++t)c[t]=0;return c}ne.allocUnsafe=function(c){return mn(null,c)};ne.allocUnsafeSlow=function(c){return mn(null,c)};function oa(c,e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!ne.isEncoding(t))throw new TypeError('"encoding" must be a valid string encoding');var r=xs(e,t)|0;c=Rt(c,r);var n=c.write(e,t);return n!==r&&(c=c.slice(0,n)),c}function un(c,e){var t=e.length<0?0:pn(e.length)|0;c=Rt(c,t);for(var r=0;r<t;r+=1)c[r]=e[r]&255;return c}function ca(c,e,t,r){if(t<0||e.byteLength<t)throw new RangeError("'offset' is out of bounds");if(e.byteLength<t+(r||0))throw new RangeError("'length' is out of bounds");return t===void 0&&r===void 0?e=new Uint8Array(e):r===void 0?e=new Uint8Array(e,t):e=new Uint8Array(e,t,r),ne.TYPED_ARRAY_SUPPORT?(c=e,c.__proto__=ne.prototype):c=un(c,e),c}function la(c,e){if(Dt(e)){var t=pn(e.length)|0;return c=Rt(c,t),c.length===0||e.copy(c,0,0,t),c}if(e){if(typeof ArrayBuffer<"u"&&e.buffer instanceof ArrayBuffer||"length"in e)return typeof e.length!="number"||Da(e.length)?Rt(c,0):un(c,e);if(e.type==="Buffer"&&Es(e.data))return un(c,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function pn(c){if(c>=ln())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+ln().toString(16)+" bytes");return c|0}ne.isBuffer=Aa;function Dt(c){return!!(c!=null&&c._isBuffer)}ne.compare=function(e,t){if(!Dt(e)||!Dt(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,s=0,i=Math.min(r,n);s<i;++s)if(e[s]!==t[s]){r=e[s],n=t[s];break}return r<n?-1:n<r?1:0};ne.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};ne.concat=function(e,t){if(!Es(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return ne.alloc(0);var r;if(t===void 0)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=ne.allocUnsafe(t),s=0;for(r=0;r<e.length;++r){var i=e[r];if(!Dt(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(n,s),s+=i.length}return n};function xs(c,e){if(Dt(c))return c.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(c)||c instanceof ArrayBuffer))return c.byteLength;typeof c!="string"&&(c=""+c);var t=c.length;if(t===0)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":case void 0:return Wr(c).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return js(c).length;default:if(r)return Wr(c).length;e=(""+e).toLowerCase(),r=!0}}ne.byteLength=xs;function ua(c,e,t){var r=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(c||(c="utf8");;)switch(c){case"hex":return wa(this,e,t);case"utf8":case"utf-8":return Ds(this,e,t);case"ascii":return va(this,e,t);case"latin1":case"binary":return ba(this,e,t);case"base64":return ya(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _a(this,e,t);default:if(r)throw new TypeError("Unknown encoding: "+c);c=(c+"").toLowerCase(),r=!0}}ne.prototype._isBuffer=!0;function Qt(c,e,t){var r=c[e];c[e]=c[t],c[t]=r}ne.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)Qt(this,t,t+1);return this};ne.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)Qt(this,t,t+3),Qt(this,t+1,t+2);return this};ne.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)Qt(this,t,t+7),Qt(this,t+1,t+6),Qt(this,t+2,t+5),Qt(this,t+3,t+4);return this};ne.prototype.toString=function(){var e=this.length|0;return e===0?"":arguments.length===0?Ds(this,0,e):ua.apply(this,arguments)};ne.prototype.equals=function(e){if(!Dt(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:ne.compare(this,e)===0};ne.prototype.inspect=function(){var e="",t=ia;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"};ne.prototype.compare=function(e,t,r,n,s){if(!Dt(e))throw new TypeError("Argument must be a Buffer");if(t===void 0&&(t=0),r===void 0&&(r=e?e.length:0),n===void 0&&(n=0),s===void 0&&(s=this.length),t<0||r>e.length||n<0||s>this.length)throw new RangeError("out of range index");if(n>=s&&t>=r)return 0;if(n>=s)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,s>>>=0,this===e)return 0;for(var i=s-n,o=r-t,f=Math.min(i,o),l=this.slice(n,s),p=e.slice(t,r),m=0;m<f;++m)if(l[m]!==p[m]){i=l[m],o=p[m];break}return i<o?-1:o<i?1:0};function ks(c,e,t,r,n){if(c.length===0)return-1;if(typeof t=="string"?(r=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,isNaN(t)&&(t=n?0:c.length-1),t<0&&(t=c.length+t),t>=c.length){if(n)return-1;t=c.length-1}else if(t<0)if(n)t=0;else return-1;if(typeof e=="string"&&(e=ne.from(e,r)),Dt(e))return e.length===0?-1:hs(c,e,t,r,n);if(typeof e=="number")return e=e&255,ne.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?n?Uint8Array.prototype.indexOf.call(c,e,t):Uint8Array.prototype.lastIndexOf.call(c,e,t):hs(c,[e],t,r,n);throw new TypeError("val must be string, number or Buffer")}function hs(c,e,t,r,n){var s=1,i=c.length,o=e.length;if(r!==void 0&&(r=String(r).toLowerCase(),r==="ucs2"||r==="ucs-2"||r==="utf16le"||r==="utf-16le")){if(c.length<2||e.length<2)return-1;s=2,i/=2,o/=2,t/=2}function f(y,_){return s===1?y[_]:y.readUInt16BE(_*s)}var l;if(n){var p=-1;for(l=t;l<i;l++)if(f(c,l)===f(e,p===-1?0:l-p)){if(p===-1&&(p=l),l-p+1===o)return p*s}else p!==-1&&(l-=l-p),p=-1}else for(t+o>i&&(t=i-o),l=t;l>=0;l--){for(var m=!0,v=0;v<o;v++)if(f(c,l+v)!==f(e,v)){m=!1;break}if(m)return l}return-1}ne.prototype.includes=function(e,t,r){return this.indexOf(e,t,r)!==-1};ne.prototype.indexOf=function(e,t,r){return ks(this,e,t,r,!0)};ne.prototype.lastIndexOf=function(e,t,r){return ks(this,e,t,r,!1)};function fa(c,e,t,r){t=Number(t)||0;var n=c.length-t;r?(r=Number(r),r>n&&(r=n)):r=n;var s=e.length;if(s%2!==0)throw new TypeError("Invalid hex string");r>s/2&&(r=s/2);for(var i=0;i<r;++i){var o=parseInt(e.substr(i*2,2),16);if(isNaN(o))return i;c[t+i]=o}return i}function ha(c,e,t,r){return Jr(Wr(e,c.length-t),c,t,r)}function Ps(c,e,t,r){return Jr(ka(e),c,t,r)}function da(c,e,t,r){return Ps(c,e,t,r)}function ma(c,e,t,r){return Jr(js(e),c,t,r)}function pa(c,e,t,r){return Jr(Pa(e,c.length-t),c,t,r)}ne.prototype.write=function(e,t,r,n){if(t===void 0)n="utf8",r=this.length,t=0;else if(r===void 0&&typeof t=="string")n=t,r=this.length,t=0;else if(isFinite(t))t=t|0,isFinite(r)?(r=r|0,n===void 0&&(n="utf8")):(n=r,r=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var s=this.length-t;if((r===void 0||r>s)&&(r=s),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return fa(this,e,t,r);case"utf8":case"utf-8":return ha(this,e,t,r);case"ascii":return Ps(this,e,t,r);case"latin1":case"binary":return da(this,e,t,r);case"base64":return ma(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return pa(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}};ne.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ya(c,e,t){return e===0&&t===c.length?fs(c):fs(c.slice(e,t))}function Ds(c,e,t){t=Math.min(c.length,t);for(var r=[],n=e;n<t;){var s=c[n],i=null,o=s>239?4:s>223?3:s>191?2:1;if(n+o<=t){var f,l,p,m;switch(o){case 1:s<128&&(i=s);break;case 2:f=c[n+1],(f&192)===128&&(m=(s&31)<<6|f&63,m>127&&(i=m));break;case 3:f=c[n+1],l=c[n+2],(f&192)===128&&(l&192)===128&&(m=(s&15)<<12|(f&63)<<6|l&63,m>2047&&(m<55296||m>57343)&&(i=m));break;case 4:f=c[n+1],l=c[n+2],p=c[n+3],(f&192)===128&&(l&192)===128&&(p&192)===128&&(m=(s&15)<<18|(f&63)<<12|(l&63)<<6|p&63,m>65535&&m<1114112&&(i=m))}}i===null?(i=65533,o=1):i>65535&&(i-=65536,r.push(i>>>10&1023|55296),i=56320|i&1023),r.push(i),n+=o}return ga(r)}var ds=4096;function ga(c){var e=c.length;if(e<=ds)return String.fromCharCode.apply(String,c);for(var t="",r=0;r<e;)t+=String.fromCharCode.apply(String,c.slice(r,r+=ds));return t}function va(c,e,t){var r="";t=Math.min(c.length,t);for(var n=e;n<t;++n)r+=String.fromCharCode(c[n]&127);return r}function ba(c,e,t){var r="";t=Math.min(c.length,t);for(var n=e;n<t;++n)r+=String.fromCharCode(c[n]);return r}function wa(c,e,t){var r=c.length;(!e||e<0)&&(e=0),(!t||t<0||t>r)&&(t=r);for(var n="",s=e;s<t;++s)n+=xa(c[s]);return n}function _a(c,e,t){for(var r=c.slice(e,t),n="",s=0;s<r.length;s+=2)n+=String.fromCharCode(r[s]+r[s+1]*256);return n}ne.prototype.slice=function(e,t){var r=this.length;e=~~e,t=t===void 0?r:~~t,e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),t<e&&(t=e);var n;if(ne.TYPED_ARRAY_SUPPORT)n=this.subarray(e,t),n.__proto__=ne.prototype;else{var s=t-e;n=new ne(s,void 0);for(var i=0;i<s;++i)n[i]=this[i+e]}return n};function et(c,e,t){if(c%1!==0||c<0)throw new RangeError("offset is not uint");if(c+e>t)throw new RangeError("Trying to access beyond buffer length")}ne.prototype.readUIntLE=function(e,t,r){e=e|0,t=t|0,r||et(e,t,this.length);for(var n=this[e],s=1,i=0;++i<t&&(s*=256);)n+=this[e+i]*s;return n};ne.prototype.readUIntBE=function(e,t,r){e=e|0,t=t|0,r||et(e,t,this.length);for(var n=this[e+--t],s=1;t>0&&(s*=256);)n+=this[e+--t]*s;return n};ne.prototype.readUInt8=function(e,t){return t||et(e,1,this.length),this[e]};ne.prototype.readUInt16LE=function(e,t){return t||et(e,2,this.length),this[e]|this[e+1]<<8};ne.prototype.readUInt16BE=function(e,t){return t||et(e,2,this.length),this[e]<<8|this[e+1]};ne.prototype.readUInt32LE=function(e,t){return t||et(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};ne.prototype.readUInt32BE=function(e,t){return t||et(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};ne.prototype.readIntLE=function(e,t,r){e=e|0,t=t|0,r||et(e,t,this.length);for(var n=this[e],s=1,i=0;++i<t&&(s*=256);)n+=this[e+i]*s;return s*=128,n>=s&&(n-=Math.pow(2,8*t)),n};ne.prototype.readIntBE=function(e,t,r){e=e|0,t=t|0,r||et(e,t,this.length);for(var n=t,s=1,i=this[e+--n];n>0&&(s*=256);)i+=this[e+--n]*s;return s*=128,i>=s&&(i-=Math.pow(2,8*t)),i};ne.prototype.readInt8=function(e,t){return t||et(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};ne.prototype.readInt16LE=function(e,t){t||et(e,2,this.length);var r=this[e]|this[e+1]<<8;return r&32768?r|4294901760:r};ne.prototype.readInt16BE=function(e,t){t||et(e,2,this.length);var r=this[e+1]|this[e]<<8;return r&32768?r|4294901760:r};ne.prototype.readInt32LE=function(e,t){return t||et(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};ne.prototype.readInt32BE=function(e,t){return t||et(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};ne.prototype.readFloatLE=function(e,t){return t||et(e,4,this.length),Hr(this,e,!0,23,4)};ne.prototype.readFloatBE=function(e,t){return t||et(e,4,this.length),Hr(this,e,!1,23,4)};ne.prototype.readDoubleLE=function(e,t){return t||et(e,8,this.length),Hr(this,e,!0,52,8)};ne.prototype.readDoubleBE=function(e,t){return t||et(e,8,this.length),Hr(this,e,!1,52,8)};function ft(c,e,t,r,n,s){if(!Dt(c))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<s)throw new RangeError('"value" argument is out of bounds');if(t+r>c.length)throw new RangeError("Index out of range")}ne.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t=t|0,r=r|0,!n){var s=Math.pow(2,8*r)-1;ft(this,e,t,r,s,0)}var i=1,o=0;for(this[t]=e&255;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r};ne.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t=t|0,r=r|0,!n){var s=Math.pow(2,8*r)-1;ft(this,e,t,r,s,0)}var i=r-1,o=1;for(this[t+i]=e&255;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r};ne.prototype.writeUInt8=function(e,t,r){return e=+e,t=t|0,r||ft(this,e,t,1,255,0),ne.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=e&255,t+1};function Kr(c,e,t,r){e<0&&(e=65535+e+1);for(var n=0,s=Math.min(c.length-t,2);n<s;++n)c[t+n]=(e&255<<8*(r?n:1-n))>>>(r?n:1-n)*8}ne.prototype.writeUInt16LE=function(e,t,r){return e=+e,t=t|0,r||ft(this,e,t,2,65535,0),ne.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):Kr(this,e,t,!0),t+2};ne.prototype.writeUInt16BE=function(e,t,r){return e=+e,t=t|0,r||ft(this,e,t,2,65535,0),ne.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):Kr(this,e,t,!1),t+2};function Yr(c,e,t,r){e<0&&(e=4294967295+e+1);for(var n=0,s=Math.min(c.length-t,4);n<s;++n)c[t+n]=e>>>(r?n:3-n)*8&255}ne.prototype.writeUInt32LE=function(e,t,r){return e=+e,t=t|0,r||ft(this,e,t,4,4294967295,0),ne.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255):Yr(this,e,t,!0),t+4};ne.prototype.writeUInt32BE=function(e,t,r){return e=+e,t=t|0,r||ft(this,e,t,4,4294967295,0),ne.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):Yr(this,e,t,!1),t+4};ne.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t=t|0,!n){var s=Math.pow(2,8*r-1);ft(this,e,t,r,s-1,-s)}var i=0,o=1,f=0;for(this[t]=e&255;++i<r&&(o*=256);)e<0&&f===0&&this[t+i-1]!==0&&(f=1),this[t+i]=(e/o>>0)-f&255;return t+r};ne.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t=t|0,!n){var s=Math.pow(2,8*r-1);ft(this,e,t,r,s-1,-s)}var i=r-1,o=1,f=0;for(this[t+i]=e&255;--i>=0&&(o*=256);)e<0&&f===0&&this[t+i+1]!==0&&(f=1),this[t+i]=(e/o>>0)-f&255;return t+r};ne.prototype.writeInt8=function(e,t,r){return e=+e,t=t|0,r||ft(this,e,t,1,127,-128),ne.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=e&255,t+1};ne.prototype.writeInt16LE=function(e,t,r){return e=+e,t=t|0,r||ft(this,e,t,2,32767,-32768),ne.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):Kr(this,e,t,!0),t+2};ne.prototype.writeInt16BE=function(e,t,r){return e=+e,t=t|0,r||ft(this,e,t,2,32767,-32768),ne.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):Kr(this,e,t,!1),t+2};ne.prototype.writeInt32LE=function(e,t,r){return e=+e,t=t|0,r||ft(this,e,t,4,2147483647,-2147483648),ne.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):Yr(this,e,t,!0),t+4};ne.prototype.writeInt32BE=function(e,t,r){return e=+e,t=t|0,r||ft(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),ne.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):Yr(this,e,t,!1),t+4};function As(c,e,t,r,n,s){if(t+r>c.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function Is(c,e,t,r,n){return n||As(c,e,t,4),_s(c,e,t,r,23,4),t+4}ne.prototype.writeFloatLE=function(e,t,r){return Is(this,e,t,!0,r)};ne.prototype.writeFloatBE=function(e,t,r){return Is(this,e,t,!1,r)};function Os(c,e,t,r,n){return n||As(c,e,t,8),_s(c,e,t,r,52,8),t+8}ne.prototype.writeDoubleLE=function(e,t,r){return Os(this,e,t,!0,r)};ne.prototype.writeDoubleBE=function(e,t,r){return Os(this,e,t,!1,r)};ne.prototype.copy=function(e,t,r,n){if(r||(r=0),!n&&n!==0&&(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var s=n-r,i;if(this===e&&r<t&&t<n)for(i=s-1;i>=0;--i)e[i+t]=this[i+r];else if(s<1e3||!ne.TYPED_ARRAY_SUPPORT)for(i=0;i<s;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+s),t);return s};ne.prototype.fill=function(e,t,r,n){if(typeof e=="string"){if(typeof t=="string"?(n=t,t=0,r=this.length):typeof r=="string"&&(n=r,r=this.length),e.length===1){var s=e.charCodeAt(0);s<256&&(e=s)}if(n!==void 0&&typeof n!="string")throw new TypeError("encoding must be a string");if(typeof n=="string"&&!ne.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else typeof e=="number"&&(e=e&255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;t=t>>>0,r=r===void 0?this.length:r>>>0,e||(e=0);var i;if(typeof e=="number")for(i=t;i<r;++i)this[i]=e;else{var o=Dt(e)?e:Wr(new ne(e,n).toString()),f=o.length;for(i=0;i<r-t;++i)this[i+t]=o[i%f]}return this};var Ea=/[^+\/0-9A-Za-z-_]/g;function Sa(c){if(c=Ta(c).replace(Ea,""),c.length<2)return"";for(;c.length%4!==0;)c=c+"=";return c}function Ta(c){return c.trim?c.trim():c.replace(/^\s+|\s+$/g,"")}function xa(c){return c<16?"0"+c.toString(16):c.toString(16)}function Wr(c,e){e=e||1/0;for(var t,r=c.length,n=null,s=[],i=0;i<r;++i){if(t=c.charCodeAt(i),t>55295&&t<57344){if(!n){if(t>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(i+1===r){(e-=3)>-1&&s.push(239,191,189);continue}n=t;continue}if(t<56320){(e-=3)>-1&&s.push(239,191,189),n=t;continue}t=(n-55296<<10|t-56320)+65536}else n&&(e-=3)>-1&&s.push(239,191,189);if(n=null,t<128){if((e-=1)<0)break;s.push(t)}else if(t<2048){if((e-=2)<0)break;s.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;s.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;s.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return s}function ka(c){for(var e=[],t=0;t<c.length;++t)e.push(c.charCodeAt(t)&255);return e}function Pa(c,e){for(var t,r,n,s=[],i=0;i<c.length&&!((e-=2)<0);++i)t=c.charCodeAt(i),r=t>>8,n=t%256,s.push(n),s.push(r);return s}function js(c){return ta(Sa(c))}function Jr(c,e,t,r){for(var n=0;n<r&&!(n+t>=e.length||n>=c.length);++n)e[n+t]=c[n];return n}function Da(c){return c!==c}function Aa(c){return c!=null&&(!!c._isBuffer||Rs(c)||Ia(c))}function Rs(c){return!!c.constructor&&typeof c.constructor.isBuffer=="function"&&c.constructor.isBuffer(c)}function Ia(c){return typeof c.readFloatLE=="function"&&typeof c.slice=="function"&&Rs(c.slice(0,0))}var Wt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ns(c){if(c.__esModule)return c;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(c).forEach(function(t){var r=Object.getOwnPropertyDescriptor(c,t);Object.defineProperty(e,t,r.get?r:{enumerable:!0,get:function(){return c[t]}})}),e}function Vt(c){throw new Error('Could not dynamically require "'+c+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Cs={exports:{}},Oa={},ja=Object.freeze({__proto__:null,default:Oa}),Ra=Ns(ja);function Fs(c,e){for(var t=0,r=c.length-1;r>=0;r--){var n=c[r];n==="."?c.splice(r,1):n===".."?(c.splice(r,1),t++):t&&(c.splice(r,1),t--)}if(e)for(;t--;t)c.unshift("..");return c}var Na=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,yn=function(c){return Na.exec(c).slice(1)};function Vr(){for(var c="",e=!1,t=arguments.length-1;t>=-1&&!e;t--){var r=t>=0?arguments[t]:"/";if(typeof r!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!r)continue;c=r+"/"+c,e=r.charAt(0)==="/"}return c=Fs(bn(c.split("/"),function(n){return!!n}),!e).join("/"),(e?"/":"")+c||"."}function gn(c){var e=vn(c),t=Fa(c,-1)==="/";return c=Fs(bn(c.split("/"),function(r){return!!r}),!e).join("/"),!c&&!e&&(c="."),c&&t&&(c+="/"),(e?"/":"")+c}function vn(c){return c.charAt(0)==="/"}function Bs(){var c=Array.prototype.slice.call(arguments,0);return gn(bn(c,function(e,t){if(typeof e!="string")throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))}function $s(c,e){c=Vr(c).substr(1),e=Vr(e).substr(1);function t(l){for(var p=0;p<l.length&&l[p]==="";p++);for(var m=l.length-1;m>=0&&l[m]==="";m--);return p>m?[]:l.slice(p,m-p+1)}for(var r=t(c.split("/")),n=t(e.split("/")),s=Math.min(r.length,n.length),i=s,o=0;o<s;o++)if(r[o]!==n[o]){i=o;break}for(var f=[],o=i;o<r.length;o++)f.push("..");return f=f.concat(n.slice(i)),f.join("/")}var Ls="/",zs=":";function Ms(c){var e=yn(c),t=e[0],r=e[1];return!t&&!r?".":(r&&(r=r.substr(0,r.length-1)),t+r)}function Us(c,e){var t=yn(c)[2];return e&&t.substr(-1*e.length)===e&&(t=t.substr(0,t.length-e.length)),t}function qs(c){return yn(c)[3]}var Ca={extname:qs,basename:Us,dirname:Ms,sep:Ls,delimiter:zs,relative:$s,join:Bs,isAbsolute:vn,normalize:gn,resolve:Vr};function bn(c,e){if(c.filter)return c.filter(e);for(var t=[],r=0;r<c.length;r++)e(c[r],r,c)&&t.push(c[r]);return t}var Fa="ab".substr(-1)==="b"?function(c,e,t){return c.substr(e,t)}:function(c,e,t){return e<0&&(e=c.length+e),c.substr(e,t)},Ba=Object.freeze({__proto__:null,resolve:Vr,normalize:gn,isAbsolute:vn,join:Bs,relative:$s,sep:Ls,delimiter:zs,dirname:Ms,basename:Us,extname:qs,default:Ca}),$a=Ns(Ba);(function(c,e){var t=void 0,r=function(n){return t||(t=new Promise(function(s,i){var o=typeof n<"u"?n:{},f=o.onAbort;o.onAbort=function(a){i(new Error(a)),f&&f(a)},o.postRun=o.postRun||[],o.postRun.push(function(){s(o)}),c=void 0;var l;l||=typeof o<"u"?o:{};var p=typeof window=="object",m=typeof importScripts=="function",v=typeof Ut=="object"&&typeof Ut.versions=="object"&&typeof Ut.versions.node=="string";l.onRuntimeInitialized=function(){function a(M,oe){switch(typeof oe){case"boolean":_i(M,oe?1:0);break;case"number":vi(M,oe);break;case"string":bi(M,oe,-1,-1);break;case"object":if(oe===null)Pn(M);else if(oe.length!=null){var Te=kt(oe,nt);wi(M,Te,oe.length,-1),Cr(Te)}else Br(M,"Wrong API use : tried to return a value of an unknown type ("+oe+").",-1);break;default:Pn(M)}}function u(M,oe){for(var Te=[],Oe=0;Oe<M;Oe+=1){var Fe=d(oe+4*Oe,"i32"),Ge=di(Fe);if(Ge===1||Ge===2)Fe=gi(Fe);else if(Ge===3)Fe=pi(Fe);else if(Ge===4){Ge=Fe,Fe=mi(Ge),Ge=yi(Ge);for(var bt=new Uint8Array(Fe),pt=0;pt<Fe;pt+=1)bt[pt]=U[Ge+pt];Fe=bt}else Fe=null;Te.push(Fe)}return Te}function h(M,oe){this.Ka=M,this.db=oe,this.Ia=1,this.eb=[]}function S(M,oe){if(this.db=oe,oe=Le(M)+1,this.Xa=sn(oe),this.Xa===null)throw Error("Unable to allocate memory for the SQL string");Ae(M,Z,this.Xa,oe),this.cb=this.Xa,this.Ta=this.hb=null}function R(M){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),M!=null){var oe=this.filename,Te="/",Oe=oe;if(Te&&(Te=typeof Te=="string"?Te:nr(Te),Oe=oe?te(Te+"/"+oe):Te),oe=At(!0,!0),Oe=sr(Oe,(oe!==void 0?oe:438)&4095|32768,0),M){if(typeof M=="string"){Te=Array(M.length);for(var Fe=0,Ge=M.length;Fe<Ge;++Fe)Te[Fe]=M.charCodeAt(Fe);M=Te}ar(Oe,oe|146),Te=xt(Oe,577),Nr(Te,M,0,M.length,0),vr(Te),ar(Oe,oe)}}this.handleError(Ie(this.filename,Y)),this.db=d(Y,"i32"),An(this.db),this.Ya={},this.Ma={}}var Y=Lt(4),re=l.cwrap,Ie=re("sqlite3_open","number",["string","number"]),Ue=re("sqlite3_close_v2","number",["number"]),Ne=re("sqlite3_exec","number",["number","string","number","number","number"]),Ze=re("sqlite3_changes","number",["number"]),Xe=re("sqlite3_prepare_v2","number",["number","string","number","number","number"]),En=re("sqlite3_sql","string",["number"]),Js=re("sqlite3_normalized_sql","string",["number"]),Sn=re("sqlite3_prepare_v2","number",["number","number","number","number","number"]),Zs=re("sqlite3_bind_text","number",["number","number","number","number","number"]),Tn=re("sqlite3_bind_blob","number",["number","number","number","number","number"]),Qs=re("sqlite3_bind_double","number",["number","number","number"]),Xs=re("sqlite3_bind_int","number",["number","number","number"]),ei=re("sqlite3_bind_parameter_index","number",["number","string"]),ti=re("sqlite3_step","number",["number"]),ri=re("sqlite3_errmsg","string",["number"]),ni=re("sqlite3_column_count","number",["number"]),si=re("sqlite3_data_count","number",["number"]),ii=re("sqlite3_column_double","number",["number","number"]),xn=re("sqlite3_column_text","string",["number","number"]),ai=re("sqlite3_column_blob","number",["number","number"]),oi=re("sqlite3_column_bytes","number",["number","number"]),ci=re("sqlite3_column_type","number",["number","number"]),li=re("sqlite3_column_name","string",["number","number"]),ui=re("sqlite3_reset","number",["number"]),fi=re("sqlite3_clear_bindings","number",["number"]),hi=re("sqlite3_finalize","number",["number"]),kn=re("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),di=re("sqlite3_value_type","number",["number"]),mi=re("sqlite3_value_bytes","number",["number"]),pi=re("sqlite3_value_text","string",["number"]),yi=re("sqlite3_value_blob","number",["number"]),gi=re("sqlite3_value_double","number",["number"]),vi=re("sqlite3_result_double","",["number","number"]),Pn=re("sqlite3_result_null","",["number"]),bi=re("sqlite3_result_text","",["number","string","number","number"]),wi=re("sqlite3_result_blob","",["number","number","number","number"]),_i=re("sqlite3_result_int","",["number","number"]),Br=re("sqlite3_result_error","",["number","string","number"]),Dn=re("sqlite3_aggregate_context","number",["number","number"]),An=re("RegisterExtensionFunctions","number",["number"]);h.prototype.bind=function(M){if(!this.Ka)throw"Statement closed";return this.reset(),Array.isArray(M)?this.vb(M):M!=null&&typeof M=="object"?this.wb(M):!0},h.prototype.step=function(){if(!this.Ka)throw"Statement closed";this.Ia=1;var M=ti(this.Ka);switch(M){case 100:return!0;case 101:return!1;default:throw this.db.handleError(M)}},h.prototype.qb=function(M){return M==null&&(M=this.Ia,this.Ia+=1),ii(this.Ka,M)},h.prototype.zb=function(M){if(M==null&&(M=this.Ia,this.Ia+=1),M=xn(this.Ka,M),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(M)},h.prototype.Ab=function(M){return M==null&&(M=this.Ia,this.Ia+=1),xn(this.Ka,M)},h.prototype.getBlob=function(M){M==null&&(M=this.Ia,this.Ia+=1);var oe=oi(this.Ka,M);M=ai(this.Ka,M);for(var Te=new Uint8Array(oe),Oe=0;Oe<oe;Oe+=1)Te[Oe]=U[M+Oe];return Te},h.prototype.get=function(M,oe){oe=oe||{},M!=null&&this.bind(M)&&this.step(),M=[];for(var Te=si(this.Ka),Oe=0;Oe<Te;Oe+=1)switch(ci(this.Ka,Oe)){case 1:var Fe=oe.useBigInt?this.zb(Oe):this.qb(Oe);M.push(Fe);break;case 2:M.push(this.qb(Oe));break;case 3:M.push(this.Ab(Oe));break;case 4:M.push(this.getBlob(Oe));break;default:M.push(null)}return M},h.prototype.getColumnNames=function(){for(var M=[],oe=ni(this.Ka),Te=0;Te<oe;Te+=1)M.push(li(this.Ka,Te));return M},h.prototype.getAsObject=function(M,oe){M=this.get(M,oe),oe=this.getColumnNames();for(var Te={},Oe=0;Oe<oe.length;Oe+=1)Te[oe[Oe]]=M[Oe];return Te},h.prototype.getSQL=function(){return En(this.Ka)},h.prototype.getNormalizedSQL=function(){return Js(this.Ka)},h.prototype.run=function(M){return M!=null&&this.bind(M),this.step(),this.reset()},h.prototype.mb=function(M,oe){oe==null&&(oe=this.Ia,this.Ia+=1),M=Qe(M);var Te=kt(M,nt);this.eb.push(Te),this.db.handleError(Zs(this.Ka,oe,Te,M.length-1,0))},h.prototype.ub=function(M,oe){oe==null&&(oe=this.Ia,this.Ia+=1);var Te=kt(M,nt);this.eb.push(Te),this.db.handleError(Tn(this.Ka,oe,Te,M.length,0))},h.prototype.lb=function(M,oe){oe==null&&(oe=this.Ia,this.Ia+=1),this.db.handleError((M===(M|0)?Xs:Qs)(this.Ka,oe,M))},h.prototype.xb=function(M){M==null&&(M=this.Ia,this.Ia+=1),Tn(this.Ka,M,0,0,0)},h.prototype.nb=function(M,oe){switch(oe==null&&(oe=this.Ia,this.Ia+=1),typeof M){case"string":this.mb(M,oe);return;case"number":this.lb(M,oe);return;case"bigint":this.mb(M.toString(),oe);return;case"boolean":this.lb(M+0,oe);return;case"object":if(M===null){this.xb(oe);return}if(M.length!=null){this.ub(M,oe);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+M+")."},h.prototype.wb=function(M){var oe=this;return Object.keys(M).forEach(function(Te){var Oe=ei(oe.Ka,Te);Oe!==0&&oe.nb(M[Te],Oe)}),!0},h.prototype.vb=function(M){for(var oe=0;oe<M.length;oe+=1)this.nb(M[oe],oe+1);return!0},h.prototype.reset=function(){return this.freemem(),fi(this.Ka)===0&&ui(this.Ka)===0},h.prototype.freemem=function(){for(var M;(M=this.eb.pop())!==void 0;)Cr(M)},h.prototype.free=function(){this.freemem();var M=hi(this.Ka)===0;return delete this.db.Ya[this.Ka],this.Ka=0,M},S.prototype.next=function(){if(this.Xa===null)return{done:!0};if(this.Ta!==null&&(this.Ta.free(),this.Ta=null),!this.db.db)throw this.fb(),Error("Database closed");var M=_r(),oe=Lt(4);J(Y),J(oe);try{this.db.handleError(Sn(this.db.db,this.cb,-1,Y,oe)),this.cb=d(oe,"i32");var Te=d(Y,"i32");return Te===0?(this.fb(),{done:!0}):(this.Ta=new h(Te,this.db),this.db.Ya[Te]=this.Ta,{value:this.Ta,done:!1})}catch(Oe){throw this.hb=k(this.cb),this.fb(),Oe}finally{wr(M)}},S.prototype.fb=function(){Cr(this.Xa),this.Xa=null},S.prototype.getRemainingSQL=function(){return this.hb!==null?this.hb:k(this.cb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(S.prototype[Symbol.iterator]=function(){return this}),R.prototype.run=function(M,oe){if(!this.db)throw"Database closed";if(oe){M=this.prepare(M,oe);try{M.step()}finally{M.free()}}else this.handleError(Ne(this.db,M,0,0,Y));return this},R.prototype.exec=function(M,oe,Te){if(!this.db)throw"Database closed";var Oe=_r(),Fe=null;try{var Ge=He(M),bt=Lt(4);for(M=[];d(Ge,"i8")!==0;){J(Y),J(bt),this.handleError(Sn(this.db,Ge,-1,Y,bt));var pt=d(Y,"i32");if(Ge=d(bt,"i32"),pt!==0){var dt=null;for(Fe=new h(pt,this),oe!=null&&Fe.bind(oe);Fe.step();)dt===null&&(dt={columns:Fe.getColumnNames(),values:[]},M.push(dt)),dt.values.push(Fe.get(null,Te));Fe.free()}}return M}catch(wt){throw Fe&&Fe.free(),wt}finally{wr(Oe)}},R.prototype.each=function(M,oe,Te,Oe,Fe){typeof oe=="function"&&(Oe=Te,Te=oe,oe=void 0),M=this.prepare(M,oe);try{for(;M.step();)Te(M.getAsObject(null,Fe))}finally{M.free()}if(typeof Oe=="function")return Oe()},R.prototype.prepare=function(M,oe){if(J(Y),this.handleError(Xe(this.db,M,-1,Y,0)),M=d(Y,"i32"),M===0)throw"Nothing to prepare";var Te=new h(M,this);return oe!=null&&Te.bind(oe),this.Ya[M]=Te},R.prototype.iterateStatements=function(M){return new S(M,this)},R.prototype.export=function(){Object.values(this.Ya).forEach(function(oe){oe.free()}),Object.values(this.Ma).forEach(Ht),this.Ma={},this.handleError(Ue(this.db));var M=rn(this.filename);return this.handleError(Ie(this.filename,Y)),this.db=d(Y,"i32"),An(this.db),M},R.prototype.close=function(){this.db!==null&&(Object.values(this.Ya).forEach(function(M){M.free()}),Object.values(this.Ma).forEach(Ht),this.Ma={},this.handleError(Ue(this.db)),gr("/"+this.filename),this.db=null)},R.prototype.handleError=function(M){if(M===0)return null;throw M=ri(this.db),Error(M)},R.prototype.getRowsModified=function(){return Ze(this.db)},R.prototype.create_function=function(M,oe){Object.prototype.hasOwnProperty.call(this.Ma,M)&&(Ht(this.Ma[M]),delete this.Ma[M]);var Te=cr(function(Oe,Fe,Ge){Fe=u(Fe,Ge);try{var bt=oe.apply(null,Fe)}catch(pt){Br(Oe,pt,-1);return}a(Oe,bt)},"viii");return this.Ma[M]=Te,this.handleError(kn(this.db,M,oe.length,1,0,Te,0,0,0)),this},R.prototype.create_aggregate=function(M,oe){var Te=oe.init||function(){return null},Oe=oe.finalize||function(dt){return dt},Fe=oe.step;if(!Fe)throw"An aggregate function must have a step function in "+M;var Ge={};Object.hasOwnProperty.call(this.Ma,M)&&(Ht(this.Ma[M]),delete this.Ma[M]),oe=M+"__finalize",Object.hasOwnProperty.call(this.Ma,oe)&&(Ht(this.Ma[oe]),delete this.Ma[oe]);var bt=cr(function(dt,wt,an){var Kt=Dn(dt,1);Object.hasOwnProperty.call(Ge,Kt)||(Ge[Kt]=Te()),wt=u(wt,an),wt=[Ge[Kt]].concat(wt);try{Ge[Kt]=Fe.apply(null,wt)}catch(Ei){delete Ge[Kt],Br(dt,Ei,-1)}},"viii"),pt=cr(function(dt){var wt=Dn(dt,1);try{var an=Oe(Ge[wt])}catch(Kt){delete Ge[wt],Br(dt,Kt,-1);return}a(dt,an),delete Ge[wt]},"vi");return this.Ma[M]=bt,this.Ma[oe]=pt,this.handleError(kn(this.db,M,Fe.length-1,1,0,0,bt,pt,0)),this},l.Database=R};var y=Object.assign({},l),_="./this.program",b="",T,E;if(v){var A=Ra,C=$a;b=Xi+"/",E=a=>(a=pe(a)?new URL(a):C.normalize(a),A.readFileSync(a)),T=a=>(a=pe(a)?new URL(a):C.normalize(a),new Promise((u,h)=>{A.readFile(a,void 0,(S,R)=>{S?h(S):u(R.buffer)})})),!l.thisProgram&&1<Ut.argv.length&&(_=Ut.argv[1].replace(/\\/g,"/")),Ut.argv.slice(2),c.exports=l}else(p||m)&&(m?b=self.location.href:typeof document<"u"&&document.currentScript&&(b=document.currentScript.src),b=b.startsWith("blob:")?"":b.substr(0,b.replace(/[?#].*/,"").lastIndexOf("/")+1),m&&(E=a=>{var u=new XMLHttpRequest;return u.open("GET",a,!1),u.responseType="arraybuffer",u.send(null),new Uint8Array(u.response)}),T=a=>pe(a)?new Promise((u,h)=>{var S=new XMLHttpRequest;S.open("GET",a,!0),S.responseType="arraybuffer",S.onload=()=>{(S.status==200||S.status==0&&S.response)&&h(S.response),u(S.status)},S.onerror=u,S.send(null)}):fetch(a,{credentials:"same-origin"}).then(u=>u.ok?u.arrayBuffer():Promise.reject(Error(u.status+" : "+u.url))));var L=l.print||console.log.bind(console),I=l.printErr||console.error.bind(console);Object.assign(l,y),y=null,l.thisProgram&&(_=l.thisProgram);var H;l.wasmBinary&&(H=l.wasmBinary);var z,Q=!1,U,Z,we,D,G,g,ee;function ke(){var a=z.buffer;l.HEAP8=U=new Int8Array(a),l.HEAP16=we=new Int16Array(a),l.HEAPU8=Z=new Uint8Array(a),l.HEAPU16=new Uint16Array(a),l.HEAP32=D=new Int32Array(a),l.HEAPU32=G=new Uint32Array(a),l.HEAPF32=g=new Float32Array(a),l.HEAPF64=ee=new Float64Array(a)}var ae=[],je=[],ue=[];function Pe(){var a=l.preRun.shift();ae.unshift(a)}var W=0,V=null;function Ee(a){throw l.onAbort?.(a),a="Aborted("+a+")",I(a),Q=!0,new WebAssembly.RuntimeError(a+". Build with -sASSERTIONS for more info.")}var be=a=>a.startsWith("data:application/octet-stream;base64,"),pe=a=>a.startsWith("file://"),We;function Je(a){if(a==We&&H)return new Uint8Array(H);if(E)return E(a);throw"both async and sync fetching of the wasm failed"}function Ce(a){return H?Promise.resolve().then(()=>Je(a)):T(a).then(u=>new Uint8Array(u),()=>Je(a))}function $e(a,u,h){return Ce(a).then(S=>WebAssembly.instantiate(S,u)).then(h,S=>{I(`failed to asynchronously prepare wasm: ${S}`),Ee(S)})}function Ye(a,u){var h=We;H||typeof WebAssembly.instantiateStreaming!="function"||be(h)||pe(h)||v||typeof fetch!="function"?$e(h,a,u):fetch(h,{credentials:"same-origin"}).then(S=>WebAssembly.instantiateStreaming(S,a).then(u,function(R){return I(`wasm streaming compile failed: ${R}`),I("falling back to ArrayBuffer instantiation"),$e(h,a,u)}))}var ge,Be,tt=a=>{for(;0<a.length;)a.shift()(l)};function d(a,u="i8"){switch(u.endsWith("*")&&(u="*"),u){case"i1":return U[a];case"i8":return U[a];case"i16":return we[a>>1];case"i32":return D[a>>2];case"i64":Ee("to do getValue(i64) use WASM_BIGINT");case"float":return g[a>>2];case"double":return ee[a>>3];case"*":return G[a>>2];default:Ee(`invalid type for getValue: ${u}`)}}function J(a){var u="i32";switch(u.endsWith("*")&&(u="*"),u){case"i1":U[a]=0;break;case"i8":U[a]=0;break;case"i16":we[a>>1]=0;break;case"i32":D[a>>2]=0;break;case"i64":Ee("to do setValue(i64) use WASM_BIGINT");case"float":g[a>>2]=0;break;case"double":ee[a>>3]=0;break;case"*":G[a>>2]=0;break;default:Ee(`invalid type for setValue: ${u}`)}}var K=typeof TextDecoder<"u"?new TextDecoder:void 0,P=(a,u,h)=>{var S=u+h;for(h=u;a[h]&&!(h>=S);)++h;if(16<h-u&&a.buffer&&K)return K.decode(a.subarray(u,h));for(S="";u<h;){var R=a[u++];if(R&128){var Y=a[u++]&63;if((R&224)==192)S+=String.fromCharCode((R&31)<<6|Y);else{var re=a[u++]&63;R=(R&240)==224?(R&15)<<12|Y<<6|re:(R&7)<<18|Y<<12|re<<6|a[u++]&63,65536>R?S+=String.fromCharCode(R):(R-=65536,S+=String.fromCharCode(55296|R>>10,56320|R&1023))}}else S+=String.fromCharCode(R)}return S},k=(a,u)=>a?P(Z,a,u):"",B=(a,u)=>{for(var h=0,S=a.length-1;0<=S;S--){var R=a[S];R==="."?a.splice(S,1):R===".."?(a.splice(S,1),h++):h&&(a.splice(S,1),h--)}if(u)for(;h;h--)a.unshift("..");return a},te=a=>{var u=a.charAt(0)==="/",h=a.substr(-1)==="/";return(a=B(a.split("/").filter(S=>!!S),!u).join("/"))||u||(a="."),a&&h&&(a+="/"),(u?"/":"")+a},se=a=>{var u=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(a).slice(1);return a=u[0],u=u[1],!a&&!u?".":(u&&=u.substr(0,u.length-1),a+u)},q=a=>{if(a==="/")return"/";a=te(a),a=a.replace(/\/$/,"");var u=a.lastIndexOf("/");return u===-1?a:a.substr(u+1)},he=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return h=>crypto.getRandomValues(h);if(v)try{var a=Si("crypto");if(a.randomFillSync)return h=>a.randomFillSync(h);var u=a.randomBytes;return h=>(h.set(u(h.byteLength)),h)}catch{}Ee("initRandomDevice")},ve=a=>(ve=he())(a),fe=(...a)=>{for(var u="",h=!1,S=a.length-1;-1<=S&&!h;S--){if(h=0<=S?a[S]:"/",typeof h!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!h)return"";u=h+"/"+u,h=h.charAt(0)==="/"}return u=B(u.split("/").filter(R=>!!R),!h).join("/"),(h?"/":"")+u||"."},Se=[],Le=a=>{for(var u=0,h=0;h<a.length;++h){var S=a.charCodeAt(h);127>=S?u++:2047>=S?u+=2:55296<=S&&57343>=S?(u+=4,++h):u+=3}return u},Ae=(a,u,h,S)=>{if(!(0<S))return 0;var R=h;S=h+S-1;for(var Y=0;Y<a.length;++Y){var re=a.charCodeAt(Y);if(55296<=re&&57343>=re){var Ie=a.charCodeAt(++Y);re=65536+((re&1023)<<10)|Ie&1023}if(127>=re){if(h>=S)break;u[h++]=re}else{if(2047>=re){if(h+1>=S)break;u[h++]=192|re>>6}else{if(65535>=re){if(h+2>=S)break;u[h++]=224|re>>12}else{if(h+3>=S)break;u[h++]=240|re>>18,u[h++]=128|re>>12&63}u[h++]=128|re>>6&63}u[h++]=128|re&63}}return u[h]=0,h-R};function Qe(a,u){var h=Array(Le(a)+1);return a=Ae(a,h,0,h.length),u&&(h.length=a),h}var gt=[];function it(a,u){gt[a]={input:[],output:[],Wa:u},pr(a,Et)}var Et={open(a){var u=gt[a.node.rdev];if(!u)throw new ye(43);a.tty=u,a.seekable=!1},close(a){a.tty.Wa.fsync(a.tty)},fsync(a){a.tty.Wa.fsync(a.tty)},read(a,u,h,S){if(!a.tty||!a.tty.Wa.rb)throw new ye(60);for(var R=0,Y=0;Y<S;Y++){try{var re=a.tty.Wa.rb(a.tty)}catch{throw new ye(29)}if(re===void 0&&R===0)throw new ye(6);if(re==null)break;R++,u[h+Y]=re}return R&&(a.node.timestamp=Date.now()),R},write(a,u,h,S){if(!a.tty||!a.tty.Wa.ib)throw new ye(60);try{for(var R=0;R<S;R++)a.tty.Wa.ib(a.tty,u[h+R])}catch{throw new ye(29)}return S&&(a.node.timestamp=Date.now()),R}},Ve={rb(){e:{if(!Se.length){var a=null;if(v){var u=ne.alloc(256),h=0,S=Ut.stdin.fd;try{h=A.readSync(S,u,0,256)}catch(R){if(R.toString().includes("EOF"))h=0;else throw R}0<h&&(a=u.slice(0,h).toString("utf-8"))}else typeof window<"u"&&typeof window.prompt=="function"&&(a=window.prompt("Input: "),a!==null&&(a+=`
`));if(!a){a=null;break e}Se=Qe(a,!0)}a=Se.shift()}return a},ib(a,u){u===null||u===10?(L(P(a.output,0)),a.output=[]):u!=0&&a.output.push(u)},fsync(a){a.output&&0<a.output.length&&(L(P(a.output,0)),a.output=[])},Lb(){return{Gb:25856,Ib:5,Fb:191,Hb:35387,Eb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Mb(){return 0},Nb(){return[24,80]}},St={ib(a,u){u===null||u===10?(I(P(a.output,0)),a.output=[]):u!=0&&a.output.push(u)},fsync(a){a.output&&0<a.output.length&&(I(P(a.output,0)),a.output=[])}};function Nt(a,u){var h=a.Ha?a.Ha.length:0;h>=u||(u=Math.max(u,h*(1048576>h?2:1.125)>>>0),h!=0&&(u=Math.max(u,256)),h=a.Ha,a.Ha=new Uint8Array(u),0<a.La&&a.Ha.set(h.subarray(0,a.La),0))}var De={Pa:null,Qa(){return De.createNode(null,"/",16895,0)},createNode(a,u,h,S){if((h&61440)===24576||(h&61440)===4096)throw new ye(63);return De.Pa||(De.Pa={dir:{node:{Oa:De.Fa.Oa,Na:De.Fa.Na,lookup:De.Fa.lookup,$a:De.Fa.$a,rename:De.Fa.rename,unlink:De.Fa.unlink,rmdir:De.Fa.rmdir,readdir:De.Fa.readdir,symlink:De.Fa.symlink},stream:{Sa:De.Ga.Sa}},file:{node:{Oa:De.Fa.Oa,Na:De.Fa.Na},stream:{Sa:De.Ga.Sa,read:De.Ga.read,write:De.Ga.write,kb:De.Ga.kb,ab:De.Ga.ab,bb:De.Ga.bb}},link:{node:{Oa:De.Fa.Oa,Na:De.Fa.Na,readlink:De.Fa.readlink},stream:{}},ob:{node:{Oa:De.Fa.Oa,Na:De.Fa.Na},stream:tn}}),h=kr(a,u,h,S),lt(h.mode)?(h.Fa=De.Pa.dir.node,h.Ga=De.Pa.dir.stream,h.Ha={}):(h.mode&61440)===32768?(h.Fa=De.Pa.file.node,h.Ga=De.Pa.file.stream,h.La=0,h.Ha=null):(h.mode&61440)===40960?(h.Fa=De.Pa.link.node,h.Ga=De.Pa.link.stream):(h.mode&61440)===8192&&(h.Fa=De.Pa.ob.node,h.Ga=De.Pa.ob.stream),h.timestamp=Date.now(),a&&(a.Ha[u]=h,a.timestamp=h.timestamp),h},Kb(a){return a.Ha?a.Ha.subarray?a.Ha.subarray(0,a.La):new Uint8Array(a.Ha):new Uint8Array(0)},Fa:{Oa(a){var u={};return u.dev=(a.mode&61440)===8192?a.id:1,u.ino=a.id,u.mode=a.mode,u.nlink=1,u.uid=0,u.gid=0,u.rdev=a.rdev,lt(a.mode)?u.size=4096:(a.mode&61440)===32768?u.size=a.La:(a.mode&61440)===40960?u.size=a.link.length:u.size=0,u.atime=new Date(a.timestamp),u.mtime=new Date(a.timestamp),u.ctime=new Date(a.timestamp),u.yb=4096,u.blocks=Math.ceil(u.size/u.yb),u},Na(a,u){if(u.mode!==void 0&&(a.mode=u.mode),u.timestamp!==void 0&&(a.timestamp=u.timestamp),u.size!==void 0&&(u=u.size,a.La!=u))if(u==0)a.Ha=null,a.La=0;else{var h=a.Ha;a.Ha=new Uint8Array(u),h&&a.Ha.set(h.subarray(0,Math.min(u,a.La))),a.La=u}},lookup(){throw dr[44]},$a(a,u,h,S){return De.createNode(a,u,h,S)},rename(a,u,h){if(lt(a.mode)){try{var S=It(u,h)}catch{}if(S)for(var R in S.Ha)throw new ye(55)}delete a.parent.Ha[a.name],a.parent.timestamp=Date.now(),a.name=h,u.Ha[h]=a,u.timestamp=a.parent.timestamp},unlink(a,u){delete a.Ha[u],a.timestamp=Date.now()},rmdir(a,u){var h=It(a,u),S;for(S in h.Ha)throw new ye(55);delete a.Ha[u],a.timestamp=Date.now()},readdir(a){var u=[".",".."],h;for(h of Object.keys(a.Ha))u.push(h);return u},symlink(a,u,h){return a=De.createNode(a,u,41471,0),a.link=h,a},readlink(a){if((a.mode&61440)!==40960)throw new ye(28);return a.link}},Ga:{read(a,u,h,S,R){var Y=a.node.Ha;if(R>=a.node.La)return 0;if(a=Math.min(a.node.La-R,S),8<a&&Y.subarray)u.set(Y.subarray(R,R+a),h);else for(S=0;S<a;S++)u[h+S]=Y[R+S];return a},write(a,u,h,S,R,Y){if(u.buffer===U.buffer&&(Y=!1),!S)return 0;if(a=a.node,a.timestamp=Date.now(),u.subarray&&(!a.Ha||a.Ha.subarray)){if(Y)return a.Ha=u.subarray(h,h+S),a.La=S;if(a.La===0&&R===0)return a.Ha=u.slice(h,h+S),a.La=S;if(R+S<=a.La)return a.Ha.set(u.subarray(h,h+S),R),S}if(Nt(a,R+S),a.Ha.subarray&&u.subarray)a.Ha.set(u.subarray(h,h+S),R);else for(Y=0;Y<S;Y++)a.Ha[R+Y]=u[h+Y];return a.La=Math.max(a.La,R+S),S},Sa(a,u,h){if(h===1?u+=a.position:h===2&&(a.node.mode&61440)===32768&&(u+=a.node.La),0>u)throw new ye(28);return u},kb(a,u,h){Nt(a.node,u+h),a.node.La=Math.max(a.node.La,u+h)},ab(a,u,h,S,R){if((a.node.mode&61440)!==32768)throw new ye(43);if(a=a.node.Ha,R&2||a.buffer!==U.buffer){if((0<h||h+u<a.length)&&(a.subarray?a=a.subarray(h,h+u):a=Array.prototype.slice.call(a,h,h+u)),h=!0,u=65536*Math.ceil(u/65536),(R=wn(65536,u))?(Z.fill(0,R,R+u),u=R):u=0,!u)throw new ye(48);U.set(a,u)}else h=!1,u=a.byteOffset;return{Cb:u,tb:h}},bb(a,u,h,S){return De.Ga.write(a,u,0,S,h,!1),0}}},At=(a,u)=>{var h=0;return a&&(h|=365),u&&(h|=146),h},Ct=null,tr={},at=[],rr=1,ot=null,Tt=!0,ye=class{constructor(a){this.name="ErrnoError",this.Ja=a}},dr={},Qr=class{constructor(){this.Za={},this.node=null}get flags(){return this.Za.flags}set flags(a){this.Za.flags=a}get position(){return this.Za.position}set position(a){this.Za.position=a}},Xr=class{constructor(a,u,h,S){a||=this,this.parent=a,this.Qa=a.Qa,this.Ua=null,this.id=rr++,this.name=u,this.mode=h,this.Fa={},this.Ga={},this.rdev=S}get read(){return(this.mode&365)===365}set read(a){a?this.mode|=365:this.mode&=-366}get write(){return(this.mode&146)===146}set write(a){a?this.mode|=146:this.mode&=-147}};function ct(a,u={}){if(a=fe(a),!a)return{path:"",node:null};if(u=Object.assign({pb:!0,jb:0},u),8<u.jb)throw new ye(32);a=a.split("/").filter(re=>!!re);for(var h=Ct,S="/",R=0;R<a.length;R++){var Y=R===a.length-1;if(Y&&u.parent)break;if(h=It(h,a[R]),S=te(S+"/"+a[R]),h.Ua&&(!Y||Y&&u.pb)&&(h=h.Ua.root),!Y||u.Ra){for(Y=0;(h.mode&61440)===40960;)if(h=Bt(S),S=fe(se(S),h),h=ct(S,{jb:u.jb+1}).node,40<Y++)throw new ye(32)}}return{path:S,node:h}}function nr(a){for(var u;;){if(a===a.parent)return a=a.Qa.sb,u?a[a.length-1]!=="/"?`${a}/${u}`:a+u:a;u=u?`${a.name}/${u}`:a.name,a=a.parent}}function mr(a,u){for(var h=0,S=0;S<u.length;S++)h=(h<<5)-h+u.charCodeAt(S)|0;return(a+h>>>0)%ot.length}function xr(a){var u=mr(a.parent.id,a.name);if(ot[u]===a)ot[u]=a.Va;else for(u=ot[u];u;){if(u.Va===a){u.Va=a.Va;break}u=u.Va}}function It(a,u){var h=lt(a.mode)?(h=Ft(a,"x"))?h:a.Fa.lookup?0:2:54;if(h)throw new ye(h);for(h=ot[mr(a.id,u)];h;h=h.Va){var S=h.name;if(h.parent.id===a.id&&S===u)return h}return a.Fa.lookup(a,u)}function kr(a,u,h,S){return a=new Xr(a,u,h,S),u=mr(a.parent.id,a.name),a.Va=ot[u],ot[u]=a}function lt(a){return(a&61440)===16384}function Pr(a){var u=["r","w","rw"][a&3];return a&512&&(u+="w"),u}function Ft(a,u){if(Tt)return 0;if(!u.includes("r")||a.mode&292){if(u.includes("w")&&!(a.mode&146)||u.includes("x")&&!(a.mode&73))return 2}else return 2;return 0}function Dr(a,u){try{return It(a,u),20}catch{}return Ft(a,"wx")}function Ar(a,u,h){try{var S=It(a,u)}catch(R){return R.Ja}if(a=Ft(a,"wx"))return a;if(h){if(!lt(S.mode))return 54;if(S===S.parent||nr(S)==="/")return 10}else if(lt(S.mode))return 31;return 0}function rt(a){if(a=at[a],!a)throw new ye(8);return a}function Ir(a,u=-1){if(a=Object.assign(new Qr,a),u==-1)e:{for(u=0;4096>=u;u++)if(!at[u])break e;throw new ye(33)}return a.fd=u,at[u]=a}function en(a,u=-1){return a=Ir(a,u),a.Ga?.Jb?.(a),a}var tn={open(a){a.Ga=tr[a.node.rdev].Ga,a.Ga.open?.(a)},Sa(){throw new ye(70)}};function pr(a,u){tr[a]={Ga:u}}function Or(a,u){var h=u==="/";if(h&&Ct)throw new ye(10);if(!h&&u){var S=ct(u,{pb:!1});if(u=S.path,S=S.node,S.Ua)throw new ye(10);if(!lt(S.mode))throw new ye(54)}u={type:a,Ob:{},sb:u,Bb:[]},a=a.Qa(u),a.Qa=u,u.root=a,h?Ct=a:S&&(S.Ua=u,S.Qa&&S.Qa.Bb.push(u))}function sr(a,u,h){var S=ct(a,{parent:!0}).node;if(a=q(a),!a||a==="."||a==="..")throw new ye(28);var R=Dr(S,a);if(R)throw new ye(R);if(!S.Fa.$a)throw new ye(63);return S.Fa.$a(S,a,u,h)}function mt(a,u){return sr(a,(u!==void 0?u:511)&1023|16384,0)}function ir(a,u,h){typeof h>"u"&&(h=u,u=438),sr(a,u|8192,h)}function yr(a,u){if(!fe(a))throw new ye(44);var h=ct(u,{parent:!0}).node;if(!h)throw new ye(44);u=q(u);var S=Dr(h,u);if(S)throw new ye(S);if(!h.Fa.symlink)throw new ye(63);h.Fa.symlink(h,u,a)}function jr(a){var u=ct(a,{parent:!0}).node;a=q(a);var h=It(u,a),S=Ar(u,a,!0);if(S)throw new ye(S);if(!u.Fa.rmdir)throw new ye(63);if(h.Ua)throw new ye(10);u.Fa.rmdir(u,a),xr(h)}function gr(a){var u=ct(a,{parent:!0}).node;if(!u)throw new ye(44);a=q(a);var h=It(u,a),S=Ar(u,a,!1);if(S)throw new ye(S);if(!u.Fa.unlink)throw new ye(63);if(h.Ua)throw new ye(10);u.Fa.unlink(u,a),xr(h)}function Bt(a){if(a=ct(a).node,!a)throw new ye(44);if(!a.Fa.readlink)throw new ye(28);return fe(nr(a.parent),a.Fa.readlink(a))}function $t(a,u){if(a=ct(a,{Ra:!u}).node,!a)throw new ye(44);if(!a.Fa.Oa)throw new ye(63);return a.Fa.Oa(a)}function Ot(a){return $t(a,!0)}function ar(a,u){if(a=typeof a=="string"?ct(a,{Ra:!0}).node:a,!a.Fa.Na)throw new ye(63);a.Fa.Na(a,{mode:u&4095|a.mode&-4096,timestamp:Date.now()})}function Gt(a,u){if(0>u)throw new ye(28);if(a=typeof a=="string"?ct(a,{Ra:!0}).node:a,!a.Fa.Na)throw new ye(63);if(lt(a.mode))throw new ye(31);if((a.mode&61440)!==32768)throw new ye(28);var h=Ft(a,"w");if(h)throw new ye(h);a.Fa.Na(a,{size:u,timestamp:Date.now()})}function xt(a,u,h){if(a==="")throw new ye(44);if(typeof u=="string"){var S={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[u];if(typeof S>"u")throw Error(`Unknown file open mode: ${u}`);u=S}if(h=u&64?(typeof h>"u"?438:h)&4095|32768:0,typeof a=="object")var R=a;else{a=te(a);try{R=ct(a,{Ra:!(u&131072)}).node}catch{}}if(S=!1,u&64)if(R){if(u&128)throw new ye(20)}else R=sr(a,h,0),S=!0;if(!R)throw new ye(44);if((R.mode&61440)===8192&&(u&=-513),u&65536&&!lt(R.mode))throw new ye(54);if(!S&&(h=R?(R.mode&61440)===40960?32:lt(R.mode)&&(Pr(u)!=="r"||u&512)?31:Ft(R,Pr(u)):44))throw new ye(h);return u&512&&!S&&Gt(R,0),u&=-131713,R=Ir({node:R,path:nr(R),flags:u,seekable:!0,position:0,Ga:R.Ga,Db:[],error:!1}),R.Ga.open&&R.Ga.open(R),!l.logReadFiles||u&1||($||={},a in $||($[a]=1)),R}function vr(a){if(a.fd===null)throw new ye(8);a.gb&&(a.gb=null);try{a.Ga.close&&a.Ga.close(a)}catch(u){throw u}finally{at[a.fd]=null}a.fd=null}function Rr(a,u,h){if(a.fd===null)throw new ye(8);if(!a.seekable||!a.Ga.Sa)throw new ye(70);if(h!=0&&h!=1&&h!=2)throw new ye(28);a.position=a.Ga.Sa(a,u,h),a.Db=[]}function or(a,u,h,S,R){if(0>S||0>R)throw new ye(28);if(a.fd===null)throw new ye(8);if((a.flags&2097155)===1)throw new ye(8);if(lt(a.node.mode))throw new ye(31);if(!a.Ga.read)throw new ye(28);var Y=typeof R<"u";if(!Y)R=a.position;else if(!a.seekable)throw new ye(70);return u=a.Ga.read(a,u,h,S,R),Y||(a.position+=u),u}function Nr(a,u,h,S,R){if(0>S||0>R)throw new ye(28);if(a.fd===null)throw new ye(8);if((a.flags&2097155)===0)throw new ye(8);if(lt(a.node.mode))throw new ye(31);if(!a.Ga.write)throw new ye(28);a.seekable&&a.flags&1024&&Rr(a,0,2);var Y=typeof R<"u";if(!Y)R=a.position;else if(!a.seekable)throw new ye(70);return u=a.Ga.write(a,u,h,S,R,void 0),Y||(a.position+=u),u}function rn(a){var u,h=xt(a,h||0);a=$t(a).size;var S=new Uint8Array(a);return or(h,S,0,a,0),u=S,vr(h),u}var w;function O(a,u,h){a=te("/dev/"+a);var S=At(!!u,!!h);x||=64;var R=x++<<8|0;pr(R,{open(Y){Y.seekable=!1},close(){h?.buffer?.length&&h(10)},read(Y,re,Ie,Ue){for(var Ne=0,Ze=0;Ze<Ue;Ze++){try{var Xe=u()}catch{throw new ye(29)}if(Xe===void 0&&Ne===0)throw new ye(6);if(Xe==null)break;Ne++,re[Ie+Ze]=Xe}return Ne&&(Y.node.timestamp=Date.now()),Ne},write(Y,re,Ie,Ue){for(var Ne=0;Ne<Ue;Ne++)try{h(re[Ie+Ne])}catch{throw new ye(29)}return Ue&&(Y.node.timestamp=Date.now()),Ne}}),ir(a,S,R)}var x,N={},$;function F(a,u,h){if(u.charAt(0)==="/")return u;if(a=a===-100?"/":rt(a).path,u.length==0){if(!h)throw new ye(44);return a}return te(a+"/"+u)}function X(a,u,h){a=a(u),D[h>>2]=a.dev,D[h+4>>2]=a.mode,G[h+8>>2]=a.nlink,D[h+12>>2]=a.uid,D[h+16>>2]=a.gid,D[h+20>>2]=a.rdev,Be=[a.size>>>0,(ge=a.size,1<=+Math.abs(ge)?0<ge?+Math.floor(ge/4294967296)>>>0:~~+Math.ceil((ge-+(~~ge>>>0))/4294967296)>>>0:0)],D[h+24>>2]=Be[0],D[h+28>>2]=Be[1],D[h+32>>2]=4096,D[h+36>>2]=a.blocks,u=a.atime.getTime();var S=a.mtime.getTime(),R=a.ctime.getTime();return Be=[Math.floor(u/1e3)>>>0,(ge=Math.floor(u/1e3),1<=+Math.abs(ge)?0<ge?+Math.floor(ge/4294967296)>>>0:~~+Math.ceil((ge-+(~~ge>>>0))/4294967296)>>>0:0)],D[h+40>>2]=Be[0],D[h+44>>2]=Be[1],G[h+48>>2]=u%1e3*1e3,Be=[Math.floor(S/1e3)>>>0,(ge=Math.floor(S/1e3),1<=+Math.abs(ge)?0<ge?+Math.floor(ge/4294967296)>>>0:~~+Math.ceil((ge-+(~~ge>>>0))/4294967296)>>>0:0)],D[h+56>>2]=Be[0],D[h+60>>2]=Be[1],G[h+64>>2]=S%1e3*1e3,Be=[Math.floor(R/1e3)>>>0,(ge=Math.floor(R/1e3),1<=+Math.abs(ge)?0<ge?+Math.floor(ge/4294967296)>>>0:~~+Math.ceil((ge-+(~~ge>>>0))/4294967296)>>>0:0)],D[h+72>>2]=Be[0],D[h+76>>2]=Be[1],G[h+80>>2]=R%1e3*1e3,Be=[a.ino>>>0,(ge=a.ino,1<=+Math.abs(ge)?0<ge?+Math.floor(ge/4294967296)>>>0:~~+Math.ceil((ge-+(~~ge>>>0))/4294967296)>>>0:0)],D[h+88>>2]=Be[0],D[h+92>>2]=Be[1],0}var ie=void 0;function ce(){var a=D[+ie>>2];return ie+=4,a}var le=(a,u)=>u+2097152>>>0<4194305-!!a?(a>>>0)+4294967296*u:NaN,de=[0,31,60,91,121,152,182,213,244,274,305,335],_e=[0,31,59,90,120,151,181,212,243,273,304,334],Re={},ze=()=>{if(!Me){var a={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:_||"./this.program"},u;for(u in Re)Re[u]===void 0?delete a[u]:a[u]=Re[u];var h=[];for(u in a)h.push(`${u}=${a[u]}`);Me=h}return Me},Me,He=a=>{var u=Le(a)+1,h=Lt(u);return Ae(a,Z,h,u),h},Ke=(a,u,h,S)=>{var R={string:Ne=>{var Ze=0;return Ne!=null&&Ne!==0&&(Ze=He(Ne)),Ze},array:Ne=>{var Ze=Lt(Ne.length);return U.set(Ne,Ze),Ze}};a=l["_"+a];var Y=[],re=0;if(S)for(var Ie=0;Ie<S.length;Ie++){var Ue=R[h[Ie]];Ue?(re===0&&(re=_r()),Y[Ie]=Ue(S[Ie])):Y[Ie]=S[Ie]}return h=a(...Y),h=(function(Ne){return re!==0&&wr(re),u==="string"?Ne?P(Z,Ne):"":u==="boolean"?!!Ne:Ne})(h)},nt=0,kt=(a,u)=>(u=u==1?Lt(a.length):sn(a.length),a.subarray||a.slice||(a=new Uint8Array(a)),Z.set(a,u),u),vt,br=[],ht,Ht=a=>{vt.delete(ht.get(a)),ht.set(a,null),br.push(a)},cr=(a,u)=>{if(!vt){vt=new WeakMap;var h=ht.length;if(vt)for(var S=0;S<0+h;S++){var R=ht.get(S);R&&vt.set(R,S)}}if(h=vt.get(a)||0)return h;if(br.length)h=br.pop();else{try{ht.grow(1)}catch(Ie){throw Ie instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":Ie}h=ht.length-1}try{ht.set(h,a)}catch(Ie){if(!(Ie instanceof TypeError))throw Ie;if(typeof WebAssembly.Function=="function"){S=WebAssembly.Function,R={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"};for(var Y={parameters:[],results:u[0]=="v"?[]:[R[u[0]]]},re=1;re<u.length;++re)Y.parameters.push(R[u[re]]);u=new S(Y,a)}else{for(S=[1],R=u.slice(0,1),u=u.slice(1),Y={i:127,p:127,j:126,f:125,d:124,e:111},S.push(96),re=u.length,128>re?S.push(re):S.push(re%128|128,re>>7),re=0;re<u.length;++re)S.push(Y[u[re]]);R=="v"?S.push(0):S.push(1,Y[R]),u=[0,97,115,109,1,0,0,0,1],R=S.length,128>R?u.push(R):u.push(R%128|128,R>>7),u.push(...S),u.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),u=new WebAssembly.Module(new Uint8Array(u)),u=new WebAssembly.Instance(u,{e:{f:a}}).exports.f}ht.set(h,u)}return vt.set(a,h),h};[44].forEach(a=>{dr[a]=new ye(a),dr[a].stack="<generic error, no stack>"}),ot=Array(4096),Or(De,"/"),mt("/tmp"),mt("/home"),mt("/home/web_user"),(function(){mt("/dev"),pr(259,{read:()=>0,write:(S,R,Y,re)=>re}),ir("/dev/null",259),it(1280,Ve),it(1536,St),ir("/dev/tty",1280),ir("/dev/tty1",1536);var a=new Uint8Array(1024),u=0,h=()=>(u===0&&(u=ve(a).byteLength),a[--u]);O("random",h),O("urandom",h),mt("/dev/shm"),mt("/dev/shm/tmp")})(),(function(){mt("/proc");var a=mt("/proc/self");mt("/proc/self/fd"),Or({Qa(){var u=kr(a,"fd",16895,73);return u.Fa={lookup(h,S){var R=rt(+S);return h={parent:null,Qa:{sb:"fake"},Fa:{readlink:()=>R.path}},h.parent=h}},u}},"/proc/self/fd")})();var nn={a:(a,u,h,S)=>{Ee(`Assertion failed: ${a?P(Z,a):""}, at: `+[u?u?P(Z,u):"":"unknown filename",h,S?S?P(Z,S):"":"unknown function"])},h:function(a,u){try{return a=a?P(Z,a):"",ar(a,u),0}catch(h){if(typeof N>"u"||h.name!=="ErrnoError")throw h;return-h.Ja}},H:function(a,u,h){try{if(u=u?P(Z,u):"",u=F(a,u),h&-8)return-28;var S=ct(u,{Ra:!0}).node;return S?(a="",h&4&&(a+="r"),h&2&&(a+="w"),h&1&&(a+="x"),a&&Ft(S,a)?-2:0):-44}catch(R){if(typeof N>"u"||R.name!=="ErrnoError")throw R;return-R.Ja}},i:function(a,u){try{var h=rt(a);return ar(h.node,u),0}catch(S){if(typeof N>"u"||S.name!=="ErrnoError")throw S;return-S.Ja}},g:function(a){try{var u=rt(a).node,h=typeof u=="string"?ct(u,{Ra:!0}).node:u;if(!h.Fa.Na)throw new ye(63);return h.Fa.Na(h,{timestamp:Date.now()}),0}catch(S){if(typeof N>"u"||S.name!=="ErrnoError")throw S;return-S.Ja}},b:function(a,u,h){ie=h;try{var S=rt(a);switch(u){case 0:var R=ce();if(0>R)break;for(;at[R];)R++;return en(S,R).fd;case 1:case 2:return 0;case 3:return S.flags;case 4:return R=ce(),S.flags|=R,0;case 12:return R=ce(),we[R+0>>1]=2,0;case 13:case 14:return 0}return-28}catch(Y){if(typeof N>"u"||Y.name!=="ErrnoError")throw Y;return-Y.Ja}},f:function(a,u){try{var h=rt(a);return X($t,h.path,u)}catch(S){if(typeof N>"u"||S.name!=="ErrnoError")throw S;return-S.Ja}},n:function(a,u,h){u=le(u,h);try{if(isNaN(u))return 61;var S=rt(a);if((S.flags&2097155)===0)throw new ye(28);return Gt(S.node,u),0}catch(R){if(typeof N>"u"||R.name!=="ErrnoError")throw R;return-R.Ja}},C:function(a,u){try{if(u===0)return-28;var h=Le("/")+1;return u<h?-68:(Ae("/",Z,a,u),h)}catch(S){if(typeof N>"u"||S.name!=="ErrnoError")throw S;return-S.Ja}},F:function(a,u){try{return a=a?P(Z,a):"",X(Ot,a,u)}catch(h){if(typeof N>"u"||h.name!=="ErrnoError")throw h;return-h.Ja}},z:function(a,u,h){try{return u=u?P(Z,u):"",u=F(a,u),u=te(u),u[u.length-1]==="/"&&(u=u.substr(0,u.length-1)),mt(u,h),0}catch(S){if(typeof N>"u"||S.name!=="ErrnoError")throw S;return-S.Ja}},E:function(a,u,h,S){try{u=u?P(Z,u):"";var R=S&256;return u=F(a,u,S&4096),X(R?Ot:$t,u,h)}catch(Y){if(typeof N>"u"||Y.name!=="ErrnoError")throw Y;return-Y.Ja}},x:function(a,u,h,S){ie=S;try{u=u?P(Z,u):"",u=F(a,u);var R=S?ce():0;return xt(u,h,R).fd}catch(Y){if(typeof N>"u"||Y.name!=="ErrnoError")throw Y;return-Y.Ja}},v:function(a,u,h,S){try{if(u=u?P(Z,u):"",u=F(a,u),0>=S)return-28;var R=Bt(u),Y=Math.min(S,Le(R)),re=U[h+Y];return Ae(R,Z,h,S+1),U[h+Y]=re,Y}catch(Ie){if(typeof N>"u"||Ie.name!=="ErrnoError")throw Ie;return-Ie.Ja}},u:function(a){try{return a=a?P(Z,a):"",jr(a),0}catch(u){if(typeof N>"u"||u.name!=="ErrnoError")throw u;return-u.Ja}},G:function(a,u){try{return a=a?P(Z,a):"",X($t,a,u)}catch(h){if(typeof N>"u"||h.name!=="ErrnoError")throw h;return-h.Ja}},r:function(a,u,h){try{return u=u?P(Z,u):"",u=F(a,u),h===0?gr(u):h===512?jr(u):Ee("Invalid flags passed to unlinkat"),0}catch(S){if(typeof N>"u"||S.name!=="ErrnoError")throw S;return-S.Ja}},q:function(a,u,h){try{if(u=u?P(Z,u):"",u=F(a,u,!0),h){var S=G[h>>2]+4294967296*D[h+4>>2],R=D[h+8>>2];Y=1e3*S+R/1e6,h+=16,S=G[h>>2]+4294967296*D[h+4>>2],R=D[h+8>>2],re=1e3*S+R/1e6}else var Y=Date.now(),re=Y;a=Y;var Ie=ct(u,{Ra:!0}).node;return Ie.Fa.Na(Ie,{timestamp:Math.max(a,re)}),0}catch(Ue){if(typeof N>"u"||Ue.name!=="ErrnoError")throw Ue;return-Ue.Ja}},l:function(a,u,h){a=new Date(1e3*le(a,u)),D[h>>2]=a.getSeconds(),D[h+4>>2]=a.getMinutes(),D[h+8>>2]=a.getHours(),D[h+12>>2]=a.getDate(),D[h+16>>2]=a.getMonth(),D[h+20>>2]=a.getFullYear()-1900,D[h+24>>2]=a.getDay(),u=a.getFullYear(),D[h+28>>2]=(u%4!==0||u%100===0&&u%400!==0?_e:de)[a.getMonth()]+a.getDate()-1|0,D[h+36>>2]=-(60*a.getTimezoneOffset()),u=new Date(a.getFullYear(),6,1).getTimezoneOffset();var S=new Date(a.getFullYear(),0,1).getTimezoneOffset();D[h+32>>2]=(u!=S&&a.getTimezoneOffset()==Math.min(S,u))|0},j:function(a,u,h,S,R,Y,re,Ie){R=le(R,Y);try{if(isNaN(R))return 61;var Ue=rt(S);if((u&2)!==0&&(h&2)===0&&(Ue.flags&2097155)!==2)throw new ye(2);if((Ue.flags&2097155)===1)throw new ye(2);if(!Ue.Ga.ab)throw new ye(43);var Ne=Ue.Ga.ab(Ue,a,R,u,h),Ze=Ne.Cb;return D[re>>2]=Ne.tb,G[Ie>>2]=Ze,0}catch(Xe){if(typeof N>"u"||Xe.name!=="ErrnoError")throw Xe;return-Xe.Ja}},k:function(a,u,h,S,R,Y,re){Y=le(Y,re);try{var Ie=rt(R);if(h&2){if((Ie.node.mode&61440)!==32768)throw new ye(43);if(!(S&2)){var Ue=Z.slice(a,a+u);Ie.Ga.bb&&Ie.Ga.bb(Ie,Ue,Y,u,S)}}}catch(Ne){if(typeof N>"u"||Ne.name!=="ErrnoError")throw Ne;return-Ne.Ja}},y:(a,u,h,S)=>{var R=new Date().getFullYear(),Y=new Date(R,0,1).getTimezoneOffset();R=new Date(R,6,1).getTimezoneOffset(),G[a>>2]=60*Math.max(Y,R),D[u>>2]=+(Y!=R),u=re=>{var Ie=Math.abs(re);return`UTC${0<=re?"-":"+"}${String(Math.floor(Ie/60)).padStart(2,"0")}${String(Ie%60).padStart(2,"0")}`},a=u(Y),u=u(R),R<Y?(Ae(a,Z,h,17),Ae(u,Z,S,17)):(Ae(a,Z,S,17),Ae(u,Z,h,17))},d:()=>Date.now(),s:()=>2147483648,c:()=>performance.now(),o:a=>{var u=Z.length;if(a>>>=0,2147483648<a)return!1;for(var h=1;4>=h;h*=2){var S=u*(1+.2/h);S=Math.min(S,a+100663296);var R=Math;S=Math.max(a,S);e:{R=(R.min.call(R,2147483648,S+(65536-S%65536)%65536)-z.buffer.byteLength+65535)/65536;try{z.grow(R),ke();var Y=1;break e}catch{}Y=void 0}if(Y)return!0}return!1},A:(a,u)=>{var h=0;return ze().forEach((S,R)=>{var Y=u+h;for(R=G[a+4*R>>2]=Y,Y=0;Y<S.length;++Y)U[R++]=S.charCodeAt(Y);U[R]=0,h+=S.length+1}),0},B:(a,u)=>{var h=ze();G[a>>2]=h.length;var S=0;return h.forEach(R=>S+=R.length+1),G[u>>2]=S,0},e:function(a){try{var u=rt(a);return vr(u),0}catch(h){if(typeof N>"u"||h.name!=="ErrnoError")throw h;return h.Ja}},p:function(a,u){try{var h=rt(a);return U[u]=h.tty?2:lt(h.mode)?3:(h.mode&61440)===40960?7:4,we[u+2>>1]=0,Be=[0,(ge=0,1<=+Math.abs(ge)?0<ge?+Math.floor(ge/4294967296)>>>0:~~+Math.ceil((ge-+(~~ge>>>0))/4294967296)>>>0:0)],D[u+8>>2]=Be[0],D[u+12>>2]=Be[1],Be=[0,(ge=0,1<=+Math.abs(ge)?0<ge?+Math.floor(ge/4294967296)>>>0:~~+Math.ceil((ge-+(~~ge>>>0))/4294967296)>>>0:0)],D[u+16>>2]=Be[0],D[u+20>>2]=Be[1],0}catch(S){if(typeof N>"u"||S.name!=="ErrnoError")throw S;return S.Ja}},w:function(a,u,h,S){try{e:{var R=rt(a);a=u;for(var Y,re=u=0;re<h;re++){var Ie=G[a>>2],Ue=G[a+4>>2];a+=8;var Ne=or(R,U,Ie,Ue,Y);if(0>Ne){var Ze=-1;break e}if(u+=Ne,Ne<Ue)break;typeof Y<"u"&&(Y+=Ne)}Ze=u}return G[S>>2]=Ze,0}catch(Xe){if(typeof N>"u"||Xe.name!=="ErrnoError")throw Xe;return Xe.Ja}},m:function(a,u,h,S,R){u=le(u,h);try{if(isNaN(u))return 61;var Y=rt(a);return Rr(Y,u,S),Be=[Y.position>>>0,(ge=Y.position,1<=+Math.abs(ge)?0<ge?+Math.floor(ge/4294967296)>>>0:~~+Math.ceil((ge-+(~~ge>>>0))/4294967296)>>>0:0)],D[R>>2]=Be[0],D[R+4>>2]=Be[1],Y.gb&&u===0&&S===0&&(Y.gb=null),0}catch(re){if(typeof N>"u"||re.name!=="ErrnoError")throw re;return re.Ja}},D:function(a){try{var u=rt(a);return u.Ga?.fsync?u.Ga.fsync(u):0}catch(h){if(typeof N>"u"||h.name!=="ErrnoError")throw h;return h.Ja}},t:function(a,u,h,S){try{e:{var R=rt(a);a=u;for(var Y,re=u=0;re<h;re++){var Ie=G[a>>2],Ue=G[a+4>>2];a+=8;var Ne=Nr(R,U,Ie,Ue,Y);if(0>Ne){var Ze=-1;break e}u+=Ne,typeof Y<"u"&&(Y+=Ne)}Ze=u}return G[S>>2]=Ze,0}catch(Xe){if(typeof N>"u"||Xe.name!=="ErrnoError")throw Xe;return Xe.Ja}}},xe=(function(){function a(h){return xe=h.exports,z=xe.I,ke(),ht=xe.K,je.unshift(xe.J),W--,l.monitorRunDependencies?.(W),W==0&&V&&(h=V,V=null,h()),xe}var u={a:nn};if(W++,l.monitorRunDependencies?.(W),l.instantiateWasm)try{return l.instantiateWasm(u,a)}catch(h){return I(`Module.instantiateWasm callback failed with error: ${h}`),!1}return We||=be("sql-wasm.wasm")?"sql-wasm.wasm":l.locateFile?l.locateFile("sql-wasm.wasm",b):b+"sql-wasm.wasm",Ye(u,function(h){a(h.instance)}),{}})();l._sqlite3_free=a=>(l._sqlite3_free=xe.L)(a),l._sqlite3_value_text=a=>(l._sqlite3_value_text=xe.M)(a),l._sqlite3_prepare_v2=(a,u,h,S,R)=>(l._sqlite3_prepare_v2=xe.N)(a,u,h,S,R),l._sqlite3_step=a=>(l._sqlite3_step=xe.O)(a),l._sqlite3_reset=a=>(l._sqlite3_reset=xe.P)(a),l._sqlite3_exec=(a,u,h,S,R)=>(l._sqlite3_exec=xe.Q)(a,u,h,S,R),l._sqlite3_finalize=a=>(l._sqlite3_finalize=xe.R)(a),l._sqlite3_column_name=(a,u)=>(l._sqlite3_column_name=xe.S)(a,u),l._sqlite3_column_text=(a,u)=>(l._sqlite3_column_text=xe.T)(a,u),l._sqlite3_column_type=(a,u)=>(l._sqlite3_column_type=xe.U)(a,u),l._sqlite3_errmsg=a=>(l._sqlite3_errmsg=xe.V)(a),l._sqlite3_clear_bindings=a=>(l._sqlite3_clear_bindings=xe.W)(a),l._sqlite3_value_blob=a=>(l._sqlite3_value_blob=xe.X)(a),l._sqlite3_value_bytes=a=>(l._sqlite3_value_bytes=xe.Y)(a),l._sqlite3_value_double=a=>(l._sqlite3_value_double=xe.Z)(a),l._sqlite3_value_int=a=>(l._sqlite3_value_int=xe._)(a),l._sqlite3_value_type=a=>(l._sqlite3_value_type=xe.$)(a),l._sqlite3_result_blob=(a,u,h,S)=>(l._sqlite3_result_blob=xe.aa)(a,u,h,S),l._sqlite3_result_double=(a,u)=>(l._sqlite3_result_double=xe.ba)(a,u),l._sqlite3_result_error=(a,u,h)=>(l._sqlite3_result_error=xe.ca)(a,u,h),l._sqlite3_result_int=(a,u)=>(l._sqlite3_result_int=xe.da)(a,u),l._sqlite3_result_int64=(a,u,h)=>(l._sqlite3_result_int64=xe.ea)(a,u,h),l._sqlite3_result_null=a=>(l._sqlite3_result_null=xe.fa)(a),l._sqlite3_result_text=(a,u,h,S)=>(l._sqlite3_result_text=xe.ga)(a,u,h,S),l._sqlite3_aggregate_context=(a,u)=>(l._sqlite3_aggregate_context=xe.ha)(a,u),l._sqlite3_column_count=a=>(l._sqlite3_column_count=xe.ia)(a),l._sqlite3_data_count=a=>(l._sqlite3_data_count=xe.ja)(a),l._sqlite3_column_blob=(a,u)=>(l._sqlite3_column_blob=xe.ka)(a,u),l._sqlite3_column_bytes=(a,u)=>(l._sqlite3_column_bytes=xe.la)(a,u),l._sqlite3_column_double=(a,u)=>(l._sqlite3_column_double=xe.ma)(a,u),l._sqlite3_bind_blob=(a,u,h,S,R)=>(l._sqlite3_bind_blob=xe.na)(a,u,h,S,R),l._sqlite3_bind_double=(a,u,h)=>(l._sqlite3_bind_double=xe.oa)(a,u,h),l._sqlite3_bind_int=(a,u,h)=>(l._sqlite3_bind_int=xe.pa)(a,u,h),l._sqlite3_bind_text=(a,u,h,S,R)=>(l._sqlite3_bind_text=xe.qa)(a,u,h,S,R),l._sqlite3_bind_parameter_index=(a,u)=>(l._sqlite3_bind_parameter_index=xe.ra)(a,u),l._sqlite3_sql=a=>(l._sqlite3_sql=xe.sa)(a),l._sqlite3_normalized_sql=a=>(l._sqlite3_normalized_sql=xe.ta)(a),l._sqlite3_changes=a=>(l._sqlite3_changes=xe.ua)(a),l._sqlite3_close_v2=a=>(l._sqlite3_close_v2=xe.va)(a),l._sqlite3_create_function_v2=(a,u,h,S,R,Y,re,Ie,Ue)=>(l._sqlite3_create_function_v2=xe.wa)(a,u,h,S,R,Y,re,Ie,Ue),l._sqlite3_open=(a,u)=>(l._sqlite3_open=xe.xa)(a,u);var sn=l._malloc=a=>(sn=l._malloc=xe.ya)(a),Cr=l._free=a=>(Cr=l._free=xe.za)(a);l._RegisterExtensionFunctions=a=>(l._RegisterExtensionFunctions=xe.Aa)(a);var wn=(a,u)=>(wn=xe.Ba)(a,u),wr=a=>(wr=xe.Ca)(a),Lt=a=>(Lt=xe.Da)(a),_r=()=>(_r=xe.Ea)();l.stackSave=()=>_r(),l.stackRestore=a=>wr(a),l.stackAlloc=a=>Lt(a),l.cwrap=(a,u,h,S)=>{var R=!h||h.every(Y=>Y==="number"||Y==="boolean");return u!=="string"&&R&&!S?l["_"+a]:(...Y)=>Ke(a,u,h,Y)},l.addFunction=cr,l.removeFunction=Ht,l.UTF8ToString=k,l.ALLOC_NORMAL=nt,l.allocate=kt,l.allocateUTF8OnStack=He;var Fr;V=function a(){Fr||_n(),Fr||(V=a)};function _n(){function a(){if(!Fr&&(Fr=!0,l.calledRun=!0,!Q)){if(l.noFSInit||w||(w=!0,l.stdin=l.stdin,l.stdout=l.stdout,l.stderr=l.stderr,l.stdin?O("stdin",l.stdin):yr("/dev/tty","/dev/stdin"),l.stdout?O("stdout",null,l.stdout):yr("/dev/tty","/dev/stdout"),l.stderr?O("stderr",null,l.stderr):yr("/dev/tty1","/dev/stderr"),xt("/dev/stdin",0),xt("/dev/stdout",1),xt("/dev/stderr",1)),Tt=!1,tt(je),l.onRuntimeInitialized?.(),l.postRun)for(typeof l.postRun=="function"&&(l.postRun=[l.postRun]);l.postRun.length;){var u=l.postRun.shift();ue.unshift(u)}tt(ue)}}if(!(0<W)){if(l.preRun)for(typeof l.preRun=="function"&&(l.preRun=[l.preRun]);l.preRun.length;)Pe();tt(ae),0<W||(l.setStatus?(l.setStatus("Running..."),setTimeout(function(){setTimeout(function(){l.setStatus("")},1),a()},1)):a())}}if(l.preInit)for(typeof l.preInit=="function"&&(l.preInit=[l.preInit]);0<l.preInit.length;)l.preInit.pop()();return _n(),o}),t)};c.exports=r,c.exports.default=r})(Cs);var La=Cs.exports,qe=class c{static getDBFromStore(e,t){return j(this,null,function*(){try{let r=yield t.getItem(e);return Promise.resolve(r)}catch(r){return Promise.reject(`GetDBFromStore: ${r.message}`)}})}static setInitialDBToStore(e,t){return j(this,null,function*(){try{return yield t.setItem(e,null),Promise.resolve()}catch(r){return Promise.reject(`SetInitialDBToStore: ${r.message}`)}})}static setDBToStore(e,t,r){return j(this,null,function*(){try{let n=e.export();return yield c.saveDBToStore(t,n,r),Promise.resolve()}catch(n){return Promise.reject(`SetDBToStore: ${n.message}`)}})}static saveDBToStore(e,t,r){return j(this,null,function*(){try{return yield r.removeItem(e),yield r.setItem(e,t),Promise.resolve()}catch(n){return Promise.reject(`SaveDBToStore: ${n.message}`)}})}static removeDBFromStore(e,t){return j(this,null,function*(){try{return yield t.removeItem(e),Promise.resolve()}catch(r){return Promise.reject(`RemoveDBFromStore: ${r.message}`)}})}static isDBInStore(e,t){return j(this,null,function*(){try{let r=yield t.getItem(e);return r!=null&&r.length>0?Promise.resolve(!0):Promise.resolve(!1)}catch(r){return Promise.reject(`IsDBInStore: ${r}`)}})}static restoreDBFromStore(e,t,r){return j(this,null,function*(){let n=`${t}-${e}`;try{if(yield c.isDBInStore(n,r))if(yield c.isDBInStore(e,r)){let o=yield c.getDBFromStore(n,r);return yield c.saveDBToStore(e,o,r),yield c.removeDBFromStore(n,r),Promise.resolve()}else return Promise.reject(new Error(`RestoreDBFromStore: ${e} does not exist`));else return Promise.reject(new Error(`RestoreDBFromStore: ${n} does not exist`))}catch(s){return Promise.reject(`RestoreDBFromStore: ${s.message}`)}})}static copyDBToStore(e,t,r){return j(this,null,function*(){try{if(yield c.isDBInStore(e,r)){let s=yield c.getDBFromStore(e,r);return yield c.saveDBToStore(t,s,r),Promise.resolve()}else return Promise.reject(new Error(`CopyDBToStore: ${e} does not exist`))}catch(n){return Promise.reject(`CopyDBToStore: ${n.message}`)}})}static getDBListFromStore(e){return j(this,null,function*(){try{let t=yield e.keys();return Promise.resolve(t)}catch(t){return Promise.reject(`GetDBListFromStore: ${t.message}`)}})}},qt=class c{static getTablesNames(e){return j(this,null,function*(){let t="SELECT name FROM sqlite_master WHERE ";t+="type='table' AND name NOT LIKE 'sync_table' ",t+="AND name NOT LIKE '_temp_%' ",t+="AND name NOT LIKE 'sqlite_%' ",t+="ORDER BY rootpage DESC;";let r=[];try{let n=yield me.queryAll(e,t,[]);for(let s of n)r.push(s.name);return Promise.resolve(r)}catch(n){return Promise.reject(new Error(`GetTablesNames: ${n.message}`))}})}static getViewsNames(e){return j(this,null,function*(){let t="SELECT name FROM sqlite_master WHERE ";t+="type='view' AND name NOT LIKE 'sqlite_%' ",t+="ORDER BY rootpage DESC;";let r=[];try{let n=yield me.queryAll(e,t,[]);for(let s of n)r.push(s.name);return Promise.resolve(r)}catch(n){return Promise.reject(new Error(`getViewsNames: ${n.message}`))}})}static dropElements(e,t){return j(this,null,function*(){let r="",n="AND name NOT LIKE ('sqlite_%')";switch(t){case"index":r="DropIndexes";break;case"trigger":r="DropTriggers";break;case"table":r="DropTables",n+=" AND name NOT IN ('sync_table')";break;case"view":r="DropViews";break;default:return Promise.reject(new Error(`DropElements: ${t} not found`))}let s="SELECT name FROM sqlite_master WHERE ";s+=`type = '${t}' ${n};`;try{let i=yield me.queryAll(e,s,[]);if(i.length>0){let o=t.toUpperCase(),f=[];for(let l of i){let p=`DROP ${o} IF EXISTS `;p+=`${l.name};`,f.push(p)}for(let l of f)if((yield me.run(e,l,[],!1,"no"))<0)return Promise.reject(new Error(`DropElements: ${r}: lastId < 0`))}return Promise.resolve()}catch(i){return Promise.reject(new Error(`DropElements: ${r}: ${i.message}`))}})}static dropAll(e){return j(this,null,function*(){try{return yield c.dropElements(e,"table"),yield c.dropElements(e,"index"),yield c.dropElements(e,"trigger"),yield c.dropElements(e,"view"),yield me.run(e,"VACUUM;",[],!1,"no"),Promise.resolve()}catch(t){return Promise.reject(new Error(`DropAll: ${t.message}`))}})}static dropTempTables(e,t){return j(this,null,function*(){let r=Object.keys(t),n=[];for(let s of r){let i="DROP TABLE IF EXISTS ";i+=`_temp_${s};`,n.push(i)}try{return(yield me.execute(e,n.join(`
`),!1))<0?Promise.reject(new Error("DropTempTables: changes < 0")):Promise.resolve()}catch(s){return Promise.reject(new Error(`DropTempTables: ${s.message}`))}})}},st=class c{static isJsonSQLite(e){return j(this,null,function*(){let t=["database","version","overwrite","encrypted","mode","tables","views"];if(e==null||Object.keys(e).length===0&&e.constructor===Object)return!1;for(let r of Object.keys(e)){if(t.indexOf(r)===-1||r==="database"&&typeof e[r]!="string"||r==="version"&&typeof e[r]!="number"||r==="overwrite"&&typeof e[r]!="boolean"||r==="encrypted"&&typeof e[r]!="boolean"||r==="mode"&&typeof e[r]!="string"||r==="tables"&&typeof e[r]!="object")return!1;if(r==="tables"){for(let n of e[r])if(!(yield c.isTable(n)))return!1}if(r==="views"&&typeof e[r]!="object")return!1;if(r==="views"){for(let n of e[r])if(!(yield c.isView(n)))return!1}}return!0})}static isTable(e){return j(this,null,function*(){let t=["name","schema","indexes","triggers","values"],r=0;if(e==null||Object.keys(e).length===0&&e.constructor===Object)return!1;for(let n of Object.keys(e)){if(t.indexOf(n)===-1||n==="name"&&typeof e[n]!="string"||n==="schema"&&typeof e[n]!="object"||n==="indexes"&&typeof e[n]!="object"||n==="triggers"&&typeof e[n]!="object"||n==="values"&&typeof e[n]!="object")return!1;if(n==="schema"){e.schema.forEach(s=>{s.column&&r++});for(let s=0;s<r;s++)if(!(yield c.isSchema(e[n][s])))return!1}if(n==="indexes"){for(let s of e[n])if(!(yield c.isIndexes(s)))return!1}if(n==="triggers"){for(let s of e[n])if(!(yield c.isTriggers(s)))return!1}if(n==="values"&&r>0){for(let s of e[n])if(typeof s!="object"||s.length!=r)return!1}}return!0})}static isSchema(e){return j(this,null,function*(){let t=["column","value","foreignkey","primarykey","constraint"];if(e==null||Object.keys(e).length===0&&e.constructor===Object)return!1;for(let r of Object.keys(e))if(t.indexOf(r)===-1||r==="column"&&typeof e[r]!="string"||r==="value"&&typeof e[r]!="string"||r==="foreignkey"&&typeof e[r]!="string"||r==="primarykey"&&typeof e[r]!="string"||r==="constraint"&&typeof e[r]!="string")return!1;return!0})}static isIndexes(e){return j(this,null,function*(){let t=["name","value","mode"];if(e==null||Object.keys(e).length===0&&e.constructor===Object)return!1;for(let r of Object.keys(e))if(t.indexOf(r)===-1||r==="name"&&typeof e[r]!="string"||r==="value"&&typeof e[r]!="string"||r==="mode"&&(typeof e[r]!="string"||e[r].toUpperCase()!="UNIQUE"))return!1;return!0})}static isTriggers(e){return j(this,null,function*(){let t=["name","timeevent","condition","logic"];if(e==null||Object.keys(e).length===0&&e.constructor===Object)return!1;for(let r of Object.keys(e))if(t.indexOf(r)===-1||r==="name"&&typeof e[r]!="string"||r==="timeevent"&&typeof e[r]!="string"||r==="condition"&&typeof e[r]!="string"||r==="logic"&&typeof e[r]!="string")return!1;return!0})}static isView(e){return j(this,null,function*(){let t=["name","value"];if(e==null||Object.keys(e).length===0&&e.constructor===Object)return!1;for(let r of Object.keys(e))if(t.indexOf(r)===-1||r==="name"&&typeof e[r]!="string"||r==="value"&&typeof e[r]!="string")return!1;return!0})}static checkSchemaValidity(e){return j(this,null,function*(){for(let t=0;t<e.length;t++){let r={},n=Object.keys(e[t]);if(n.includes("column")&&(r.column=e[t].column),n.includes("value")&&(r.value=e[t].value),n.includes("foreignkey")&&(r.foreignkey=e[t].foreignkey),n.includes("constraint")&&(r.constraint=e[t].constraint),!(yield c.isSchema(r)))return Promise.reject(new Error(`CheckSchemaValidity: schema[${t}] not valid`))}return Promise.resolve()})}static checkIndexesValidity(e){return j(this,null,function*(){for(let t=0;t<e.length;t++){let r={},n=Object.keys(e[t]);if(n.includes("value")&&(r.value=e[t].value),n.includes("name")&&(r.name=e[t].name),n.includes("mode")&&(r.mode=e[t].mode),!(yield c.isIndexes(r)))return Promise.reject(new Error(`CheckIndexesValidity: indexes[${t}] not valid`))}return Promise.resolve()})}static checkTriggersValidity(e){return j(this,null,function*(){for(let t=0;t<e.length;t++){let r={},n=Object.keys(e[t]);if(n.includes("logic")&&(r.logic=e[t].logic),n.includes("name")&&(r.name=e[t].name),n.includes("timeevent")&&(r.timeevent=e[t].timeevent),n.includes("condition")&&(r.condition=e[t].condition),!(yield c.isTriggers(r)))return Promise.reject(new Error(`CheckTriggersValidity: triggers[${t}] not valid`))}return Promise.resolve()})}static checkViewsValidity(e){return j(this,null,function*(){for(let t=0;t<e.length;t++){let r={},n=Object.keys(e[t]);if(n.includes("value")&&(r.value=e[t].value),n.includes("name")&&(r.name=e[t].name),!(yield c.isView(r)))return Promise.reject(new Error(`CheckViewsValidity: views[${t}] not valid`))}return Promise.resolve()})}static getTableColumnNamesTypes(e,t){return j(this,null,function*(){let r=[],n=[],s=[],i=`PRAGMA table_info('${t}');`;try{if(r=yield me.queryAll(e,i,[]),r.length>0)for(let o of r)n.push(o.name),s.push(o.type);return Promise.resolve({names:n,types:s})}catch(o){return Promise.reject(new Error(`GetTableColumnNamesTypes: ${o.message}`))}})}static getValues(e,t,r){return j(this,null,function*(){let n=[];try{let s=yield c.getTableColumnNamesTypes(e,r),i=[];if(Object.keys(s).includes("names"))i=s.names;else return Promise.reject(new Error(`GetValues: Table ${r} no names`));let o=yield me.queryAll(e,t,[]);for(let f of o){let l=[];for(let p of i)Object.keys(f).includes(p)?l.push(f[p]):l.push(null);n.push(l)}return Promise.resolve(n)}catch(s){return Promise.reject(new Error(`GetValues: ${s.message}`))}})}},Xt=(()=>{class c{static extractTableName(t){let r=/(?:INSERT\s+INTO|UPDATE|DELETE\s+FROM)\s+([^\s]+)/i,n=t.match(r);return n&&n[1]?n[1]:null}static extractWhereClause(t){let r=/WHERE(.+?)(?:ORDER\s+BY|LIMIT|$)/i,n=t.match(r);return n&&n[1]?n[1].trim():null}static addPrefixToWhereClause(t,r,n,s){let i;return t.includes("AND")?i=t.split("AND").map(l=>l.trim()):i=[t],i.map(f=>{let l=f.match(/(\w+)\s*(=|<|<=|<>|>|>=|IN|BETWEEN|LIKE)\s*(.+)/);if(!l)return f;let p=l[1].trim(),m=l[2].trim(),v=l[3].trim(),y=p,_=c.findIndexOfStringInArray(p,n);return _!==-1&&(y=c.getStringAtIndex(r,_)),`${`${s}${y}`} ${m} ${v}`}).join(" AND ")}static findIndexOfStringInArray(t,r){return r.indexOf(t)}static getStringAtIndex(t,r){if(r>=0&&r<t.length)return t[r]}static extractForeignKeyInfo(t){let r=/\bFOREIGN\s+KEY\s*\(([^)]+)\)\s+REFERENCES\s+(\w+)\s*\(([^)]+)\)\s+(ON\s+DELETE\s+(RESTRICT|CASCADE|SET\s+NULL|SET\s+DEFAULT|NO\s+ACTION))?/,n=t.match(r);if(n)return{forKeys:n[1].split(",").map(i=>i.trim()),tableName:n[2],refKeys:n[3].split(",").map(i=>i.trim()),action:n[5]?n[5]:"NO ACTION"};throw new Error("extractForeignKeyInfo: No FOREIGN KEY found")}static extractColumnNames(t){let r=new Set(["AND","OR","IN","VALUES","LIKE","BETWEEN","NOT"]),n=/\b[a-zA-Z]\w*\b(?=\s*(?:<=?|>=?|<>?|=|AND|OR|BETWEEN|NOT|IN|LIKE))|\b[a-zA-Z]\w*\b\s+BETWEEN\s+'[^']+'\s+AND\s+'[^']+'|\(([^)]+)\)\s+IN\s+\(?\s*VALUES\s*\(/g,s,i=[];for(;(s=n.exec(t))!==null;){let o=s[1];if(o){let f=o.split(",");for(let l of f)i.push(l.trim())}else{let f=s[0];r.has(f.trim().toUpperCase())||i.push(f.trim())}}return i}static flattenMultilineString(t){return t.split(/\r?\n/).join(" ")}static getStmtAndRetColNames(t,r){let n="RETURNING",s={stmt:t,names:""},i=t.toUpperCase().indexOf(n);if(i!==-1){let o=t.substring(0,i);if(s.stmt=`${o};`,r.substring(0,2)==="wA"){let l=t.substring(i+n.length).trim();l.endsWith(";")?s.names=l.substring(0,l.length-1):s.names=l}}return s}static extractCombinedPrimaryKey(t){let r=/WHERE\s*\((.+?)\)\s*(?:=|IN)\s*\((.+?)\)/g,n=new RegExp(r),s=t.matchAll(n),i=[];for(let o of s){let l=o[1].trim().split(",").map(p=>p.trim());i.push(l)}return i.length===0?null:i}static getWhereStmtForCombinedPK(t,r,n,s){let i=t;for(let o of s){let f=o.join(",")===r.join(",")?n:r;for(let[l,p]of o.entries())i=c.replaceAllString(i,p,f[l])}return i}static replaceAllString(t,r,n){return t.split(r).join(n)}static indicesOf(t,r,n=0){let s=[],i=t.indexOf(r,n);for(;i!==-1;)s.push(i),i=t.indexOf(r,i+1);return s}static getWhereStmtForNonCombinedPK(t,r,n){let s="",i=t.substring(6);for(let o=0;o<r.length;o++){let f="withRefsNames",l=c.indicesOf(i,r[o]);if(l.length===0&&(l=c.indicesOf(i,n[o]),f="colNames"),l.length>0){let p="",m=c.indicesOf(i,"=",l[0]);if(m.length>0){let v=c.indicesOf(i,"AND",m[0]);v.length>0?(p=i.substring(m[0]+1,v[0]-1),i=i.substring(v[0]+3)):p=i.substring(m[0]+1),o>0&&(s+=" AND "),f==="withRefsNames"?s+=n[o]+" = "+p:s+=r[o]+" = "+p}}}return s="WHERE "+s,s}static updateWhere(t,r,n){let s="";if(t.length<=0||t.toUpperCase().substring(0,5)!=="WHERE")return s;if(r.length===n.length){let i=c.extractCombinedPrimaryKey(t);i?s=c.getWhereStmtForCombinedPK(t,r,n,i):s=c.getWhereStmtForNonCombinedPK(t,r,n)}return s}}return c.replaceString=(e,t,r)=>{let n=e.indexOf(t);return n!==-1?e.substring(0,n)+r+e.substring(n+t.length):e},c})(),ut=class c{static findReferencesAndUpdate(e){return new c(e)}static getRefs(e){return new c(e)}static getReferences(e){return new c(e)}static searchForRelatedItems(e){return new c(e)}static upDateWhereForDefault(e){return new c(e)}static upDateWhereForRestrict(e){return new c(e)}static upDateWhereForCascade(e){return new c(e)}static executeUpdateForDelete(e){return new c(e)}constructor(e){this.message=e}},fn=class c{static findReferencesAndUpdate(e,t,r,n,s){return j(this,null,function*(){try{let i=!0,o=yield c.getReferences(e,t),f=o.retRefs,l=o.tableWithRefs;if(f.length<=0||t===l)return i;for(let p of f){let m=Xt.extractForeignKeyInfo(p),v=m.tableName;if(v===""||v!==t)continue;let y=m.forKeys,_=m.refKeys;if(_.length!==y.length)throw ut.findReferencesAndUpdate("findReferencesAndUpdate: mismatch length");let b=m.action;if(b==="NO_ACTION")continue;let T=l,E=y,A={uWhereStmt:"",setStmt:""};if(c.checkValuesMatch(y,n))throw ut.findReferencesAndUpdate("Not implemented. Please transfer your example to the maintener");{let C=yield c.searchForRelatedItems(e,T,t,r,y,_,s);if(C.relatedItems.length===0&&C.key.length<=0)continue;if(T!==t)switch(b){case"RESTRICT":A=yield c.upDateWhereForRestrict(C);break;case"CASCADE":A=yield c.upDateWhereForCascade(C);break;default:A=yield c.upDateWhereForDefault(y,C);break}}A.setStmt.length>0&&A.uWhereStmt.length>0&&c.executeUpdateForDelete(e,T,A.uWhereStmt,A.setStmt,E,s)}return i}catch(i){let o=i.message?i.message:i;throw i instanceof ut?ut.findReferencesAndUpdate(o):i}})}static getReferences(e,t){return j(this,null,function*(){let r="SELECT sql FROM sqlite_master WHERE sql LIKE('%FOREIGN KEY%') AND sql LIKE('%REFERENCES%') AND sql LIKE('%"+t+"%') AND sql LIKE('%ON DELETE%');";try{let n=yield me.queryAll(e,r,[]),s=[],i="";if(n.length>0){let o=c.getRefs(n[0].sql);s=o.foreignKeys,i=o.tableName}return Promise.resolve({tableWithRefs:i,retRefs:s})}catch(n){let i=`getReferences: ${n.message?n.message:n}`;throw ut.getReferences(i)}})}static getRefs(e){let t="",r=[],n=Xt.flattenMultilineString(e);try{let s=/CREATE\s+TABLE\s+(\w+)\s+\(/,i=n.match(s);i&&(t=i[1]);let o=/FOREIGN\s+KEY\s+\([^)]+\)\s+REFERENCES\s+(\w+)\s*\([^)]+\)\s+ON\s+DELETE\s+(CASCADE|RESTRICT|SET\s+DEFAULT|SET\s+NULL|NO\s+ACTION)/g,f=n.matchAll(o);for(let l of f){let p=l[0];r.push(p)}}catch(s){let i=`getRefs: Error creating regular expression: ${s}`;throw ut.getRefs(i)}return{tableName:t,foreignKeys:r}}static getReferencedTableName(e){return j(this,null,function*(){var t="";if(e.length>0){let r=e.split(new RegExp("REFERENCES","i"));if(r.length===2){let n=r[1].indexOf("(");t=r[1].substring(0,n).trim()}}return t})}static searchForRelatedItems(e,t,r,n,s,i,o){return j(this,null,function*(){let f=[],l="",p=s.map(v=>`t1.${v}`),m=i.map(v=>`t2.${v}`);try{let v=Xt.addPrefixToWhereClause(n,i,s,"t2.");v.endsWith(";")&&(v=v.slice(0,-1));let y=p.map((T,E)=>`${T} = ${m[E]}`).join(" AND "),_=`SELECT t1.rowid FROM ${t} t1 JOIN ${r} t2 ON ${y} WHERE ${v} AND t1.sql_deleted = 0;`,b=yield me.queryAll(e,_,o);return b.length>0&&(l=Object.keys(b[0])[0],f.push(...b)),{key:l,relatedItems:f}}catch(v){let y=v.message?v.message:v;throw ut.searchForRelatedItems(y)}})}static upDateWhereForDefault(e,t){return j(this,null,function*(){let r="",n="";try{let s=t.key,i=[];for(let o of t.relatedItems){let f=o[s];f!==void 0&&i.push(f)}for(let o of e)r+=`${o} = NULL, `;r+="sql_deleted = 0",n=`WHERE ${s} IN (`;for(let o of i)n+=`${o},`;n.endsWith(",")&&(n=n.slice(0,-1)),n+=");"}catch(s){let i=s.message?s.message:s;throw ut.upDateWhereForDefault(i)}return{setStmt:r,uWhereStmt:n}})}static upDateWhereForRestrict(e){return j(this,null,function*(){try{if(e.relatedItems.length>0)throw ut.upDateWhereForRestrict("Restrict mode related items exist, please delete them first");return{setStmt:"",uWhereStmt:""}}catch(t){let r=t.message?t.message:t;throw ut.upDateWhereForRestrict(r)}})}static upDateWhereForCascade(e){return j(this,null,function*(){let t="",r="";try{let n=e.key,s=[];for(let i of e.relatedItems){let o=i[n];o!==void 0&&s.push(o)}t+="sql_deleted = 1",r=`WHERE ${n} IN (`;for(let i of s)r+=`${i},`;r.endsWith(",")&&(r=r.slice(0,-1)),r+=");"}catch(n){let s=n.message?n.message:n;throw ut.upDateWhereForCascade(s)}return{setStmt:t,uWhereStmt:r}})}static executeUpdateForDelete(e,t,r,n,s,i){try{let o=-1,f=`UPDATE ${t} SET ${n} ${r}`,l=[];if(i.length>0){let m=r.split("?");m[m.length-1]===";"&&m.pop();for(let v=0;v<m.length;v++)for(let y of s)Xt.indicesOf(m[v],y).length>0&&l.push(i[v])}if(o=me.run(e,f,l,!1,"no").lastId,o===-1){let m=`UPDATE sql_deleted failed for table: ${t}`;throw ut.executeUpdateForDelete(m)}}catch(o){let f=o.message?o.message:o;throw ut.executeUpdateForDelete(f)}}static getCurrentTimeAsInteger(){return Math.floor(Date.now()/1e3)}static checkValuesMatch(e,t){for(let r of e)if(!t.includes(r))return!1;return!0}},me=class c{static beginTransaction(e,t){return j(this,null,function*(){let r="BeginTransaction: ";if(!t)return Promise.reject(new Error(`${r}database not opened`));try{return e.exec("BEGIN TRANSACTION"),Promise.resolve()}catch(n){let s=n.message?n.message:n;return Promise.reject(new Error(`${r}${s}`))}})}static rollbackTransaction(e,t){return j(this,null,function*(){let r="RollbackTransaction: ";if(!t)return Promise.reject(new Error(`${r}database not opened`));try{return e.exec("ROLLBACK TRANSACTION"),Promise.resolve()}catch(n){let s=n.message?n.message:n;return Promise.reject(new Error(`${r}${s}`))}})}static commitTransaction(e,t){let r="CommitTransaction: ";if(!t)return Promise.reject(new Error(`${r}database not opened`));let n="COMMIT TRANSACTION";try{return e.exec(n),Promise.resolve()}catch(s){let i=s.message?s.message:s;return Promise.reject(new Error(`${r}${i}`))}}static dbChanges(e){return j(this,null,function*(){let t="SELECT total_changes()",r=0;try{return r=e.exec(t)[0].values[0][0],Promise.resolve(r)}catch(n){let s=n.message?n.message:n;return Promise.reject(new Error(`DbChanges failed: ${s}`))}})}static getLastId(e){return j(this,null,function*(){let t="SELECT last_insert_rowid()",r=-1;try{return r=e.exec(t)[0].values[0][0],Promise.resolve(r)}catch(n){let s=n.message?n.message:n;return Promise.reject(new Error(`GetLastId failed: ${s}`))}})}static setForeignKeyConstraintsEnabled(e,t){return j(this,null,function*(){let r="PRAGMA foreign_keys=OFF";t&&(r="PRAGMA foreign_keys=ON");try{return e.run(r),Promise.resolve()}catch(n){let s=n.message?n.message:n;return Promise.reject(new Error(`SetForeignKey: ${s}`))}})}static getVersion(e){return j(this,null,function*(){let t=0;try{let r=e.exec("PRAGMA user_version;");if(console.log(`#### getVersion new res: ${JSON.stringify(r)}`),r&&r.length>0&&r[0].values&&r[0].values.length>0&&r[0].values[0].length>0)t=r[0].values[0][0];else{let n="Cannot return the version from the database";return Promise.reject(new Error(`GetVersion: ${n}`))}return Promise.resolve(t)}catch(r){let n=r.message?r.message:r;return Promise.reject(new Error(`GetVersion: ${n}`))}})}static setVersion(e,t){return j(this,null,function*(){try{return e.exec(`PRAGMA user_version = ${t}`),Promise.resolve()}catch(r){let n=r.message?r.message:r;return Promise.reject(new Error(`SetVersion: ${n}`))}})}static execute(e,t,r){return j(this,null,function*(){try{var n=t;if(!r&&t.toLowerCase().includes("DELETE FROM".toLowerCase())){n=t.replace(/\n/g,"");let o=n.split(";");var s=[];for(let f of o)if(f.trim().substring(0,11).toUpperCase()==="DELETE FROM"&&f.toLowerCase().includes("WHERE".toLowerCase())){let p=f.trim(),m=yield c.deleteSQL(e,p,[]);s.push(m)}else s.push(f);n=s.join(";")}e.exec(n);let i=yield c.dbChanges(e);return Promise.resolve(i)}catch(i){let o=i.message?i.message:i;return Promise.reject(new Error(`Execute: ${o}`))}})}static executeSet(e,t,r,n){return j(this,null,function*(){let s=[],i=-1,o={};for(let f=0;f<t.length;f++){let l="statement"in t[f]?t[f].statement:null,p="values"in t[f]&&t[f].values.length>0?t[f].values:[];if(l==null){let m="ExecuteSet: Error No statement";return m+=` for index ${f}`,Promise.reject(new Error(m))}try{if(Array.isArray(p[0]))for(let m of p){let v=yield c.replaceUndefinedByNull(m);o=yield c.run(e,l,v,r,n),i=o.lastId,Object.keys(o).includes("values")&&o.values.length>0&&s.push(o.values)}else{let m=yield c.replaceUndefinedByNull(p);o=yield c.run(e,l,m,r,n),i=o.lastId,Object.keys(o).includes("values")&&o.values.length>0&&s.push(o.values)}}catch(m){let v=m.message?m.message:m;return Promise.reject(new Error(`ExecuteSet: ${v}`))}}return o.lastId=i,o.values=n==="all"?s:n==="one"?s[0]:[],Promise.resolve(o)})}static queryAll(e,t,r){return j(this,null,function*(){try{let n=[];if(r!=null&&r.length>0?n=e.exec(t,r):n=e.exec(t),n.length==0)return Promise.resolve([]);let s=n[0].values.map(i=>{let o={};return n[0].columns.forEach((f,l)=>{o[f]=i[l]}),o});return Promise.resolve(s)}catch(n){let s=n.message?n.message:n;return Promise.reject(new Error(`queryAll: ${s}`))}})}static run(e,t,r,n,s){return j(this,null,function*(){let i=t.replace(/\n/g,"").trim().substring(0,6).toUpperCase(),o=t,f=[],l={};try{!n&&i==="DELETE"&&(o=yield c.deleteSQL(e,t,r));let p=r||[],m;if(p.length>0){let y=yield c.replaceUndefinedByNull(p);m=e.exec(o,y)}else m=e.exec(o);(s==="all"||s==="one")&&m&&m.length>0&&(f=c.getReturnedValues(m[0],s));let v=yield c.getLastId(e);return l.lastId=v,f!=null&&f.length>0&&(l.values=f),Promise.resolve(l)}catch(p){let m=p.message?p.message:p;return Promise.reject(new Error(`run: ${m}`))}})}static getReturnedValues(e,t){let r=[];for(let n=0;n<e.values.length;n++){let s={};for(let i=0;i<e.columns.length;i++)s[e.columns[i]]=e.values[n][i];if(r.push(s),t==="one")break}return r}static deleteSQL(e,t,r){return j(this,null,function*(){let n=t;try{let s=yield c.isLastModified(e,!0),i=yield c.isSqlDeleted(e,!0);if(!s||!i)return n;let o=Xt.extractWhereClause(n);if(!o){let v="deleteSQL: cannot find a WHERE clause";return Promise.reject(new Error(`${v}`))}let f=Xt.extractTableName(n);if(!f){let v="deleteSQL: cannot find a WHERE clause";return Promise.reject(new Error(`${v}`))}let l=Xt.extractColumnNames(o);if(l.length===0){let v="deleteSQL: Did not find column names in the WHERE Statement";return Promise.reject(new Error(`${v}`))}let p="sql_deleted = 1";if(yield fn.findReferencesAndUpdate(e,f,o,l,r)){let v=o.endsWith(";")?o.slice(0,-1):o;n=`UPDATE ${f} SET ${p} WHERE ${v} AND sql_deleted = 0;`}else n="";return Promise.resolve(n)}catch(s){let i=s.message?s.message:s;return Promise.reject(new Error(`deleteSQL: ${i}`))}})}static getTableList(e){return j(this,null,function*(){try{let t=yield qt.getTablesNames(e);return Promise.resolve(t)}catch(t){let r=t.message?t.message:t;return Promise.reject(new Error(`getTableList: ${r}`))}})}static isTableExists(e,t){return j(this,null,function*(){try{let r="SELECT name FROM sqlite_master WHERE ";r+=`type='table' AND name='${t}';`;let s=(yield c.queryAll(e,r,[])).length>0;return Promise.resolve(s)}catch(r){let n=r.message?r.message:r;return Promise.reject(new Error(`isTableExists: ${n}`))}})}static isLastModified(e,t){return j(this,null,function*(){if(!t)return Promise.reject("isLastModified: database not opened");try{let r=yield qt.getTablesNames(e);for(let n of r)if((yield st.getTableColumnNamesTypes(e,n)).names.includes("last_modified"))return Promise.resolve(!0)}catch(r){let n=r.message?r.message:r;return Promise.reject(new Error(`isLastModified: ${n}`))}})}static isSqlDeleted(e,t){return j(this,null,function*(){if(!t)return Promise.reject("isSqlDeleted: database not opened");try{let r=yield qt.getTablesNames(e);for(let n of r)if((yield st.getTableColumnNamesTypes(e,n)).names.includes("sql_deleted"))return Promise.resolve(!0)}catch(r){let n=r.message?r.message:r;return Promise.reject(new Error(`isSqlDeleted: ${n}`))}})}static replaceUndefinedByNull(e){return j(this,null,function*(){let t=[];for(let r of e){let n=r;typeof r>"u"&&(n=null),t.push(n)}return Promise.resolve(t)})}static backupTables(e){return j(this,null,function*(){let t="BackupTables: ",r={};try{let n=yield qt.getTablesNames(e);for(let s of n)try{let i=yield c.backupTable(e,s);r[`${s}`]=i}catch(i){let o=i.message?i.message:i;return Promise.reject(new Error(`${t}table ${s}: ${o}`))}return Promise.resolve(r)}catch(n){let s=n.message?n.message:n;return Promise.reject(new Error(`BackupTables: ${s}`))}})}static backupTable(e,t){return j(this,null,function*(){try{yield c.beginTransaction(e,!0);let r=yield c.getTableColumnNames(e,t),n=`_temp_${t}`,s=`DROP TABLE IF EXISTS ${n};`;yield c.run(e,s,[],!1,"no");let i=`ALTER TABLE ${t} RENAME `;if(i+=`TO ${n};`,(yield c.run(e,i,[],!1,"no"))<0){let f="BackupTable: lastId < 0";try{yield c.rollbackTransaction(e,!0)}catch(l){f+=`: ${l.message?l.message:l}`}return Promise.reject(new Error(`${f}`))}else try{return yield c.commitTransaction(e,!0),Promise.resolve(r)}catch(f){let l=f.message?f.message:f;return Promise.reject(new Error(`BackupTable: ${l}`))}}catch(r){let n=r.message?r.message:r;return Promise.reject(new Error(`BackupTable: ${n}`))}})}static getTableColumnNames(e,t){return j(this,null,function*(){let r=[],n=[],s=`PRAGMA table_info('${t}');`;try{if(r=yield c.queryAll(e,s,[]),r.length>0)for(let i of r)n.push(i.name);return Promise.resolve(n)}catch(i){let o=i.message?i.message:i;return Promise.reject(new Error(`GetTableColumnNames: ${o}`))}})}static findCommonColumns(e,t){return j(this,null,function*(){let r={};try{let n=yield qt.getTablesNames(e);if(n.length===0)return Promise.reject(new Error("FindCommonColumns: get table's names failed"));for(let s of n){let i=yield c.getTableColumnNames(e,s);Object.keys(t).includes(s)&&(r[s]=c.arraysIntersection(t[s],i))}return Promise.resolve(r)}catch(n){let s=n.message?n.message:n;return Promise.reject(new Error(`FindCommonColumns: ${s}`))}})}static arraysIntersection(e,t){if(e!=null&&t!=null){let r=new Set(e),n=new Set(t);return[...r].filter(s=>n.has(s))}else return[]}static updateNewTablesData(e,t){return j(this,null,function*(){try{yield c.beginTransaction(e,!0);let r=[];if(Object.keys(t).forEach(i=>{let o=t[i].join(","),f=`INSERT INTO ${i} `;f+=`(${o}) `,f+=`SELECT ${o} FROM _temp_${i};`,r.push(f)}),(yield c.execute(e,r.join(`
`),!1))<0){let i="updateNewTablesData: changes < 0";try{yield c.rollbackTransaction(e,!0)}catch(o){i+=`: ${o.message?o.message:o}`}return Promise.reject(new Error(`${i}`))}else try{return yield c.commitTransaction(e,!0),Promise.resolve()}catch(i){let o=i.message?i.message:i;return Promise.reject(new Error(`updateNewTablesData: ${o}`))}}catch(r){let n=r.message?r.message:r;return Promise.reject(new Error(`updateNewTablesData: ${n}`))}})}},Sr=class c{static createDatabaseSchema(e,t){return j(this,null,function*(){let r=-1,n=t.version;try{return yield me.setVersion(e.mDb,n),t.mode==="full"&&(yield qt.dropAll(e.mDb)),r=yield c.createSchema(e,t),Promise.resolve(r)}catch(s){return Promise.reject(new Error(`CreateDatabaseSchema: ${s.message}`))}})}static createSchema(e,t){return j(this,null,function*(){let r=0,n=e.mDb;try{yield me.beginTransaction(n,!0),e.setIsTransActive(!0)}catch(i){return Promise.reject(new Error(`CreateSchema: ${i.message}`))}let s=yield c.createSchemaStatement(t);if(s.length>0){let i=s.join(`
`);try{if(r=yield me.execute(n,i,!0),r<0)try{yield me.rollbackTransaction(n,!0),e.setIsTransActive(!1)}catch(o){return Promise.reject(new Error(`CreateSchema: changes < 0 ${o.message}`))}}catch(o){let f=o.message;try{return yield me.rollbackTransaction(n,!0),e.setIsTransActive(!1),Promise.reject(new Error(`CreateSchema: ${f}`))}catch(l){return Promise.reject(new Error(`CreateSchema: changes < 0 ${l.message}: ${f}`))}}}try{return yield me.commitTransaction(n,!0),e.setIsTransActive(!1),Promise.resolve(r)}catch(i){return Promise.reject(new Error(`CreateSchema: commit ${i.message}`))}})}static createSchemaStatement(e){return j(this,null,function*(){let t=[],r=!1,n=!1;try{for(let s of e.tables){if(s.schema!=null&&s.schema.length>=1){t.push(`CREATE TABLE IF NOT EXISTS ${s.name} (`);for(let i=0;i<s.schema.length;i++)i===s.schema.length-1?s.schema[i].column?(t.push(`${s.schema[i].column} ${s.schema[i].value}`),s.schema[i].column==="last_modified"&&(r=!0),s.schema[i].column==="sql_deleted"&&(n=!0)):s.schema[i].foreignkey?t.push(`FOREIGN KEY (${s.schema[i].foreignkey}) ${s.schema[i].value}`):s.schema[i].constraint&&t.push(`CONSTRAINT ${s.schema[i].constraint} ${s.schema[i].value}`):s.schema[i].column?t.push(`${s.schema[i].column} ${s.schema[i].value},`):s.schema[i].foreignkey?t.push(`FOREIGN KEY (${s.schema[i].foreignkey}) ${s.schema[i].value},`):s.schema[i].primarykey?t.push(`FOREIGN KEY ${s.schema[i].value},`):s.schema[i].constraint&&t.push(`CONSTRAINT ${s.schema[i].constraint} ${s.schema[i].value},`);if(t.push(");"),r&&n){let i="CREATE TRIGGER IF NOT EXISTS ";i+=`${s.name}`,i+="_trigger_last_modified ",i+=`AFTER UPDATE ON ${s.name} `,i+="FOR EACH ROW WHEN NEW.last_modified < ",i+="OLD.last_modified BEGIN UPDATE ",i+=`${s.name} `,i+="SET last_modified = ",i+="(strftime('%s','now')) WHERE id=OLD.id; END;",t.push(i)}}if(s.indexes!=null&&s.indexes.length>=1)for(let i of s.indexes){let o=s.name,f=`CREATE ${Object.keys(i).includes("mode")?i.mode+" ":""} INDEX IF NOT EXISTS `;f+=`${i.name} ON ${o} (${i.value});`,t.push(f)}if(s.triggers!=null&&s.triggers.length>=1)for(let i of s.triggers){let o=s.name;i.timeevent.toUpperCase().endsWith(" ON")&&(i.timeevent=i.timeevent.substring(0,i.timeevent.length-3));let f="CREATE TRIGGER IF NOT EXISTS ";f+=`${i.name} ${i.timeevent} ON ${o} `,i.condition&&(f+=`${i.condition} `),f+=`${i.logic};`,t.push(f)}}return Promise.resolve(t)}catch(s){return Promise.reject(s)}})}static createTablesData(e,t,r){return j(this,null,function*(){let n=0,s=!1,i=-1,o="",f=-1,l=e.mDb;try{f=yield me.dbChanges(l),yield me.beginTransaction(l,!0),e.setIsTransActive(!0)}catch(p){return Promise.reject(new Error(`createTablesData: ${p.message}`))}for(let p of t.tables)if(p.values!=null&&p.values.length>=1)try{i=yield c.createTableData(l,p,t.mode);let m=`create table data ${p.name}`;if(r.emit({progress:m}),i<0)break;s=!0}catch(m){o=m.message,s=!1;break}if(s)try{return yield me.commitTransaction(l,!0),e.setIsTransActive(!1),n=(yield me.dbChanges(l))-f,Promise.resolve(n)}catch(p){return Promise.reject(new Error(`CreateTablesData: ${p.message}`))}else if(o.length>0)try{return yield me.rollbackTransaction(l,!0),e.setIsTransActive(!1),Promise.reject(new Error(`CreateTablesData: ${o}`))}catch(p){return Promise.reject(new Error(`CreateTablesData: ${p.message}: ${o}`))}else return Promise.resolve(0)})}static createTableData(e,t,r){return j(this,null,function*(){let n=-1;try{if(!(yield me.isTableExists(e,t.name)))return Promise.reject(new Error(`CreateTableData: Table ${t.name} does not exist`));let i=yield st.getTableColumnNamesTypes(e,t.name),o=i.types,f=i.names;if(o.length===0)return Promise.reject(new Error(`CreateTableData: Table ${t.name} info does not exist`));for(let l=0;l<t.values.length;l++){let p=t.values[l],m=!0,v=yield c.createRowStatement(e,f,p,l,t.name,r);if(m=yield c.checkUpdate(e,v,p,t.name,f),m){if(v.substring(0,6).toUpperCase()==="DELETE"&&(p=[]),n=yield me.run(e,v,p,!0,"no"),n<0)return Promise.reject(new Error("CreateTableData: lastId < 0"))}else n=0}return Promise.resolve(n)}catch(s){return Promise.reject(new Error(`CreateTableData: ${s.message}`))}})}static createRowStatement(e,t,r,n,s,i){return j(this,null,function*(){if(r.length!=t.length||r.length===0||t.length===0)return Promise.reject(new Error(`CreateRowStatement: Table ${s} values row ${n} not correct length`));try{let o=yield c.isIdExists(e,s,t[0],r[0]),f;if(i==="full"||i==="partial"&&!o){let l=t.join(),p=yield c.createQuestionMarkString(t.length);f=`INSERT INTO ${s} (${l}) VALUES (`,f+=`${p});`}else{let l=!0,p=v=>v==="sql_deleted",m=t.findIndex(p);if(m>=0&&r[m]===1&&(l=!1,f=`DELETE FROM ${s} WHERE `,typeof r[0]=="string"?f+=`${t[0]} = '${r[0]}';`:f+=`${t[0]} = ${r[0]};`),l){let v=yield c.setNameForUpdate(t);if(v.length===0)return Promise.reject(new Error(`CreateRowStatement: Table ${s} values row ${n} not set to String`));f=`UPDATE ${s} SET ${v} WHERE `,typeof r[0]=="string"?f+=`${t[0]} = '${r[0]}';`:f+=`${t[0]} = ${r[0]};`}}return Promise.resolve(f)}catch(o){return Promise.reject(new Error(`CreateRowStatement: ${o.message}`))}})}static checkUpdate(e,t,r,n,s){return j(this,null,function*(){let i=!0;if(t.substring(0,6)==="UPDATE")try{let o=`SELECT * FROM ${n} WHERE `;typeof r[0]=="string"?o+=`${s[0]} = '${r[0]}';`:o+=`${s[0]} = ${r[0]};`;let f=yield st.getValues(e,o,n),l=[];if(f.length>0&&(l=f[0]),r.length>0&&l.length>0&&r.length===l.length){for(let p=0;p<r.length;p++)if(r[p]!==l[p])return Promise.resolve(!0);return Promise.resolve(!1)}else{let p="Both arrays not the same length";return Promise.reject(new Error(`CheckUpdate: ${p}`))}}catch(o){return Promise.reject(new Error(`CheckUpdate: ${o.message}`))}else return Promise.resolve(i)})}static isIdExists(e,t,r,n){return j(this,null,function*(){let s=!1,i=`SELECT ${r} FROM ${t} WHERE ${r} = `;typeof n=="number"&&(i+=`${n};`),typeof n=="string"&&(i+=`'${n}';`);try{return(yield me.queryAll(e,i,[])).length===1&&(s=!0),Promise.resolve(s)}catch(o){return Promise.reject(new Error(`IsIdExists: ${o.message}`))}})}static isType(e,t){return j(this,null,function*(){let r=!1;return e==="NULL"&&typeof t=="object"&&(r=!0),e==="TEXT"&&typeof t=="string"&&(r=!0),e==="INTEGER"&&typeof t=="number"&&(r=!0),e==="REAL"&&typeof t=="number"&&(r=!0),e==="BLOB"&&typeof t=="string"&&(r=!0),r?Promise.resolve():Promise.reject(new Error("IsType: not a SQL Type"))})}static checkColumnTypes(e,t){return j(this,null,function*(){for(let r=0;r<t.length;r++)if(t[r]!=null)try{yield c.isType(e[r],t[r])}catch{return Promise.reject(new Error("CheckColumnTypes: Type not found"))}return Promise.resolve()})}static createQuestionMarkString(e){return j(this,null,function*(){let t="";for(let r=0;r<e;r++)t+="?,";return t.length>1?(t=t.slice(0,-1),Promise.resolve(t)):Promise.reject(new Error("CreateQuestionMarkString: length = 0"))})}static setNameForUpdate(e){return j(this,null,function*(){let t="";for(let r of e)t+=`${r} = ? ,`;return t.length>1?(t=t.slice(0,-1),Promise.resolve(t)):Promise.reject(new Error("SetNameForUpdate: length = 0"))})}static createView(e,t){return j(this,null,function*(){let r=`CREATE VIEW IF NOT EXISTS ${t.name} AS ${t.value};`;try{return(yield me.execute(e,r,!0))<0?Promise.reject(new Error(`CreateView: ${t.name} failed`)):Promise.resolve()}catch(n){return Promise.reject(new Error(`CreateView: ${n.message}`))}})}static createViews(e,t){return j(this,null,function*(){let r=e.mDb,n=!1,s="",i=-1,o=-1;try{i=yield me.dbChanges(r),yield me.beginTransaction(r,!0),e.setIsTransActive(!0)}catch(f){return Promise.reject(new Error(`createViews: ${f.message}`))}for(let f of t.views)if(f.value!=null)try{yield c.createView(r,f),n=!0}catch(l){s=l.message,n=!1;break}if(n)try{return yield me.commitTransaction(r,!0),e.setIsTransActive(!1),o=(yield me.dbChanges(r))-i,Promise.resolve(o)}catch(f){return Promise.reject(new Error(`createViews: ${f.message}`))}else if(s.length>0)try{return yield me.rollbackTransaction(r,!0),e.setIsTransActive(!1),Promise.reject(new Error(`createViews: ${s}`))}catch(f){return Promise.reject(new Error(`createViews: ${f.message}: ${s}`))}else return Promise.resolve(0)})}},fr=class c{static createExportObject(e,t,r){return j(this,null,function*(){let n={},s=[],i=[],o="";try{i=yield c.getViewsName(e);let f=yield c.getTablesNameSQL(e);if(f.length===0)return Promise.reject(new Error("createExportObject: table's names failed"));if(!(yield me.isTableExists(e,"sync_table"))&&t.mode==="partial")return Promise.reject(new Error("No sync_table available"));switch(t.mode){case"partial":{s=yield c.getTablesPartial(e,f,r);break}case"full":{s=yield c.getTablesFull(e,f,r);break}default:{o="createExportObject: expMode "+t.mode+" not defined";break}}return o.length>0?Promise.reject(new Error(o)):(s.length>0&&(n.database=t.database,n.version=t.version,n.encrypted=t.encrypted,n.mode=t.mode,n.tables=s,i.length>0&&(n.views=i)),Promise.resolve(n))}catch(f){return Promise.reject(new Error("createExportObject: "+f.message))}})}static getViewsName(e){return j(this,null,function*(){let t=[],r="SELECT name,sql FROM sqlite_master WHERE ";r+="type='view' AND name NOT LIKE 'sqlite_%';";let n=[];try{n=yield me.queryAll(e,r,[]);for(let s of n){let i={};i.name=s.name,i.value=s.sql.substring(s.sql.indexOf("AS ")+3),t.push(i)}return Promise.resolve(t)}catch(s){return Promise.reject(new Error(`getViewsName: ${s.message}`))}})}static getTablesFull(e,t,r){return j(this,null,function*(){let n=[],s="";try{for(let i of t){let o,f;if(i.name)o=i.name;else{s="GetTablesFull: no name";break}if(i.sql)f=i.sql;else{s="GetTablesFull: no sql";break}let l={},p=yield c.getSchema(f);if(p.length===0){s="GetTablesFull: no Schema returned";break}yield st.checkSchemaValidity(p);let m=yield c.getIndexes(e,o);m.length>0&&(yield st.checkIndexesValidity(m));let v=yield c.getTriggers(e,o);v.length>0&&(yield st.checkTriggersValidity(v));let y=`Full: Table ${o} schema export completed ...`;r.emit({progress:y});let _=`SELECT * FROM ${o};`,b=yield st.getValues(e,_,o);if(l.name=o,p.length>0)l.schema=p;else{s="GetTablesFull: must contain schema";break}if(m.length>0&&(l.indexes=m),v.length>0&&(l.triggers=v),b.length>0&&(l.values=b),Object.keys(l).length<=1){s=`GetTablesFull: table ${o} is not a jsonTable`;break}y=`Full: Table ${o} table data export completed ...`,r.emit({progress:y}),n.push(l)}return s.length>0?Promise.reject(new Error(s)):Promise.resolve(n)}catch(i){return Promise.reject(new Error(`GetTablesFull: ${i.message}`))}})}static getSchema(e){return j(this,null,function*(){let t=[],r=e.indexOf("("),n=e.lastIndexOf(")"),s=e.substring(r+1,n);try{s=yield c.modEmbeddedParentheses(s);let i=s.split(",");for(let o=0;o<i.length;o++){let f=[],l=i[o].replace(/\n/g,"").trim();f[0]=l.substring(0,l.indexOf(" ")),f[1]=l.substring(l.indexOf(" ")+1);let p={};if(f[0].toUpperCase()==="FOREIGN"){let m=l.indexOf("("),v=l.indexOf(")"),_=l.substring(m+1,v).split("\xA7");f[0]=_.join(","),f[0]=f[0].replace(/, /g,","),f[1]=l.substring(v+2),p.foreignkey=f[0]}else if(f[0].toUpperCase()==="PRIMARY")f=c.getRow(l,"CPK"),p.constraint=f[0];else if(f[0].toUpperCase()==="UNIQUE")f=c.getRow(l,"CUN"),p.constraint=f[0];else if(f[0].toUpperCase()==="CONSTRAINT"){let m=[],v=f[1].trim();m[0]=v.substring(0,v.indexOf(" ")),m[1]=v.substring(v.indexOf(" ")+1),f[0]=m[0],p.constraint=f[0],f[1]=m[1]}else p.column=f[0];p.value=f[1].replace(//g,","),t.push(p)}return Promise.resolve(t)}catch(i){return Promise.reject(new Error(i.message))}})}static getRow(e,t){let r=[],n=e.indexOf("("),s=e.indexOf(")"),o=e.substring(n+1,s).split("\xA7");return r[0]=`${t}_`+o.join("_"),r[0]=r[0].replace(/_ /g,"_"),r[1]=e,r}static getIndexes(e,t){return j(this,null,function*(){let r=[],n="";try{let s="SELECT name,tbl_name,sql FROM sqlite_master WHERE ";s+=`type = 'index' AND tbl_name = '${t}' `,s+="AND sql NOTNULL;";let i=yield me.queryAll(e,s,[]);if(i.length>0){for(let o of i)if(Object.keys(o).length===3)if(o.tbl_name===t){let l=o.sql,p=l.includes("UNIQUE")?"UNIQUE":"",m=l.lastIndexOf("("),v=l.lastIndexOf(")"),y={};y.name=o.name,y.value=l.slice(m+1,v),p.length>0&&(y.mode=p),r.push(y)}else{n=`GetIndexes: Table ${t} doesn't match`;break}else{n=`GetIndexes: Table ${t} creating indexes`;break}if(n.length>0)return Promise.reject(new Error(n))}return Promise.resolve(r)}catch(s){return Promise.reject(new Error(`GetIndexes: ${s.message}`))}})}static getTriggers(e,t){return j(this,null,function*(){let r=[];try{let n="SELECT name,tbl_name,sql FROM sqlite_master WHERE ";n+=`type = 'trigger' AND tbl_name = '${t}' `,n+="AND sql NOT NULL;";let s=yield me.queryAll(e,n,[]);if(s.length>0)for(let i of s)if(Object.keys(i).length===3)if(i.tbl_name===t){let f=i.sql,l=i.name,p=f.split(l);if(p.length!=2)return Promise.reject(new Error("GetTriggers: sql split name does not return 2 values"));if(!p[1].includes(t))return Promise.reject(new Error(`GetTriggers: sql split does not contains ${t}`));let m=p[1].split(t,1)[0].trim();if(p=p[1].split(m+" "+t),p.length!=2)return Promise.reject(new Error("GetTriggers: sql split tableName does not return 2 values"));let v="",y="";if(p[1].trim().substring(0,5).toUpperCase()!=="BEGIN"){if(p=p[1].trim().split("BEGIN"),p.length!=2)return Promise.reject(new Error("GetTriggers: sql split BEGIN does not return 2 values"));v=p[0].trim(),y="BEGIN"+p[1]}else y=p[1].trim();let _={};_.name=l,_.logic=y,v.length>0&&(_.condition=v),_.timeevent=m,r.push(_)}else return Promise.reject(new Error(`GetTriggers: Table ${t} doesn't match`));else return Promise.reject(new Error(`GetTriggers: Table ${t} creating indexes`));return Promise.resolve(r)}catch(n){return Promise.reject(new Error(`GetTriggers: ${n.message}`))}})}static getTablesPartial(e,t,r){return j(this,null,function*(){let n=[],s={},i=0,o=[],f="";try{let l=yield c.getPartialModeData(e,t);Object.keys(l).includes("syncDate")&&(i=l.syncDate),Object.keys(l).includes("modTables")&&(s=l.modTables,o=Object.keys(s));for(let p of t){let m="",v="";if(p.name)m=p.name;else{f="GetTablesFull: no name";break}if(p.sql)v=p.sql;else{f="GetTablesFull: no sql";break}if(o.length==0||o.indexOf(m)===-1||s[m]=="No")continue;let y={},_=[],b=[],T=[];y.name=p,s[y.name]==="Create"&&(_=yield c.getSchema(v),_.length>0&&(yield st.checkSchemaValidity(_)),b=yield c.getIndexes(e,m),b.length>0&&(yield st.checkIndexesValidity(b)),T=yield c.getTriggers(e,m),T.length>0&&(yield st.checkTriggersValidity(T)));let E=`Partial: Table ${m} schema export completed ...`;r.emit({progress:E});let A="";s[m]==="Create"?A=`SELECT * FROM ${m};`:A=`SELECT * FROM ${m} WHERE last_modified > ${i};`;let C=yield st.getValues(e,A,m);if(y.name=m,_.length>0&&(y.schema=_),b.length>0&&(y.indexes=b),T.length>0&&(y.triggers=T),C.length>0&&(y.values=C),Object.keys(y).length<=1){f=`GetTablesPartial: table ${m} is not a jsonTable`;break}E=`Partial: Table ${m} table data export completed ...`,r.emit({progress:E}),n.push(y)}return f.length>0?Promise.reject(new Error(f)):Promise.resolve(n)}catch(l){return Promise.reject(new Error(`GetTablesPartial: ${l.message}`))}})}static getPartialModeData(e,t){return j(this,null,function*(){let r={};try{let n=yield c.getSynchroDate(e);if(n<=0)return Promise.reject(new Error("GetPartialModeData: no syncDate"));let s=yield c.getTablesModified(e,t,n);return s.length<=0?Promise.reject(new Error("GetPartialModeData: no modTables")):(r.syncDate=n,r.modTables=s,Promise.resolve(r))}catch(n){return Promise.reject(new Error(`GetPartialModeData: ${n.message}`))}})}static getTablesNameSQL(e){return j(this,null,function*(){let t="SELECT name,sql FROM sqlite_master WHERE ";t+="type='table' AND name NOT LIKE 'sync_table' ",t+="AND name NOT LIKE '_temp_%' ",t+="AND name NOT LIKE 'sqlite_%';";try{let r=yield me.queryAll(e,t,[]);return Promise.resolve(r)}catch(r){return Promise.reject(new Error(`getTablesNamesSQL: ${r.message}`))}})}static getTablesModified(e,t,r){return j(this,null,function*(){let n="";try{let s={};for(let i of t){let o,f="SELECT count(*) AS tcount  ";f+=`FROM ${i.name};`;let l=yield me.queryAll(e,f,[]);if(l.length!=1){n="GetTableModified: total count not returned";break}let p=l[0].tcount;if(f="SELECT count(*) AS mcount FROM ",f+=`${i.name} WHERE last_modified > `,f+=`${r};`,l=yield me.queryAll(e,f,[]),l.length!=1)break;let m=l[0].mcount;m===0?o="No":p===m?o="Create":o="Modified";let v=i.name;s[v]=o}return n.length>0?Promise.reject(new Error(n)):Promise.resolve(s)}catch(s){return Promise.reject(new Error(`GetTableModified: ${s.message}`))}})}static getSynchroDate(e){return j(this,null,function*(){try{let r=yield me.queryAll(e,"SELECT sync_date FROM sync_table WHERE id = 1;",[]);return Promise.resolve(r[0].sync_date)}catch(t){let r=`GetSynchroDate: ${t.message}`;return Promise.reject(new Error(r))}})}static getLastExportDate(e){return j(this,null,function*(){try{let r=yield me.queryAll(e,"SELECT sync_date FROM sync_table WHERE id = 2;",[]);return r.length===0?Promise.resolve(-1):Promise.resolve(r[0].sync_date)}catch(t){let r=`getLastExport: ${t.message}`;return Promise.reject(new Error(r))}})}static setLastExportDate(e,t){return j(this,null,function*(){try{if(!(yield me.isTableExists(e,"sync_table")))return Promise.reject(new Error("setLastExportDate: No sync_table available"));let n=Math.round(new Date(t).getTime()/1e3),s="";return(yield c.getLastExportDate(e))>0?s=`UPDATE sync_table SET sync_date = ${n} WHERE id = 2;`:s=`INSERT INTO sync_table (sync_date) VALUES (${n});`,(yield me.execute(e,s,!1))<0?{result:!1,message:"setLastExportDate failed"}:{result:!0}}catch(r){return{result:!1,message:`setLastExportDate failed: ${r.message}`}}})}static delExportedRows(e){return j(this,null,function*(){let t;try{if(!(yield me.isTableExists(e,"sync_table")))return Promise.reject(new Error("DelExportedRows: No sync_table available"));if(t=yield c.getLastExportDate(e),t<0)return Promise.reject(new Error("DelExportedRows: no last exported date available"));let n=yield me.getTableList(e);if(n.length===0)return Promise.reject(new Error("DelExportedRows: No table's names returned"));for(let s of n){let i=-1,o=`DELETE FROM ${s}
              WHERE sql_deleted = 1 AND last_modified < ${t};`;if(i=yield me.run(e,o,[],!0,"no"),i<0)return Promise.reject(new Error("DelExportedRows: lastId < 0"))}}catch(r){return Promise.reject(new Error(`DelExportedRows failed: ${r.message}`))}})}static modEmbeddedParentheses(e){return j(this,null,function*(){let t=c.indexOfChar(e,"("),r=c.indexOfChar(e,")");if(t.length!=r.length)return Promise.reject("ModEmbeddedParentheses: Not same number of '(' & ')'");if(t.length===0)return Promise.resolve(e);let n=e.substring(0,t[0]-1);for(let s=0;s<t.length;s++){let i;s<t.length-1&&t[s+1]<r[s]?(i=e.substring(t[s]-1,r[s+1]),s++):i=e.substring(t[s]-1,r[s]);let o=i.replace(/,/g,"\xA7");n+=o,s<t.length-1&&(n+=e.substring(r[s],t[s+1]-1))}return n+=e.substring(r[r.length-1],e.length),Promise.resolve(n)})}static indexOfChar(e,t){let r=[...e];return t=t.toLowerCase(),r.reduce((n,s,i)=>s.toLowerCase()===t?[...n,i]:n,[])}},hn=class c{static onUpgrade(e,t,r,n){return j(this,null,function*(){let s=-1,i=new Int32Array(Object.keys(t).map(o=>parseInt(o))).sort();for(let o of i)if(o>r&&o<=n){let f=t[o].statements;if(f.length===0)return Promise.reject("onUpgrade: statements not given");try{yield me.setForeignKeyConstraintsEnabled(e.mDb,!1);let l=yield me.dbChanges(e.mDb);yield c.executeStatementsProcess(e,f),yield me.setVersion(e.mDb,o),yield me.setForeignKeyConstraintsEnabled(e.mDb,!0),s=(yield me.dbChanges(e.mDb))-l}catch(l){return Promise.reject(new Error(`onUpgrade: ${l.message}`))}}return Promise.resolve(s)})}static executeStatementsProcess(e,t){return j(this,null,function*(){try{yield me.beginTransaction(e.mDb,!0),e.setIsTransActive(!0);for(let r of t)yield me.execute(e.mDb,r,!1);return yield me.commitTransaction(e.mDb,!0),e.setIsTransActive(!1),Promise.resolve()}catch(r){return yield me.rollbackTransaction(e.mDb,!0),e.setIsTransActive(!1),Promise.reject(`ExecuteStatementProcess: ${r}`)}})}},Gr=class{constructor(e,t,r,n,s,i){this.vUpgDict={},this.autoSave=!1,this.wasmPath="/assets",this.isBackup=!1,this.isTransactionActive=!1,this.dbName=e,this.store=n,this.version=t,this.mDb=null,this.vUpgDict=r,this._isDBOpen=!1,this.autoSave=s,this.wasmPath=i}open(){return j(this,null,function*(){let e={locateFile:t=>`${this.wasmPath}/${t}`};return new Promise((t,r)=>{try{La(e).then(n=>j(this,null,function*(){let s=yield qe.getDBFromStore(this.dbName,this.store);s!=null?this.mDb=new n.Database(s):(this.mDb=new n.Database,yield qe.setInitialDBToStore(this.dbName,this.store)),this._isDBOpen=!0;let i=yield me.getVersion(this.mDb);if(this.version>i&&Object.keys(this.vUpgDict).length>0)try{if((yield qe.isDBInStore(this.dbName,this.store))&&(yield qe.copyDBToStore(this.dbName,`backup-${this.dbName}`,this.store),this.isBackup=!0),(yield hn.onUpgrade(this,this.vUpgDict,i,this.version))===-1)try{this.isBackup&&(yield qe.restoreDBFromStore(this.dbName,"backup",this.store))}catch(l){let p=l.message?l.message:l;return r(new Error(`Open: ${p}`))}this.isBackup&&(yield qe.removeDBFromStore(`backup-${this.dbName}`,this.store))}catch{try{this.isBackup&&(yield qe.restoreDBFromStore(this.dbName,"backup",this.store))}catch(f){let l=f.message?f.message:f;return r(new Error(`Open: ${l}`))}}if(this.autoSave)try{yield this.saveToStore()}catch(o){this._isDBOpen=!1;let f=o.message?o.message:o;return r(new Error(`Open: ${f}`))}return yield me.setForeignKeyConstraintsEnabled(this.mDb,!0),t()}))}catch(n){this._isDBOpen=!1;let s=n.message?n.message:n;return r(new Error(`Open: ${s}`))}})})}isDBOpen(){return this._isDBOpen}close(){return j(this,null,function*(){if(this.mDb!=null&&this._isDBOpen)try{yield this.saveToStore(!1),this.mDb.close(),this._isDBOpen=!1}catch(e){this._isDBOpen=!1;let t=e.message?e.message:e;return Promise.reject(new Error(`in close ${t}`))}return Promise.resolve()})}saveToStore(e=!0){return j(this,null,function*(){if(this.mDb!=null&&this._isDBOpen)try{yield qe.setDBToStore(this.mDb,this.dbName,this.store),e&&(yield me.setForeignKeyConstraintsEnabled(this.mDb,!0))}catch(t){let r=t.message?t.message:t;return Promise.reject(new Error(`in saveToStore ${r}`))}return Promise.resolve()})}exportDB(){return j(this,null,function*(){try{return this.mDb.export()}catch(e){let t=e.message?e.message:e;return Promise.reject(new Error(`exportDB: ${t}`))}})}getVersion(){return j(this,null,function*(){if(this.mDb!=null&&this._isDBOpen)try{let e=yield me.getVersion(this.mDb);return Promise.resolve(e)}catch(e){this._isDBOpen=!1;let t=e.message?e.message:e;return Promise.reject(new Error(`in getVersion ${t}`))}})}isDBExists(e){return j(this,null,function*(){try{let t=yield qe.isDBInStore(e,this.store);return Promise.resolve(t)}catch(t){let r=t.message?t.message:t;return Promise.reject(new Error(`in isDBExists ${r}`))}})}deleteDB(e){return j(this,null,function*(){try{let t=yield this.isDBExists(e);return t&&!this._isDBOpen&&(yield this.open()),yield this.close(),t&&(yield qe.removeDBFromStore(e,this.store)),Promise.resolve()}catch(t){let r=t.message?t.message:t;return Promise.reject(new Error(`DeleteDB: ${r}`))}})}beginTransaction(){return j(this,null,function*(){if(!this._isDBOpen){let e=`BeginTransaction: Database ${this.dbName} `;return e+="not opened",Promise.reject(new Error(e))}try{return yield me.beginTransaction(this.mDb,!0),this.setIsTransActive(!0),0}catch(e){let t=`BeginTransaction: ${e.message?e.message:e}`;return Promise.reject(new Error(`${t}`))}})}commitTransaction(){return j(this,null,function*(){if(!this._isDBOpen){let e=`CommitTransaction: Database ${this.dbName} `;return e+="not opened",Promise.reject(new Error(e))}try{return yield me.commitTransaction(this.mDb,!0),this.setIsTransActive(!1),0}catch(e){let t=`CommitTransaction: ${e.message?e.message:e}`;return Promise.reject(new Error(`${t}`))}})}rollbackTransaction(){return j(this,null,function*(){if(!this._isDBOpen){let e=`RollbackTransaction: Database ${this.dbName} `;return e+="not opened",Promise.reject(new Error(e))}try{return yield me.rollbackTransaction(this.mDb,!0),this.setIsTransActive(!1),0}catch(e){let t=`RollbackTransaction: ${e.message?e.message:e}`;return Promise.reject(new Error(`${t}`))}})}isTransActive(){return this.isTransactionActive}setIsTransActive(e){this.isTransactionActive=e}executeSQL(e,t=!0){return j(this,null,function*(){if(!this._isDBOpen){let n=`ExecuteSQL: Database ${this.dbName} `;return n+="not opened",Promise.reject(new Error(n))}let r=-1;try{r=yield me.dbChanges(this.mDb),t&&!this.isTransactionActive&&(yield this.beginTransaction())}catch(n){let s=`executeSQL: ${n.message?n.message:n}`;return Promise.reject(new Error(`${s}`))}try{if((yield me.execute(this.mDb,e,!1))<0)return Promise.reject(new Error("ExecuteSQL: changes < 0"));t&&this.isTransactionActive&&(yield this.commitTransaction());let s=(yield me.dbChanges(this.mDb))-r;return Promise.resolve(s)}catch(n){let s=`ExecuteSQL: ${n.message?n.message:n}`;try{t&&this.isTransactionActive&&(yield this.rollbackTransaction())}catch(i){s+=` : ${i.message?i.message:i}`}return Promise.reject(new Error(`ExecuteSQL: ${s}`))}finally{if(t&&(this.isTransactionActive=!1),this.autoSave&&!this.isTransactionActive)try{yield this.saveToStore()}catch(n){this._isDBOpen=!1;let s=n.message?n.message:n;return Promise.reject(`ExecuteSQL: ${s}`)}}})}execSet(e,t=!0,r="no"){return j(this,null,function*(){if(!this._isDBOpen){let i=`ExecSet: Database ${this.dbName} `;return i+="not opened",Promise.reject(new Error(i))}let n={changes:-1,lastId:-1},s=-1;try{s=yield me.dbChanges(this.mDb),t&&!this.isTransactionActive&&(yield this.beginTransaction())}catch(i){let f=`ExecSet: ${i.message?i.message:i}`;return Promise.reject(new Error(`${f}`))}try{let i=yield me.executeSet(this.mDb,e,!1,r),o=i.lastId;if(o<0)return Promise.reject(new Error("ExecSet: changes < 0"));t&&this.isTransactionActive&&(yield this.commitTransaction());let f=(yield me.dbChanges(this.mDb))-s;return n.changes=f,n.lastId=o,n.values=i.values?i.values:[],Promise.resolve(n)}catch(i){let f=`ExecSet: ${i.message?i.message:i}`;try{t&&this.isTransactionActive&&(yield this.rollbackTransaction())}catch(l){f+=` : ${l.message?l.message:l}`}return Promise.reject(new Error(`ExecSet: ${f}`))}finally{if(t&&(this.isTransactionActive=!1),this.autoSave&&!this.isTransactionActive)try{yield this.saveToStore()}catch(i){let o=i.message?i.message:i;return this._isDBOpen=!1,Promise.reject(`ExecSet: ${o}`)}}})}selectSQL(e,t){return j(this,null,function*(){if(!this._isDBOpen){let r=`SelectSQL: Database ${this.dbName} `;return r+="not opened",Promise.reject(new Error(r))}try{let r=yield me.queryAll(this.mDb,e,t);return Promise.resolve(r)}catch(r){let n=r.message?r.message:r;return Promise.reject(new Error(`SelectSQL: ${n}`))}})}runSQL(e,t,r=!0,n){return j(this,null,function*(){let s=-1;if(!this._isDBOpen){let f=`RunSQL: Database ${this.dbName} `;return f+="not opened",Promise.reject(new Error(f))}let i={changes:-1,lastId:-1},o=-1;try{o=yield me.dbChanges(this.mDb),r&&!this.isTransactionActive&&(yield this.beginTransaction())}catch(f){let p=`RunSQL: ${f.message?f.message:f}`;return Promise.reject(new Error(`${p}`))}try{let f=yield me.run(this.mDb,e,t,!1,n);if(s=f.lastId,s<0)return Promise.reject(new Error("RunSQL: lastId < 0"));r&&this.isTransactionActive&&(yield this.commitTransaction());let l=(yield me.dbChanges(this.mDb))-o;return i.changes=l,i.lastId=s,i.values=f.values?f.values:[],Promise.resolve(i)}catch(f){let p=`RunSQL: ${f.message?f.message:f}`;try{r&&this.isTransactionActive&&(yield this.rollbackTransaction())}catch(m){p+=` : ${m.message?m.message:m}`}return Promise.reject(new Error(`${p}`))}finally{if(r&&this.setIsTransActive(!1),this.autoSave&&!this.isTransactionActive)try{yield this.saveToStore()}catch(f){this._isDBOpen=!1;let l=f.message?f.message:f;return Promise.reject(`ExecSet: ${l}`)}}})}getTableNames(){return j(this,null,function*(){if(!this._isDBOpen){let e=`GetTableNames: Database ${this.dbName} `;return e+="not opened",Promise.reject(new Error(e))}try{let e=yield me.getTableList(this.mDb);return Promise.resolve(e)}catch(e){let t=e.message?e.message:e;return Promise.reject(new Error(`GetTableNames: ${t}`))}})}isTable(e){return j(this,null,function*(){if(!this._isDBOpen){let t=`isTable: Database ${this.dbName} `;return t+="not opened",Promise.reject(new Error(t))}try{let t=yield me.isTableExists(this.mDb,e);return Promise.resolve(t)}catch(t){let r=`IsTable: ${t.message?t.message:t}`;return Promise.reject(new Error(r))}})}createSyncTable(){return j(this,null,function*(){if(!this._isDBOpen){let t=`createSyncTable: Database ${this.dbName} `;return t+="not opened",Promise.reject(new Error(t))}let e=-1;try{if(yield me.isTableExists(this.mDb,"sync_table"))return Promise.resolve(0);{let r=yield me.isLastModified(this.mDb,this._isDBOpen),n=yield me.isSqlDeleted(this.mDb,this._isDBOpen);if(r&&n){let s=Math.round(new Date().getTime()/1e3),i=`
                          CREATE TABLE IF NOT EXISTS sync_table (
                              id INTEGER PRIMARY KEY NOT NULL,
                              sync_date INTEGER
                              );`;return i+=`INSERT INTO sync_table (sync_date) VALUES (
                              "${s}");`,e=yield me.execute(this.mDb,i,!1),Promise.resolve(e)}else return Promise.reject(new Error("No last_modified/sql_deleted columns in tables"))}}catch(t){let n=`CreateSyncTable: ${t.message?t.message:t}`;return Promise.reject(new Error(n))}})}getSyncDate(){return j(this,null,function*(){if(!this._isDBOpen){let e=`getSyncDate: Database ${this.dbName} `;return e+="not opened",Promise.reject(new Error(e))}try{if(!(yield me.isTableExists(this.mDb,"sync_table")))return Promise.reject(new Error("No sync_table available"));let t=yield fr.getSynchroDate(this.mDb);return Promise.resolve(t)}catch(e){let r=`getSyncDate: ${e.message?e.message:e}`;return Promise.reject(new Error(r))}})}setSyncDate(e){return j(this,null,function*(){if(!this._isDBOpen){let t=`SetSyncDate: Database ${this.dbName} `;return t+="not opened",{result:!1,message:t}}try{if(!(yield me.isTableExists(this.mDb,"sync_table")))return Promise.reject(new Error("No sync_table available"));let r=Math.round(new Date(e).getTime()/1e3),n="UPDATE sync_table SET sync_date = ";return n+=`${r} WHERE id = 1;`,(yield me.execute(this.mDb,n,!1))<0?{result:!1,message:"setSyncDate failed"}:{result:!0}}catch(t){return{result:!1,message:`setSyncDate failed: ${t.message?t.message:t}`}}})}importJson(e,t){return j(this,null,function*(){let r=0;if(this._isDBOpen)try{if(yield me.setForeignKeyConstraintsEnabled(this.mDb,!1),e.tables&&e.tables.length>0){r=yield Sr.createDatabaseSchema(this,e);let n=`Schema creation completed changes: ${r}`;if(t.emit({progress:n}),r!=-1){r+=yield Sr.createTablesData(this,e,t);let s=`Tables data creation completed changes: ${r}`;t.emit({progress:s})}}return e.views&&e.views.length>0&&(r+=yield Sr.createViews(this,e)),yield me.setForeignKeyConstraintsEnabled(this.mDb,!0),yield this.saveToStore(),Promise.resolve(r)}catch(n){let s=n.message?n.message:n;return Promise.reject(new Error(`ImportJson: ${s}`))}else return Promise.reject(new Error("ImportJson: database is closed"))})}exportJson(e,t){return j(this,null,function*(){let r={};if(r.database=this.dbName.slice(0,-9),r.version=this.version,r.encrypted=!1,r.mode=e,this._isDBOpen)try{if(yield me.isTableExists(this.mDb,"sync_table"))yield fr.setLastExportDate(this.mDb,new Date().toISOString());else if(r.mode!=="full"){let f="No sync_table available for partial mode";return Promise.reject(new Error(f))}let s=yield fr.createExportObject(this.mDb,r,t);if(Object.keys(s).length===0){let f="ExportJson: return Object is empty No data to synchronize";return Promise.reject(new Error(f))}return st.isJsonSQLite(s)?Promise.resolve(s):Promise.reject(new Error("ExportJson: retJson not valid"))}catch(n){let s=n.message?n.message:n;return Promise.reject(new Error(`ExportJson: ${s}`))}else return Promise.reject(new Error("ExportJson: database is closed"))})}deleteExportedRows(){return j(this,null,function*(){if(this._isDBOpen)try{return yield fr.delExportedRows(this.mDb),Promise.resolve()}catch(e){let t=e.message?e.message:e;return Promise.reject(new Error(`deleteExportedRows: ${t}`))}else return Promise.reject(new Error("deleteExportedRows: database is closed"))})}},Ws={exports:{}};(function(c,e){(function(t){c.exports=t()})(function(){return(function t(r,n,s){function i(l,p){if(!n[l]){if(!r[l]){var m=typeof Vt=="function"&&Vt;if(!p&&m)return m(l,!0);if(o)return o(l,!0);var v=new Error("Cannot find module '"+l+"'");throw v.code="MODULE_NOT_FOUND",v}var y=n[l]={exports:{}};r[l][0].call(y.exports,function(_){var b=r[l][1][_];return i(b||_)},y,y.exports,t,r,n,s)}return n[l].exports}for(var o=typeof Vt=="function"&&Vt,f=0;f<s.length;f++)i(s[f]);return i})({1:[function(t,r,n){(function(s){var i=s.MutationObserver||s.WebKitMutationObserver,o;if(i){var f=0,l=new i(_),p=s.document.createTextNode("");l.observe(p,{characterData:!0}),o=function(){p.data=f=++f%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var m=new s.MessageChannel;m.port1.onmessage=_,o=function(){m.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?o=function(){var T=s.document.createElement("script");T.onreadystatechange=function(){_(),T.onreadystatechange=null,T.parentNode.removeChild(T),T=null},s.document.documentElement.appendChild(T)}:o=function(){setTimeout(_,0)};var v,y=[];function _(){v=!0;for(var T,E,A=y.length;A;){for(E=y,y=[],T=-1;++T<A;)E[T]();A=y.length}v=!1}r.exports=b;function b(T){y.push(T)===1&&!v&&o()}}).call(this,typeof Wt<"u"?Wt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(t,r,n){var s=t(1);function i(){}var o={},f=["REJECTED"],l=["FULFILLED"],p=["PENDING"];r.exports=m;function m(I){if(typeof I!="function")throw new TypeError("resolver must be a function");this.state=p,this.queue=[],this.outcome=void 0,I!==i&&b(this,I)}m.prototype.catch=function(I){return this.then(null,I)},m.prototype.then=function(I,H){if(typeof I!="function"&&this.state===l||typeof H!="function"&&this.state===f)return this;var z=new this.constructor(i);if(this.state!==p){var Q=this.state===l?I:H;y(z,Q,this.outcome)}else this.queue.push(new v(z,I,H));return z};function v(I,H,z){this.promise=I,typeof H=="function"&&(this.onFulfilled=H,this.callFulfilled=this.otherCallFulfilled),typeof z=="function"&&(this.onRejected=z,this.callRejected=this.otherCallRejected)}v.prototype.callFulfilled=function(I){o.resolve(this.promise,I)},v.prototype.otherCallFulfilled=function(I){y(this.promise,this.onFulfilled,I)},v.prototype.callRejected=function(I){o.reject(this.promise,I)},v.prototype.otherCallRejected=function(I){y(this.promise,this.onRejected,I)};function y(I,H,z){s(function(){var Q;try{Q=H(z)}catch(U){return o.reject(I,U)}Q===I?o.reject(I,new TypeError("Cannot resolve promise with itself")):o.resolve(I,Q)})}o.resolve=function(I,H){var z=T(_,H);if(z.status==="error")return o.reject(I,z.value);var Q=z.value;if(Q)b(I,Q);else{I.state=l,I.outcome=H;for(var U=-1,Z=I.queue.length;++U<Z;)I.queue[U].callFulfilled(H)}return I},o.reject=function(I,H){I.state=f,I.outcome=H;for(var z=-1,Q=I.queue.length;++z<Q;)I.queue[z].callRejected(H);return I};function _(I){var H=I&&I.then;if(I&&(typeof I=="object"||typeof I=="function")&&typeof H=="function")return function(){H.apply(I,arguments)}}function b(I,H){var z=!1;function Q(D){z||(z=!0,o.reject(I,D))}function U(D){z||(z=!0,o.resolve(I,D))}function Z(){H(U,Q)}var we=T(Z);we.status==="error"&&Q(we.value)}function T(I,H){var z={};try{z.value=I(H),z.status="success"}catch(Q){z.status="error",z.value=Q}return z}m.resolve=E;function E(I){return I instanceof this?I:o.resolve(new this(i),I)}m.reject=A;function A(I){var H=new this(i);return o.reject(H,I)}m.all=C;function C(I){var H=this;if(Object.prototype.toString.call(I)!=="[object Array]")return this.reject(new TypeError("must be an array"));var z=I.length,Q=!1;if(!z)return this.resolve([]);for(var U=new Array(z),Z=0,we=-1,D=new this(i);++we<z;)G(I[we],we);return D;function G(g,ee){H.resolve(g).then(ke,function(ae){Q||(Q=!0,o.reject(D,ae))});function ke(ae){U[ee]=ae,++Z===z&&!Q&&(Q=!0,o.resolve(D,U))}}}m.race=L;function L(I){var H=this;if(Object.prototype.toString.call(I)!=="[object Array]")return this.reject(new TypeError("must be an array"));var z=I.length,Q=!1;if(!z)return this.resolve([]);for(var U=-1,Z=new this(i);++U<z;)we(I[U]);return Z;function we(D){H.resolve(D).then(function(G){Q||(Q=!0,o.resolve(Z,G))},function(G){Q||(Q=!0,o.reject(Z,G))})}}},{1:1}],3:[function(t,r,n){(function(s){typeof s.Promise!="function"&&(s.Promise=t(2))}).call(this,typeof Wt<"u"?Wt:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(t,r,n){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w};function i(w,O){if(!(w instanceof O))throw new TypeError("Cannot call a class as a function")}function o(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var f=o();function l(){try{if(!f||!f.open)return!1;var w=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),O=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!w||O)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function p(w,O){w=w||[],O=O||{};try{return new Blob(w,O)}catch(F){if(F.name!=="TypeError")throw F;for(var x=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,N=new x,$=0;$<w.length;$+=1)N.append(w[$]);return N.getBlob(O.type)}}typeof Promise>"u"&&t(3);var m=Promise;function v(w,O){O&&w.then(function(x){O(null,x)},function(x){O(x)})}function y(w,O,x){typeof O=="function"&&w.then(O),typeof x=="function"&&w.catch(x)}function _(w){return typeof w!="string"&&(console.warn(w+" used as a key, but it is not a string."),w=String(w)),w}function b(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var T="local-forage-detect-blob-support",E=void 0,A={},C=Object.prototype.toString,L="readonly",I="readwrite";function H(w){for(var O=w.length,x=new ArrayBuffer(O),N=new Uint8Array(x),$=0;$<O;$++)N[$]=w.charCodeAt($);return x}function z(w){return new m(function(O){var x=w.transaction(T,I),N=p([""]);x.objectStore(T).put(N,"key"),x.onabort=function($){$.preventDefault(),$.stopPropagation(),O(!1)},x.oncomplete=function(){var $=navigator.userAgent.match(/Chrome\/(\d+)/),F=navigator.userAgent.match(/Edge\//);O(F||!$||parseInt($[1],10)>=43)}}).catch(function(){return!1})}function Q(w){return typeof E=="boolean"?m.resolve(E):z(w).then(function(O){return E=O,E})}function U(w){var O=A[w.name],x={};x.promise=new m(function(N,$){x.resolve=N,x.reject=$}),O.deferredOperations.push(x),O.dbReady?O.dbReady=O.dbReady.then(function(){return x.promise}):O.dbReady=x.promise}function Z(w){var O=A[w.name],x=O.deferredOperations.pop();if(x)return x.resolve(),x.promise}function we(w,O){var x=A[w.name],N=x.deferredOperations.pop();if(N)return N.reject(O),N.promise}function D(w,O){return new m(function(x,N){if(A[w.name]=A[w.name]||V(),w.db)if(O)U(w),w.db.close();else return x(w.db);var $=[w.name];O&&$.push(w.version);var F=f.open.apply(f,$);O&&(F.onupgradeneeded=function(X){var ie=F.result;try{ie.createObjectStore(w.storeName),X.oldVersion<=1&&ie.createObjectStore(T)}catch(ce){if(ce.name==="ConstraintError")console.warn('The database "'+w.name+'" has been upgraded from version '+X.oldVersion+" to version "+X.newVersion+', but the storage "'+w.storeName+'" already exists.');else throw ce}}),F.onerror=function(X){X.preventDefault(),N(F.error)},F.onsuccess=function(){var X=F.result;X.onversionchange=function(ie){ie.target.close()},x(X),Z(w)}})}function G(w){return D(w,!1)}function g(w){return D(w,!0)}function ee(w,O){if(!w.db)return!0;var x=!w.db.objectStoreNames.contains(w.storeName),N=w.version<w.db.version,$=w.version>w.db.version;if(N&&(w.version!==O&&console.warn('The database "'+w.name+`" can't be downgraded from version `+w.db.version+" to version "+w.version+"."),w.version=w.db.version),$||x){if(x){var F=w.db.version+1;F>w.version&&(w.version=F)}return!0}return!1}function ke(w){return new m(function(O,x){var N=new FileReader;N.onerror=x,N.onloadend=function($){var F=btoa($.target.result||"");O({__local_forage_encoded_blob:!0,data:F,type:w.type})},N.readAsBinaryString(w)})}function ae(w){var O=H(atob(w.data));return p([O],{type:w.type})}function je(w){return w&&w.__local_forage_encoded_blob}function ue(w){var O=this,x=O._initReady().then(function(){var N=A[O._dbInfo.name];if(N&&N.dbReady)return N.dbReady});return y(x,w,w),x}function Pe(w){U(w);for(var O=A[w.name],x=O.forages,N=0;N<x.length;N++){var $=x[N];$._dbInfo.db&&($._dbInfo.db.close(),$._dbInfo.db=null)}return w.db=null,G(w).then(function(F){return w.db=F,ee(w)?g(w):F}).then(function(F){w.db=O.db=F;for(var X=0;X<x.length;X++)x[X]._dbInfo.db=F}).catch(function(F){throw we(w,F),F})}function W(w,O,x,N){N===void 0&&(N=1);try{var $=w.db.transaction(w.storeName,O);x(null,$)}catch(F){if(N>0&&(!w.db||F.name==="InvalidStateError"||F.name==="NotFoundError"))return m.resolve().then(function(){if(!w.db||F.name==="NotFoundError"&&!w.db.objectStoreNames.contains(w.storeName)&&w.version<=w.db.version)return w.db&&(w.version=w.db.version+1),g(w)}).then(function(){return Pe(w).then(function(){W(w,O,x,N-1)})}).catch(x);x(F)}}function V(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Ee(w){var O=this,x={db:null};if(w)for(var N in w)x[N]=w[N];var $=A[x.name];$||($=V(),A[x.name]=$),$.forages.push(O),O._initReady||(O._initReady=O.ready,O.ready=ue);var F=[];function X(){return m.resolve()}for(var ie=0;ie<$.forages.length;ie++){var ce=$.forages[ie];ce!==O&&F.push(ce._initReady().catch(X))}var le=$.forages.slice(0);return m.all(F).then(function(){return x.db=$.db,G(x)}).then(function(de){return x.db=de,ee(x,O._defaultConfig.version)?g(x):de}).then(function(de){x.db=$.db=de,O._dbInfo=x;for(var _e=0;_e<le.length;_e++){var Re=le[_e];Re!==O&&(Re._dbInfo.db=x.db,Re._dbInfo.version=x.version)}})}function be(w,O){var x=this;w=_(w);var N=new m(function($,F){x.ready().then(function(){W(x._dbInfo,L,function(X,ie){if(X)return F(X);try{var ce=ie.objectStore(x._dbInfo.storeName),le=ce.get(w);le.onsuccess=function(){var de=le.result;de===void 0&&(de=null),je(de)&&(de=ae(de)),$(de)},le.onerror=function(){F(le.error)}}catch(de){F(de)}})}).catch(F)});return v(N,O),N}function pe(w,O){var x=this,N=new m(function($,F){x.ready().then(function(){W(x._dbInfo,L,function(X,ie){if(X)return F(X);try{var ce=ie.objectStore(x._dbInfo.storeName),le=ce.openCursor(),de=1;le.onsuccess=function(){var _e=le.result;if(_e){var Re=_e.value;je(Re)&&(Re=ae(Re));var ze=w(Re,_e.key,de++);ze!==void 0?$(ze):_e.continue()}else $()},le.onerror=function(){F(le.error)}}catch(_e){F(_e)}})}).catch(F)});return v(N,O),N}function We(w,O,x){var N=this;w=_(w);var $=new m(function(F,X){var ie;N.ready().then(function(){return ie=N._dbInfo,C.call(O)==="[object Blob]"?Q(ie.db).then(function(ce){return ce?O:ke(O)}):O}).then(function(ce){W(N._dbInfo,I,function(le,de){if(le)return X(le);try{var _e=de.objectStore(N._dbInfo.storeName);ce===null&&(ce=void 0);var Re=_e.put(ce,w);de.oncomplete=function(){ce===void 0&&(ce=null),F(ce)},de.onabort=de.onerror=function(){var ze=Re.error?Re.error:Re.transaction.error;X(ze)}}catch(ze){X(ze)}})}).catch(X)});return v($,x),$}function Je(w,O){var x=this;w=_(w);var N=new m(function($,F){x.ready().then(function(){W(x._dbInfo,I,function(X,ie){if(X)return F(X);try{var ce=ie.objectStore(x._dbInfo.storeName),le=ce.delete(w);ie.oncomplete=function(){$()},ie.onerror=function(){F(le.error)},ie.onabort=function(){var de=le.error?le.error:le.transaction.error;F(de)}}catch(de){F(de)}})}).catch(F)});return v(N,O),N}function Ce(w){var O=this,x=new m(function(N,$){O.ready().then(function(){W(O._dbInfo,I,function(F,X){if(F)return $(F);try{var ie=X.objectStore(O._dbInfo.storeName),ce=ie.clear();X.oncomplete=function(){N()},X.onabort=X.onerror=function(){var le=ce.error?ce.error:ce.transaction.error;$(le)}}catch(le){$(le)}})}).catch($)});return v(x,w),x}function $e(w){var O=this,x=new m(function(N,$){O.ready().then(function(){W(O._dbInfo,L,function(F,X){if(F)return $(F);try{var ie=X.objectStore(O._dbInfo.storeName),ce=ie.count();ce.onsuccess=function(){N(ce.result)},ce.onerror=function(){$(ce.error)}}catch(le){$(le)}})}).catch($)});return v(x,w),x}function Ye(w,O){var x=this,N=new m(function($,F){if(w<0){$(null);return}x.ready().then(function(){W(x._dbInfo,L,function(X,ie){if(X)return F(X);try{var ce=ie.objectStore(x._dbInfo.storeName),le=!1,de=ce.openKeyCursor();de.onsuccess=function(){var _e=de.result;if(!_e){$(null);return}w===0||le?$(_e.key):(le=!0,_e.advance(w))},de.onerror=function(){F(de.error)}}catch(_e){F(_e)}})}).catch(F)});return v(N,O),N}function ge(w){var O=this,x=new m(function(N,$){O.ready().then(function(){W(O._dbInfo,L,function(F,X){if(F)return $(F);try{var ie=X.objectStore(O._dbInfo.storeName),ce=ie.openKeyCursor(),le=[];ce.onsuccess=function(){var de=ce.result;if(!de){N(le);return}le.push(de.key),de.continue()},ce.onerror=function(){$(ce.error)}}catch(de){$(de)}})}).catch($)});return v(x,w),x}function Be(w,O){O=b.apply(this,arguments);var x=this.config();w=typeof w!="function"&&w||{},w.name||(w.name=w.name||x.name,w.storeName=w.storeName||x.storeName);var N=this,$;if(!w.name)$=m.reject("Invalid arguments");else{var F=w.name===x.name&&N._dbInfo.db,X=F?m.resolve(N._dbInfo.db):G(w).then(function(ie){var ce=A[w.name],le=ce.forages;ce.db=ie;for(var de=0;de<le.length;de++)le[de]._dbInfo.db=ie;return ie});w.storeName?$=X.then(function(ie){if(ie.objectStoreNames.contains(w.storeName)){var ce=ie.version+1;U(w);var le=A[w.name],de=le.forages;ie.close();for(var _e=0;_e<de.length;_e++){var Re=de[_e];Re._dbInfo.db=null,Re._dbInfo.version=ce}var ze=new m(function(Me,He){var Ke=f.open(w.name,ce);Ke.onerror=function(nt){var kt=Ke.result;kt.close(),He(nt)},Ke.onupgradeneeded=function(){var nt=Ke.result;nt.deleteObjectStore(w.storeName)},Ke.onsuccess=function(){var nt=Ke.result;nt.close(),Me(nt)}});return ze.then(function(Me){le.db=Me;for(var He=0;He<de.length;He++){var Ke=de[He];Ke._dbInfo.db=Me,Z(Ke._dbInfo)}}).catch(function(Me){throw(we(w,Me)||m.resolve()).catch(function(){}),Me})}}):$=X.then(function(ie){U(w);var ce=A[w.name],le=ce.forages;ie.close();for(var de=0;de<le.length;de++){var _e=le[de];_e._dbInfo.db=null}var Re=new m(function(ze,Me){var He=f.deleteDatabase(w.name);He.onerror=function(){var Ke=He.result;Ke&&Ke.close(),Me(He.error)},He.onblocked=function(){console.warn('dropInstance blocked for database "'+w.name+'" until all open connections are closed')},He.onsuccess=function(){var Ke=He.result;Ke&&Ke.close(),ze(Ke)}});return Re.then(function(ze){ce.db=ze;for(var Me=0;Me<le.length;Me++){var He=le[Me];Z(He._dbInfo)}}).catch(function(ze){throw(we(w,ze)||m.resolve()).catch(function(){}),ze})})}return v($,O),$}var tt={_driver:"asyncStorage",_initStorage:Ee,_support:l(),iterate:pe,getItem:be,setItem:We,removeItem:Je,clear:Ce,length:$e,key:Ye,keys:ge,dropInstance:Be};function d(){return typeof openDatabase=="function"}var J="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",K="~~local_forage_type~",P=/^~~local_forage_type~([^~]+)~/,k="__lfsc__:",B=k.length,te="arbf",se="blob",q="si08",he="ui08",ve="uic8",fe="si16",Se="si32",Le="ur16",Ae="ui32",Qe="fl32",gt="fl64",it=B+te.length,Et=Object.prototype.toString;function Ve(w){var O=w.length*.75,x=w.length,N,$=0,F,X,ie,ce;w[w.length-1]==="="&&(O--,w[w.length-2]==="="&&O--);var le=new ArrayBuffer(O),de=new Uint8Array(le);for(N=0;N<x;N+=4)F=J.indexOf(w[N]),X=J.indexOf(w[N+1]),ie=J.indexOf(w[N+2]),ce=J.indexOf(w[N+3]),de[$++]=F<<2|X>>4,de[$++]=(X&15)<<4|ie>>2,de[$++]=(ie&3)<<6|ce&63;return le}function St(w){var O=new Uint8Array(w),x="",N;for(N=0;N<O.length;N+=3)x+=J[O[N]>>2],x+=J[(O[N]&3)<<4|O[N+1]>>4],x+=J[(O[N+1]&15)<<2|O[N+2]>>6],x+=J[O[N+2]&63];return O.length%3===2?x=x.substring(0,x.length-1)+"=":O.length%3===1&&(x=x.substring(0,x.length-2)+"=="),x}function Nt(w,O){var x="";if(w&&(x=Et.call(w)),w&&(x==="[object ArrayBuffer]"||w.buffer&&Et.call(w.buffer)==="[object ArrayBuffer]")){var N,$=k;w instanceof ArrayBuffer?(N=w,$+=te):(N=w.buffer,x==="[object Int8Array]"?$+=q:x==="[object Uint8Array]"?$+=he:x==="[object Uint8ClampedArray]"?$+=ve:x==="[object Int16Array]"?$+=fe:x==="[object Uint16Array]"?$+=Le:x==="[object Int32Array]"?$+=Se:x==="[object Uint32Array]"?$+=Ae:x==="[object Float32Array]"?$+=Qe:x==="[object Float64Array]"?$+=gt:O(new Error("Failed to get type for BinaryArray"))),O($+St(N))}else if(x==="[object Blob]"){var F=new FileReader;F.onload=function(){var X=K+w.type+"~"+St(this.result);O(k+se+X)},F.readAsArrayBuffer(w)}else try{O(JSON.stringify(w))}catch(X){console.error("Couldn't convert value into a JSON string: ",w),O(null,X)}}function De(w){if(w.substring(0,B)!==k)return JSON.parse(w);var O=w.substring(it),x=w.substring(B,it),N;if(x===se&&P.test(O)){var $=O.match(P);N=$[1],O=O.substring($[0].length)}var F=Ve(O);switch(x){case te:return F;case se:return p([F],{type:N});case q:return new Int8Array(F);case he:return new Uint8Array(F);case ve:return new Uint8ClampedArray(F);case fe:return new Int16Array(F);case Le:return new Uint16Array(F);case Se:return new Int32Array(F);case Ae:return new Uint32Array(F);case Qe:return new Float32Array(F);case gt:return new Float64Array(F);default:throw new Error("Unkown type: "+x)}}var At={serialize:Nt,deserialize:De,stringToBuffer:Ve,bufferToString:St};function Ct(w,O,x,N){w.executeSql("CREATE TABLE IF NOT EXISTS "+O.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],x,N)}function tr(w){var O=this,x={db:null};if(w)for(var N in w)x[N]=typeof w[N]!="string"?w[N].toString():w[N];var $=new m(function(F,X){try{x.db=openDatabase(x.name,String(x.version),x.description,x.size)}catch(ie){return X(ie)}x.db.transaction(function(ie){Ct(ie,x,function(){O._dbInfo=x,F()},function(ce,le){X(le)})},X)});return x.serializer=At,$}function at(w,O,x,N,$,F){w.executeSql(x,N,$,function(X,ie){ie.code===ie.SYNTAX_ERR?X.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[O.storeName],function(ce,le){le.rows.length?F(ce,ie):Ct(ce,O,function(){ce.executeSql(x,N,$,F)},F)},F):F(X,ie)},F)}function rr(w,O){var x=this;w=_(w);var N=new m(function($,F){x.ready().then(function(){var X=x._dbInfo;X.db.transaction(function(ie){at(ie,X,"SELECT * FROM "+X.storeName+" WHERE key = ? LIMIT 1",[w],function(ce,le){var de=le.rows.length?le.rows.item(0).value:null;de&&(de=X.serializer.deserialize(de)),$(de)},function(ce,le){F(le)})})}).catch(F)});return v(N,O),N}function ot(w,O){var x=this,N=new m(function($,F){x.ready().then(function(){var X=x._dbInfo;X.db.transaction(function(ie){at(ie,X,"SELECT * FROM "+X.storeName,[],function(ce,le){for(var de=le.rows,_e=de.length,Re=0;Re<_e;Re++){var ze=de.item(Re),Me=ze.value;if(Me&&(Me=X.serializer.deserialize(Me)),Me=w(Me,ze.key,Re+1),Me!==void 0){$(Me);return}}$()},function(ce,le){F(le)})})}).catch(F)});return v(N,O),N}function Tt(w,O,x,N){var $=this;w=_(w);var F=new m(function(X,ie){$.ready().then(function(){O===void 0&&(O=null);var ce=O,le=$._dbInfo;le.serializer.serialize(O,function(de,_e){_e?ie(_e):le.db.transaction(function(Re){at(Re,le,"INSERT OR REPLACE INTO "+le.storeName+" (key, value) VALUES (?, ?)",[w,de],function(){X(ce)},function(ze,Me){ie(Me)})},function(Re){if(Re.code===Re.QUOTA_ERR){if(N>0){X(Tt.apply($,[w,ce,x,N-1]));return}ie(Re)}})})}).catch(ie)});return v(F,x),F}function ye(w,O,x){return Tt.apply(this,[w,O,x,1])}function dr(w,O){var x=this;w=_(w);var N=new m(function($,F){x.ready().then(function(){var X=x._dbInfo;X.db.transaction(function(ie){at(ie,X,"DELETE FROM "+X.storeName+" WHERE key = ?",[w],function(){$()},function(ce,le){F(le)})})}).catch(F)});return v(N,O),N}function Qr(w){var O=this,x=new m(function(N,$){O.ready().then(function(){var F=O._dbInfo;F.db.transaction(function(X){at(X,F,"DELETE FROM "+F.storeName,[],function(){N()},function(ie,ce){$(ce)})})}).catch($)});return v(x,w),x}function Xr(w){var O=this,x=new m(function(N,$){O.ready().then(function(){var F=O._dbInfo;F.db.transaction(function(X){at(X,F,"SELECT COUNT(key) as c FROM "+F.storeName,[],function(ie,ce){var le=ce.rows.item(0).c;N(le)},function(ie,ce){$(ce)})})}).catch($)});return v(x,w),x}function ct(w,O){var x=this,N=new m(function($,F){x.ready().then(function(){var X=x._dbInfo;X.db.transaction(function(ie){at(ie,X,"SELECT key FROM "+X.storeName+" WHERE id = ? LIMIT 1",[w+1],function(ce,le){var de=le.rows.length?le.rows.item(0).key:null;$(de)},function(ce,le){F(le)})})}).catch(F)});return v(N,O),N}function nr(w){var O=this,x=new m(function(N,$){O.ready().then(function(){var F=O._dbInfo;F.db.transaction(function(X){at(X,F,"SELECT key FROM "+F.storeName,[],function(ie,ce){for(var le=[],de=0;de<ce.rows.length;de++)le.push(ce.rows.item(de).key);N(le)},function(ie,ce){$(ce)})})}).catch($)});return v(x,w),x}function mr(w){return new m(function(O,x){w.transaction(function(N){N.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function($,F){for(var X=[],ie=0;ie<F.rows.length;ie++)X.push(F.rows.item(ie).name);O({db:w,storeNames:X})},function($,F){x(F)})},function(N){x(N)})})}function xr(w,O){O=b.apply(this,arguments);var x=this.config();w=typeof w!="function"&&w||{},w.name||(w.name=w.name||x.name,w.storeName=w.storeName||x.storeName);var N=this,$;return w.name?$=new m(function(F){var X;w.name===x.name?X=N._dbInfo.db:X=openDatabase(w.name,"","",0),w.storeName?F({db:X,storeNames:[w.storeName]}):F(mr(X))}).then(function(F){return new m(function(X,ie){F.db.transaction(function(ce){function le(ze){return new m(function(Me,He){ce.executeSql("DROP TABLE IF EXISTS "+ze,[],function(){Me()},function(Ke,nt){He(nt)})})}for(var de=[],_e=0,Re=F.storeNames.length;_e<Re;_e++)de.push(le(F.storeNames[_e]));m.all(de).then(function(){X()}).catch(function(ze){ie(ze)})},function(ce){ie(ce)})})}):$=m.reject("Invalid arguments"),v($,O),$}var It={_driver:"webSQLStorage",_initStorage:tr,_support:d(),iterate:ot,getItem:rr,setItem:ye,removeItem:dr,clear:Qr,length:Xr,key:ct,keys:nr,dropInstance:xr};function kr(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function lt(w,O){var x=w.name+"/";return w.storeName!==O.storeName&&(x+=w.storeName+"/"),x}function Pr(){var w="_localforage_support_test";try{return localStorage.setItem(w,!0),localStorage.removeItem(w),!1}catch{return!0}}function Ft(){return!Pr()||localStorage.length>0}function Dr(w){var O=this,x={};if(w)for(var N in w)x[N]=w[N];return x.keyPrefix=lt(w,O._defaultConfig),Ft()?(O._dbInfo=x,x.serializer=At,m.resolve()):m.reject()}function Ar(w){var O=this,x=O.ready().then(function(){for(var N=O._dbInfo.keyPrefix,$=localStorage.length-1;$>=0;$--){var F=localStorage.key($);F.indexOf(N)===0&&localStorage.removeItem(F)}});return v(x,w),x}function rt(w,O){var x=this;w=_(w);var N=x.ready().then(function(){var $=x._dbInfo,F=localStorage.getItem($.keyPrefix+w);return F&&(F=$.serializer.deserialize(F)),F});return v(N,O),N}function Ir(w,O){var x=this,N=x.ready().then(function(){for(var $=x._dbInfo,F=$.keyPrefix,X=F.length,ie=localStorage.length,ce=1,le=0;le<ie;le++){var de=localStorage.key(le);if(de.indexOf(F)===0){var _e=localStorage.getItem(de);if(_e&&(_e=$.serializer.deserialize(_e)),_e=w(_e,de.substring(X),ce++),_e!==void 0)return _e}}});return v(N,O),N}function en(w,O){var x=this,N=x.ready().then(function(){var $=x._dbInfo,F;try{F=localStorage.key(w)}catch{F=null}return F&&(F=F.substring($.keyPrefix.length)),F});return v(N,O),N}function tn(w){var O=this,x=O.ready().then(function(){for(var N=O._dbInfo,$=localStorage.length,F=[],X=0;X<$;X++){var ie=localStorage.key(X);ie.indexOf(N.keyPrefix)===0&&F.push(ie.substring(N.keyPrefix.length))}return F});return v(x,w),x}function pr(w){var O=this,x=O.keys().then(function(N){return N.length});return v(x,w),x}function Or(w,O){var x=this;w=_(w);var N=x.ready().then(function(){var $=x._dbInfo;localStorage.removeItem($.keyPrefix+w)});return v(N,O),N}function sr(w,O,x){var N=this;w=_(w);var $=N.ready().then(function(){O===void 0&&(O=null);var F=O;return new m(function(X,ie){var ce=N._dbInfo;ce.serializer.serialize(O,function(le,de){if(de)ie(de);else try{localStorage.setItem(ce.keyPrefix+w,le),X(F)}catch(_e){(_e.name==="QuotaExceededError"||_e.name==="NS_ERROR_DOM_QUOTA_REACHED")&&ie(_e),ie(_e)}})})});return v($,x),$}function mt(w,O){if(O=b.apply(this,arguments),w=typeof w!="function"&&w||{},!w.name){var x=this.config();w.name=w.name||x.name,w.storeName=w.storeName||x.storeName}var N=this,$;return w.name?$=new m(function(F){w.storeName?F(lt(w,N._defaultConfig)):F(w.name+"/")}).then(function(F){for(var X=localStorage.length-1;X>=0;X--){var ie=localStorage.key(X);ie.indexOf(F)===0&&localStorage.removeItem(ie)}}):$=m.reject("Invalid arguments"),v($,O),$}var ir={_driver:"localStorageWrapper",_initStorage:Dr,_support:kr(),iterate:Ir,getItem:rt,setItem:sr,removeItem:Or,clear:Ar,length:pr,key:en,keys:tn,dropInstance:mt},yr=function(O,x){return O===x||typeof O=="number"&&typeof x=="number"&&isNaN(O)&&isNaN(x)},jr=function(O,x){for(var N=O.length,$=0;$<N;){if(yr(O[$],x))return!0;$++}return!1},gr=Array.isArray||function(w){return Object.prototype.toString.call(w)==="[object Array]"},Bt={},$t={},Ot={INDEXEDDB:tt,WEBSQL:It,LOCALSTORAGE:ir},ar=[Ot.INDEXEDDB._driver,Ot.WEBSQL._driver,Ot.LOCALSTORAGE._driver],Gt=["dropInstance"],xt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Gt),vr={description:"",driver:ar.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Rr(w,O){w[O]=function(){var x=arguments;return w.ready().then(function(){return w[O].apply(w,x)})}}function or(){for(var w=1;w<arguments.length;w++){var O=arguments[w];if(O)for(var x in O)O.hasOwnProperty(x)&&(gr(O[x])?arguments[0][x]=O[x].slice():arguments[0][x]=O[x])}return arguments[0]}var Nr=(function(){function w(O){i(this,w);for(var x in Ot)if(Ot.hasOwnProperty(x)){var N=Ot[x],$=N._driver;this[x]=$,Bt[$]||this.defineDriver(N)}this._defaultConfig=or({},vr),this._config=or({},this._defaultConfig,O),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return w.prototype.config=function(x){if((typeof x>"u"?"undefined":s(x))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var N in x){if(N==="storeName"&&(x[N]=x[N].replace(/\W/g,"_")),N==="version"&&typeof x[N]!="number")return new Error("Database version must be a number.");this._config[N]=x[N]}return"driver"in x&&x.driver?this.setDriver(this._config.driver):!0}else return typeof x=="string"?this._config[x]:this._config},w.prototype.defineDriver=function(x,N,$){var F=new m(function(X,ie){try{var ce=x._driver,le=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!x._driver){ie(le);return}for(var de=xt.concat("_initStorage"),_e=0,Re=de.length;_e<Re;_e++){var ze=de[_e],Me=!jr(Gt,ze);if((Me||x[ze])&&typeof x[ze]!="function"){ie(le);return}}var He=function(){for(var kt=function(cr){return function(){var nn=new Error("Method "+cr+" is not implemented by the current driver"),xe=m.reject(nn);return v(xe,arguments[arguments.length-1]),xe}},vt=0,br=Gt.length;vt<br;vt++){var ht=Gt[vt];x[ht]||(x[ht]=kt(ht))}};He();var Ke=function(kt){Bt[ce]&&console.info("Redefining LocalForage driver: "+ce),Bt[ce]=x,$t[ce]=kt,X()};"_support"in x?x._support&&typeof x._support=="function"?x._support().then(Ke,ie):Ke(!!x._support):Ke(!0)}catch(nt){ie(nt)}});return y(F,N,$),F},w.prototype.driver=function(){return this._driver||null},w.prototype.getDriver=function(x,N,$){var F=Bt[x]?m.resolve(Bt[x]):m.reject(new Error("Driver not found."));return y(F,N,$),F},w.prototype.getSerializer=function(x){var N=m.resolve(At);return y(N,x),N},w.prototype.ready=function(x){var N=this,$=N._driverSet.then(function(){return N._ready===null&&(N._ready=N._initDriver()),N._ready});return y($,x,x),$},w.prototype.setDriver=function(x,N,$){var F=this;gr(x)||(x=[x]);var X=this._getSupportedDrivers(x);function ie(){F._config.driver=F.driver()}function ce(_e){return F._extend(_e),ie(),F._ready=F._initStorage(F._config),F._ready}function le(_e){return function(){var Re=0;function ze(){for(;Re<_e.length;){var Me=_e[Re];return Re++,F._dbInfo=null,F._ready=null,F.getDriver(Me).then(ce).catch(ze)}ie();var He=new Error("No available storage method found.");return F._driverSet=m.reject(He),F._driverSet}return ze()}}var de=this._driverSet!==null?this._driverSet.catch(function(){return m.resolve()}):m.resolve();return this._driverSet=de.then(function(){var _e=X[0];return F._dbInfo=null,F._ready=null,F.getDriver(_e).then(function(Re){F._driver=Re._driver,ie(),F._wrapLibraryMethodsWithReady(),F._initDriver=le(X)})}).catch(function(){ie();var _e=new Error("No available storage method found.");return F._driverSet=m.reject(_e),F._driverSet}),y(this._driverSet,N,$),this._driverSet},w.prototype.supports=function(x){return!!$t[x]},w.prototype._extend=function(x){or(this,x)},w.prototype._getSupportedDrivers=function(x){for(var N=[],$=0,F=x.length;$<F;$++){var X=x[$];this.supports(X)&&N.push(X)}return N},w.prototype._wrapLibraryMethodsWithReady=function(){for(var x=0,N=xt.length;x<N;x++)Rr(this,xt[x])},w.prototype.createInstance=function(x){return new w(x)},w})(),rn=new Nr;r.exports=rn},{3:3}]},{},[4])(4)})})(Ws);var ms=Ws.exports,Vs={exports:{}};(function(c,e){(function(t){c.exports=t()})(function(){return(function t(r,n,s){function i(l,p){if(!n[l]){if(!r[l]){var m=typeof Vt=="function"&&Vt;if(!p&&m)return m(l,!0);if(o)return o(l,!0);var v=new Error("Cannot find module '"+l+"'");throw v.code="MODULE_NOT_FOUND",v}var y=n[l]={exports:{}};r[l][0].call(y.exports,function(_){var b=r[l][1][_];return i(b||_)},y,y.exports,t,r,n,s)}return n[l].exports}for(var o=typeof Vt=="function"&&Vt,f=0;f<s.length;f++)i(s[f]);return i})({1:[function(t,r,n){var s=t("./utils"),i=t("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(f){for(var l,p,m,v,y,_,b,T=[],E=0,A=f.length,C=A,L=s.getTypeOf(f)!=="string";E<f.length;)C=A-E,m=L?(l=f[E++],p=E<A?f[E++]:0,E<A?f[E++]:0):(l=f.charCodeAt(E++),p=E<A?f.charCodeAt(E++):0,E<A?f.charCodeAt(E++):0),v=l>>2,y=(3&l)<<4|p>>4,_=1<C?(15&p)<<2|m>>6:64,b=2<C?63&m:64,T.push(o.charAt(v)+o.charAt(y)+o.charAt(_)+o.charAt(b));return T.join("")},n.decode=function(f){var l,p,m,v,y,_,b=0,T=0,E="data:";if(f.substr(0,E.length)===E)throw new Error("Invalid base64 input, it looks like a data url.");var A,C=3*(f=f.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(f.charAt(f.length-1)===o.charAt(64)&&C--,f.charAt(f.length-2)===o.charAt(64)&&C--,C%1!=0)throw new Error("Invalid base64 input, bad content length.");for(A=i.uint8array?new Uint8Array(0|C):new Array(0|C);b<f.length;)l=o.indexOf(f.charAt(b++))<<2|(v=o.indexOf(f.charAt(b++)))>>4,p=(15&v)<<4|(y=o.indexOf(f.charAt(b++)))>>2,m=(3&y)<<6|(_=o.indexOf(f.charAt(b++))),A[T++]=l,y!==64&&(A[T++]=p),_!==64&&(A[T++]=m);return A}},{"./support":30,"./utils":32}],2:[function(t,r,n){var s=t("./external"),i=t("./stream/DataWorker"),o=t("./stream/Crc32Probe"),f=t("./stream/DataLengthProbe");function l(p,m,v,y,_){this.compressedSize=p,this.uncompressedSize=m,this.crc32=v,this.compression=y,this.compressedContent=_}l.prototype={getContentWorker:function(){var p=new i(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new f("data_length")),m=this;return p.on("end",function(){if(this.streamInfo.data_length!==m.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),p},getCompressedWorker:function(){return new i(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},l.createWorkerFrom=function(p,m,v){return p.pipe(new o).pipe(new f("uncompressedSize")).pipe(m.compressWorker(v)).pipe(new f("compressedSize")).withStreamInfo("compression",m)},r.exports=l},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,r,n){var s=t("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},n.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,r,n){var s=t("./utils"),i=(function(){for(var o,f=[],l=0;l<256;l++){o=l;for(var p=0;p<8;p++)o=1&o?3988292384^o>>>1:o>>>1;f[l]=o}return f})();r.exports=function(o,f){return o!==void 0&&o.length?s.getTypeOf(o)!=="string"?(function(l,p,m,v){var y=i,_=v+m;l^=-1;for(var b=v;b<_;b++)l=l>>>8^y[255&(l^p[b])];return-1^l})(0|f,o,o.length,0):(function(l,p,m,v){var y=i,_=v+m;l^=-1;for(var b=v;b<_;b++)l=l>>>8^y[255&(l^p.charCodeAt(b))];return-1^l})(0|f,o,o.length,0):0}},{"./utils":32}],5:[function(t,r,n){n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(t,r,n){var s=null;s=typeof Promise<"u"?Promise:t("lie"),r.exports={Promise:s}},{lie:37}],7:[function(t,r,n){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",i=t("pako"),o=t("./utils"),f=t("./stream/GenericWorker"),l=s?"uint8array":"array";function p(m,v){f.call(this,"FlateWorker/"+m),this._pako=null,this._pakoAction=m,this._pakoOptions=v,this.meta={}}n.magic="\b\0",o.inherits(p,f),p.prototype.processChunk=function(m){this.meta=m.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(l,m.data),!1)},p.prototype.flush=function(){f.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},p.prototype.cleanUp=function(){f.prototype.cleanUp.call(this),this._pako=null},p.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var m=this;this._pako.onData=function(v){m.push({data:v,meta:m.meta})}},n.compressWorker=function(m){return new p("Deflate",m)},n.uncompressWorker=function(){return new p("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,r,n){function s(y,_){var b,T="";for(b=0;b<_;b++)T+=String.fromCharCode(255&y),y>>>=8;return T}function i(y,_,b,T,E,A){var C,L,I=y.file,H=y.compression,z=A!==l.utf8encode,Q=o.transformTo("string",A(I.name)),U=o.transformTo("string",l.utf8encode(I.name)),Z=I.comment,we=o.transformTo("string",A(Z)),D=o.transformTo("string",l.utf8encode(Z)),G=U.length!==I.name.length,g=D.length!==Z.length,ee="",ke="",ae="",je=I.dir,ue=I.date,Pe={crc32:0,compressedSize:0,uncompressedSize:0};_&&!b||(Pe.crc32=y.crc32,Pe.compressedSize=y.compressedSize,Pe.uncompressedSize=y.uncompressedSize);var W=0;_&&(W|=8),z||!G&&!g||(W|=2048);var V=0,Ee=0;je&&(V|=16),E==="UNIX"?(Ee=798,V|=(function(pe,We){var Je=pe;return pe||(Je=We?16893:33204),(65535&Je)<<16})(I.unixPermissions,je)):(Ee=20,V|=(function(pe){return 63&(pe||0)})(I.dosPermissions)),C=ue.getUTCHours(),C<<=6,C|=ue.getUTCMinutes(),C<<=5,C|=ue.getUTCSeconds()/2,L=ue.getUTCFullYear()-1980,L<<=4,L|=ue.getUTCMonth()+1,L<<=5,L|=ue.getUTCDate(),G&&(ke=s(1,1)+s(p(Q),4)+U,ee+="up"+s(ke.length,2)+ke),g&&(ae=s(1,1)+s(p(we),4)+D,ee+="uc"+s(ae.length,2)+ae);var be="";return be+=`
\0`,be+=s(W,2),be+=H.magic,be+=s(C,2),be+=s(L,2),be+=s(Pe.crc32,4),be+=s(Pe.compressedSize,4),be+=s(Pe.uncompressedSize,4),be+=s(Q.length,2),be+=s(ee.length,2),{fileRecord:m.LOCAL_FILE_HEADER+be+Q+ee,dirRecord:m.CENTRAL_FILE_HEADER+s(Ee,2)+be+s(we.length,2)+"\0\0\0\0"+s(V,4)+s(T,4)+Q+ee+we}}var o=t("../utils"),f=t("../stream/GenericWorker"),l=t("../utf8"),p=t("../crc32"),m=t("../signature");function v(y,_,b,T){f.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=_,this.zipPlatform=b,this.encodeFileName=T,this.streamFiles=y,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(v,f),v.prototype.push=function(y){var _=y.meta.percent||0,b=this.entriesCount,T=this._sources.length;this.accumulate?this.contentBuffer.push(y):(this.bytesWritten+=y.data.length,f.prototype.push.call(this,{data:y.data,meta:{currentFile:this.currentFile,percent:b?(_+100*(b-T-1))/b:100}}))},v.prototype.openedSource=function(y){this.currentSourceOffset=this.bytesWritten,this.currentFile=y.file.name;var _=this.streamFiles&&!y.file.dir;if(_){var b=i(y,_,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:b.fileRecord,meta:{percent:0}})}else this.accumulate=!0},v.prototype.closedSource=function(y){this.accumulate=!1;var _=this.streamFiles&&!y.file.dir,b=i(y,_,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(b.dirRecord),_)this.push({data:(function(T){return m.DATA_DESCRIPTOR+s(T.crc32,4)+s(T.compressedSize,4)+s(T.uncompressedSize,4)})(y),meta:{percent:100}});else for(this.push({data:b.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},v.prototype.flush=function(){for(var y=this.bytesWritten,_=0;_<this.dirRecords.length;_++)this.push({data:this.dirRecords[_],meta:{percent:100}});var b=this.bytesWritten-y,T=(function(E,A,C,L,I){var H=o.transformTo("string",I(L));return m.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(E,2)+s(E,2)+s(A,4)+s(C,4)+s(H.length,2)+H})(this.dirRecords.length,b,y,this.zipComment,this.encodeFileName);this.push({data:T,meta:{percent:100}})},v.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},v.prototype.registerPrevious=function(y){this._sources.push(y);var _=this;return y.on("data",function(b){_.processChunk(b)}),y.on("end",function(){_.closedSource(_.previous.streamInfo),_._sources.length?_.prepareNextSource():_.end()}),y.on("error",function(b){_.error(b)}),this},v.prototype.resume=function(){return!!f.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},v.prototype.error=function(y){var _=this._sources;if(!f.prototype.error.call(this,y))return!1;for(var b=0;b<_.length;b++)try{_[b].error(y)}catch{}return!0},v.prototype.lock=function(){f.prototype.lock.call(this);for(var y=this._sources,_=0;_<y.length;_++)y[_].lock()},r.exports=v},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,r,n){var s=t("../compressions"),i=t("./ZipFileWorker");n.generateWorker=function(o,f,l){var p=new i(f.streamFiles,l,f.platform,f.encodeFileName),m=0;try{o.forEach(function(v,y){m++;var _=(function(A,C){var L=A||C,I=s[L];if(!I)throw new Error(L+" is not a valid compression method !");return I})(y.options.compression,f.compression),b=y.options.compressionOptions||f.compressionOptions||{},T=y.dir,E=y.date;y._compressWorker(_,b).withStreamInfo("file",{name:v,dir:T,date:E,comment:y.comment||"",unixPermissions:y.unixPermissions,dosPermissions:y.dosPermissions}).pipe(p)}),p.entriesCount=m}catch(v){p.error(v)}return p}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,r,n){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var i=new s;for(var o in this)typeof this[o]!="function"&&(i[o]=this[o]);return i}}(s.prototype=t("./object")).loadAsync=t("./load"),s.support=t("./support"),s.defaults=t("./defaults"),s.version="3.10.1",s.loadAsync=function(i,o){return new s().loadAsync(i,o)},s.external=t("./external"),r.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,r,n){var s=t("./utils"),i=t("./external"),o=t("./utf8"),f=t("./zipEntries"),l=t("./stream/Crc32Probe"),p=t("./nodejsUtils");function m(v){return new i.Promise(function(y,_){var b=v.decompressed.getContentWorker().pipe(new l);b.on("error",function(T){_(T)}).on("end",function(){b.streamInfo.crc32!==v.decompressed.crc32?_(new Error("Corrupted zip : CRC32 mismatch")):y()}).resume()})}r.exports=function(v,y){var _=this;return y=s.extend(y||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),p.isNode&&p.isStream(v)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",v,!0,y.optimizedBinaryString,y.base64).then(function(b){var T=new f(y);return T.load(b),T}).then(function(b){var T=[i.Promise.resolve(b)],E=b.files;if(y.checkCRC32)for(var A=0;A<E.length;A++)T.push(m(E[A]));return i.Promise.all(T)}).then(function(b){for(var T=b.shift(),E=T.files,A=0;A<E.length;A++){var C=E[A],L=C.fileNameStr,I=s.resolve(C.fileNameStr);_.file(I,C.decompressed,{binary:!0,optimizedBinaryString:!0,date:C.date,dir:C.dir,comment:C.fileCommentStr.length?C.fileCommentStr:null,unixPermissions:C.unixPermissions,dosPermissions:C.dosPermissions,createFolders:y.createFolders}),C.dir||(_.file(I).unsafeOriginalName=L)}return T.zipComment.length&&(_.comment=T.zipComment),_})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,r,n){var s=t("../utils"),i=t("../stream/GenericWorker");function o(f,l){i.call(this,"Nodejs stream input adapter for "+f),this._upstreamEnded=!1,this._bindStream(l)}s.inherits(o,i),o.prototype._bindStream=function(f){var l=this;(this._stream=f).pause(),f.on("data",function(p){l.push({data:p,meta:{percent:0}})}).on("error",function(p){l.isPaused?this.generatedError=p:l.error(p)}).on("end",function(){l.isPaused?l._upstreamEnded=!0:l.end()})},o.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,r,n){var s=t("readable-stream").Readable;function i(o,f,l){s.call(this,f),this._helper=o;var p=this;o.on("data",function(m,v){p.push(m)||p._helper.pause(),l&&l(v)}).on("error",function(m){p.emit("error",m)}).on("end",function(){p.push(null)})}t("../utils").inherits(i,s),i.prototype._read=function(){this._helper.resume()},r.exports=i},{"../utils":32,"readable-stream":16}],14:[function(t,r,n){r.exports={isNode:typeof ne<"u",newBufferFrom:function(s,i){if(ne.from&&ne.from!==Uint8Array.from)return ne.from(s,i);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new ne(s,i)},allocBuffer:function(s){if(ne.alloc)return ne.alloc(s);var i=new ne(s);return i.fill(0),i},isBuffer:function(s){return ne.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(t,r,n){function s(I,H,z){var Q,U=o.getTypeOf(H),Z=o.extend(z||{},p);Z.date=Z.date||new Date,Z.compression!==null&&(Z.compression=Z.compression.toUpperCase()),typeof Z.unixPermissions=="string"&&(Z.unixPermissions=parseInt(Z.unixPermissions,8)),Z.unixPermissions&&16384&Z.unixPermissions&&(Z.dir=!0),Z.dosPermissions&&16&Z.dosPermissions&&(Z.dir=!0),Z.dir&&(I=E(I)),Z.createFolders&&(Q=T(I))&&A.call(this,Q,!0);var we=U==="string"&&Z.binary===!1&&Z.base64===!1;z&&z.binary!==void 0||(Z.binary=!we),(H instanceof m&&H.uncompressedSize===0||Z.dir||!H||H.length===0)&&(Z.base64=!1,Z.binary=!0,H="",Z.compression="STORE",U="string");var D=null;D=H instanceof m||H instanceof f?H:_.isNode&&_.isStream(H)?new b(I,H):o.prepareContent(I,H,Z.binary,Z.optimizedBinaryString,Z.base64);var G=new v(I,D,Z);this.files[I]=G}var i=t("./utf8"),o=t("./utils"),f=t("./stream/GenericWorker"),l=t("./stream/StreamHelper"),p=t("./defaults"),m=t("./compressedObject"),v=t("./zipObject"),y=t("./generate"),_=t("./nodejsUtils"),b=t("./nodejs/NodejsStreamInputAdapter"),T=function(I){I.slice(-1)==="/"&&(I=I.substring(0,I.length-1));var H=I.lastIndexOf("/");return 0<H?I.substring(0,H):""},E=function(I){return I.slice(-1)!=="/"&&(I+="/"),I},A=function(I,H){return H=H!==void 0?H:p.createFolders,I=E(I),this.files[I]||s.call(this,I,null,{dir:!0,createFolders:H}),this.files[I]};function C(I){return Object.prototype.toString.call(I)==="[object RegExp]"}var L={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(I){var H,z,Q;for(H in this.files)Q=this.files[H],(z=H.slice(this.root.length,H.length))&&H.slice(0,this.root.length)===this.root&&I(z,Q)},filter:function(I){var H=[];return this.forEach(function(z,Q){I(z,Q)&&H.push(Q)}),H},file:function(I,H,z){if(arguments.length!==1)return I=this.root+I,s.call(this,I,H,z),this;if(C(I)){var Q=I;return this.filter(function(Z,we){return!we.dir&&Q.test(Z)})}var U=this.files[this.root+I];return U&&!U.dir?U:null},folder:function(I){if(!I)return this;if(C(I))return this.filter(function(U,Z){return Z.dir&&I.test(U)});var H=this.root+I,z=A.call(this,H),Q=this.clone();return Q.root=z.name,Q},remove:function(I){I=this.root+I;var H=this.files[I];if(H||(I.slice(-1)!=="/"&&(I+="/"),H=this.files[I]),H&&!H.dir)delete this.files[I];else for(var z=this.filter(function(U,Z){return Z.name.slice(0,I.length)===I}),Q=0;Q<z.length;Q++)delete this.files[z[Q].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(I){var H,z={};try{if((z=o.extend(I||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=z.type.toLowerCase(),z.compression=z.compression.toUpperCase(),z.type==="binarystring"&&(z.type="string"),!z.type)throw new Error("No output type specified.");o.checkSupport(z.type),z.platform!=="darwin"&&z.platform!=="freebsd"&&z.platform!=="linux"&&z.platform!=="sunos"||(z.platform="UNIX"),z.platform==="win32"&&(z.platform="DOS");var Q=z.comment||this.comment||"";H=y.generateWorker(this,z,Q)}catch(U){(H=new f("error")).error(U)}return new l(H,z.type||"string",z.mimeType)},generateAsync:function(I,H){return this.generateInternalStream(I).accumulate(H)},generateNodeStream:function(I,H){return(I=I||{}).type||(I.type="nodebuffer"),this.generateInternalStream(I).toNodejsStream(H)}};r.exports=L},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,r,n){r.exports=t("stream")},{stream:void 0}],17:[function(t,r,n){var s=t("./DataReader");function i(o){s.call(this,o);for(var f=0;f<this.data.length;f++)o[f]=255&o[f]}t("../utils").inherits(i,s),i.prototype.byteAt=function(o){return this.data[this.zero+o]},i.prototype.lastIndexOfSignature=function(o){for(var f=o.charCodeAt(0),l=o.charCodeAt(1),p=o.charCodeAt(2),m=o.charCodeAt(3),v=this.length-4;0<=v;--v)if(this.data[v]===f&&this.data[v+1]===l&&this.data[v+2]===p&&this.data[v+3]===m)return v-this.zero;return-1},i.prototype.readAndCheckSignature=function(o){var f=o.charCodeAt(0),l=o.charCodeAt(1),p=o.charCodeAt(2),m=o.charCodeAt(3),v=this.readData(4);return f===v[0]&&l===v[1]&&p===v[2]&&m===v[3]},i.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var f=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,f},r.exports=i},{"../utils":32,"./DataReader":18}],18:[function(t,r,n){var s=t("../utils");function i(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var f,l=0;for(this.checkOffset(o),f=this.index+o-1;f>=this.index;f--)l=(l<<8)+this.byteAt(f);return this.index+=o,l},readString:function(o){return s.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},r.exports=i},{"../utils":32}],19:[function(t,r,n){var s=t("./Uint8ArrayReader");function i(o){s.call(this,o)}t("../utils").inherits(i,s),i.prototype.readData=function(o){this.checkOffset(o);var f=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,f},r.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,r,n){var s=t("./DataReader");function i(o){s.call(this,o)}t("../utils").inherits(i,s),i.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},i.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},i.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},i.prototype.readData=function(o){this.checkOffset(o);var f=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,f},r.exports=i},{"../utils":32,"./DataReader":18}],21:[function(t,r,n){var s=t("./ArrayReader");function i(o){s.call(this,o)}t("../utils").inherits(i,s),i.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var f=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,f},r.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(t,r,n){var s=t("../utils"),i=t("../support"),o=t("./ArrayReader"),f=t("./StringReader"),l=t("./NodeBufferReader"),p=t("./Uint8ArrayReader");r.exports=function(m){var v=s.getTypeOf(m);return s.checkSupport(v),v!=="string"||i.uint8array?v==="nodebuffer"?new l(m):i.uint8array?new p(s.transformTo("uint8array",m)):new o(s.transformTo("array",m)):new f(m)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,r,n){n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,r,n){var s=t("./GenericWorker"),i=t("../utils");function o(f){s.call(this,"ConvertWorker to "+f),this.destType=f}i.inherits(o,s),o.prototype.processChunk=function(f){this.push({data:i.transformTo(this.destType,f.data),meta:f.meta})},r.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(t,r,n){var s=t("./GenericWorker"),i=t("../crc32");function o(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(o,s),o.prototype.processChunk=function(f){this.streamInfo.crc32=i(f.data,this.streamInfo.crc32||0),this.push(f)},r.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,r,n){var s=t("../utils"),i=t("./GenericWorker");function o(f){i.call(this,"DataLengthProbe for "+f),this.propName=f,this.withStreamInfo(f,0)}s.inherits(o,i),o.prototype.processChunk=function(f){if(f){var l=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=l+f.data.length}i.prototype.processChunk.call(this,f)},r.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(t,r,n){var s=t("../utils"),i=t("./GenericWorker");function o(f){i.call(this,"DataWorker");var l=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,f.then(function(p){l.dataIsReady=!0,l.data=p,l.max=p&&p.length||0,l.type=s.getTypeOf(p),l.isPaused||l._tickAndRepeat()},function(p){l.error(p)})}s.inherits(o,i),o.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var f=null,l=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":f=this.data.substring(this.index,l);break;case"uint8array":f=this.data.subarray(this.index,l);break;case"array":case"nodebuffer":f=this.data.slice(this.index,l)}return this.index=l,this.push({data:f,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(t,r,n){function s(i){this.name=i||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(i){this.emit("data",i)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(i){this.emit("error",i)}return!0},error:function(i){return!this.isFinished&&(this.isPaused?this.generatedError=i:(this.isFinished=!0,this.emit("error",i),this.previous&&this.previous.error(i),this.cleanUp()),!0)},on:function(i,o){return this._listeners[i].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(i,o){if(this._listeners[i])for(var f=0;f<this._listeners[i].length;f++)this._listeners[i][f].call(this,o)},pipe:function(i){return i.registerPrevious(this)},registerPrevious:function(i){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=i.streamInfo,this.mergeStreamInfo(),this.previous=i;var o=this;return i.on("data",function(f){o.processChunk(f)}),i.on("end",function(){o.end()}),i.on("error",function(f){o.error(f)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var i=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),i=!0),this.previous&&this.previous.resume(),!i},flush:function(){},processChunk:function(i){this.push(i)},withStreamInfo:function(i,o){return this.extraStreamInfo[i]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var i in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,i)&&(this.streamInfo[i]=this.extraStreamInfo[i])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var i="Worker "+this.name;return this.previous?this.previous+" -> "+i:i}},r.exports=s},{}],29:[function(t,r,n){var s=t("../utils"),i=t("./ConvertWorker"),o=t("./GenericWorker"),f=t("../base64"),l=t("../support"),p=t("../external"),m=null;if(l.nodestream)try{m=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function v(_,b){return new p.Promise(function(T,E){var A=[],C=_._internalType,L=_._outputType,I=_._mimeType;_.on("data",function(H,z){A.push(H),b&&b(z)}).on("error",function(H){A=[],E(H)}).on("end",function(){try{var H=(function(z,Q,U){switch(z){case"blob":return s.newBlob(s.transformTo("arraybuffer",Q),U);case"base64":return f.encode(Q);default:return s.transformTo(z,Q)}})(L,(function(z,Q){var U,Z=0,we=null,D=0;for(U=0;U<Q.length;U++)D+=Q[U].length;switch(z){case"string":return Q.join("");case"array":return Array.prototype.concat.apply([],Q);case"uint8array":for(we=new Uint8Array(D),U=0;U<Q.length;U++)we.set(Q[U],Z),Z+=Q[U].length;return we;case"nodebuffer":return ne.concat(Q);default:throw new Error("concat : unsupported type '"+z+"'")}})(C,A),I);T(H)}catch(z){E(z)}A=[]}).resume()})}function y(_,b,T){var E=b;switch(b){case"blob":case"arraybuffer":E="uint8array";break;case"base64":E="string"}try{this._internalType=E,this._outputType=b,this._mimeType=T,s.checkSupport(E),this._worker=_.pipe(new i(E)),_.lock()}catch(A){this._worker=new o("error"),this._worker.error(A)}}y.prototype={accumulate:function(_){return v(this,_)},on:function(_,b){var T=this;return _==="data"?this._worker.on(_,function(E){b.call(T,E.data,E.meta)}):this._worker.on(_,function(){s.delay(b,arguments,T)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(_){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new m(this,{objectMode:this._outputType!=="nodebuffer"},_)}},r.exports=y},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,r,n){if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",n.nodebuffer=typeof ne<"u",n.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")n.blob=!1;else{var s=new ArrayBuffer(0);try{n.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(s),n.blob=i.getBlob("application/zip").size===0}catch{n.blob=!1}}}try{n.nodestream=!!t("readable-stream").Readable}catch{n.nodestream=!1}},{"readable-stream":16}],31:[function(t,r,n){for(var s=t("./utils"),i=t("./support"),o=t("./nodejsUtils"),f=t("./stream/GenericWorker"),l=new Array(256),p=0;p<256;p++)l[p]=252<=p?6:248<=p?5:240<=p?4:224<=p?3:192<=p?2:1;l[254]=l[254]=1;function m(){f.call(this,"utf-8 decode"),this.leftOver=null}function v(){f.call(this,"utf-8 encode")}n.utf8encode=function(y){return i.nodebuffer?o.newBufferFrom(y,"utf-8"):(function(_){var b,T,E,A,C,L=_.length,I=0;for(A=0;A<L;A++)(64512&(T=_.charCodeAt(A)))==55296&&A+1<L&&(64512&(E=_.charCodeAt(A+1)))==56320&&(T=65536+(T-55296<<10)+(E-56320),A++),I+=T<128?1:T<2048?2:T<65536?3:4;for(b=i.uint8array?new Uint8Array(I):new Array(I),A=C=0;C<I;A++)(64512&(T=_.charCodeAt(A)))==55296&&A+1<L&&(64512&(E=_.charCodeAt(A+1)))==56320&&(T=65536+(T-55296<<10)+(E-56320),A++),T<128?b[C++]=T:(T<2048?b[C++]=192|T>>>6:(T<65536?b[C++]=224|T>>>12:(b[C++]=240|T>>>18,b[C++]=128|T>>>12&63),b[C++]=128|T>>>6&63),b[C++]=128|63&T);return b})(y)},n.utf8decode=function(y){return i.nodebuffer?s.transformTo("nodebuffer",y).toString("utf-8"):(function(_){var b,T,E,A,C=_.length,L=new Array(2*C);for(b=T=0;b<C;)if((E=_[b++])<128)L[T++]=E;else if(4<(A=l[E]))L[T++]=65533,b+=A-1;else{for(E&=A===2?31:A===3?15:7;1<A&&b<C;)E=E<<6|63&_[b++],A--;1<A?L[T++]=65533:E<65536?L[T++]=E:(E-=65536,L[T++]=55296|E>>10&1023,L[T++]=56320|1023&E)}return L.length!==T&&(L.subarray?L=L.subarray(0,T):L.length=T),s.applyFromCharCode(L)})(y=s.transformTo(i.uint8array?"uint8array":"array",y))},s.inherits(m,f),m.prototype.processChunk=function(y){var _=s.transformTo(i.uint8array?"uint8array":"array",y.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var b=_;(_=new Uint8Array(b.length+this.leftOver.length)).set(this.leftOver,0),_.set(b,this.leftOver.length)}else _=this.leftOver.concat(_);this.leftOver=null}var T=(function(A,C){var L;for((C=C||A.length)>A.length&&(C=A.length),L=C-1;0<=L&&(192&A[L])==128;)L--;return L<0||L===0?C:L+l[A[L]]>C?L:C})(_),E=_;T!==_.length&&(i.uint8array?(E=_.subarray(0,T),this.leftOver=_.subarray(T,_.length)):(E=_.slice(0,T),this.leftOver=_.slice(T,_.length))),this.push({data:n.utf8decode(E),meta:y.meta})},m.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=m,s.inherits(v,f),v.prototype.processChunk=function(y){this.push({data:n.utf8encode(y.data),meta:y.meta})},n.Utf8EncodeWorker=v},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,r,n){var s=t("./support"),i=t("./base64"),o=t("./nodejsUtils"),f=t("./external");function l(b){return b}function p(b,T){for(var E=0;E<b.length;++E)T[E]=255&b.charCodeAt(E);return T}t("setimmediate"),n.newBlob=function(b,T){n.checkSupport("blob");try{return new Blob([b],{type:T})}catch{try{var E=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return E.append(b),E.getBlob(T)}catch{throw new Error("Bug : can't construct the Blob.")}}};var m={stringifyByChunk:function(b,T,E){var A=[],C=0,L=b.length;if(L<=E)return String.fromCharCode.apply(null,b);for(;C<L;)T==="array"||T==="nodebuffer"?A.push(String.fromCharCode.apply(null,b.slice(C,Math.min(C+E,L)))):A.push(String.fromCharCode.apply(null,b.subarray(C,Math.min(C+E,L)))),C+=E;return A.join("")},stringifyByChar:function(b){for(var T="",E=0;E<b.length;E++)T+=String.fromCharCode(b[E]);return T},applyCanBeUsed:{uint8array:(function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}})()}};function v(b){var T=65536,E=n.getTypeOf(b),A=!0;if(E==="uint8array"?A=m.applyCanBeUsed.uint8array:E==="nodebuffer"&&(A=m.applyCanBeUsed.nodebuffer),A)for(;1<T;)try{return m.stringifyByChunk(b,E,T)}catch{T=Math.floor(T/2)}return m.stringifyByChar(b)}function y(b,T){for(var E=0;E<b.length;E++)T[E]=b[E];return T}n.applyFromCharCode=v;var _={};_.string={string:l,array:function(b){return p(b,new Array(b.length))},arraybuffer:function(b){return _.string.uint8array(b).buffer},uint8array:function(b){return p(b,new Uint8Array(b.length))},nodebuffer:function(b){return p(b,o.allocBuffer(b.length))}},_.array={string:v,array:l,arraybuffer:function(b){return new Uint8Array(b).buffer},uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return o.newBufferFrom(b)}},_.arraybuffer={string:function(b){return v(new Uint8Array(b))},array:function(b){return y(new Uint8Array(b),new Array(b.byteLength))},arraybuffer:l,uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return o.newBufferFrom(new Uint8Array(b))}},_.uint8array={string:v,array:function(b){return y(b,new Array(b.length))},arraybuffer:function(b){return b.buffer},uint8array:l,nodebuffer:function(b){return o.newBufferFrom(b)}},_.nodebuffer={string:v,array:function(b){return y(b,new Array(b.length))},arraybuffer:function(b){return _.nodebuffer.uint8array(b).buffer},uint8array:function(b){return y(b,new Uint8Array(b.length))},nodebuffer:l},n.transformTo=function(b,T){if(T=T||"",!b)return T;n.checkSupport(b);var E=n.getTypeOf(T);return _[E][b](T)},n.resolve=function(b){for(var T=b.split("/"),E=[],A=0;A<T.length;A++){var C=T[A];C==="."||C===""&&A!==0&&A!==T.length-1||(C===".."?E.pop():E.push(C))}return E.join("/")},n.getTypeOf=function(b){return typeof b=="string"?"string":Object.prototype.toString.call(b)==="[object Array]"?"array":s.nodebuffer&&o.isBuffer(b)?"nodebuffer":s.uint8array&&b instanceof Uint8Array?"uint8array":s.arraybuffer&&b instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(b){if(!s[b.toLowerCase()])throw new Error(b+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(b){var T,E,A="";for(E=0;E<(b||"").length;E++)A+="\\x"+((T=b.charCodeAt(E))<16?"0":"")+T.toString(16).toUpperCase();return A},n.delay=function(b,T,E){setImmediate(function(){b.apply(E||null,T||[])})},n.inherits=function(b,T){function E(){}E.prototype=T.prototype,b.prototype=new E},n.extend=function(){var b,T,E={};for(b=0;b<arguments.length;b++)for(T in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],T)&&E[T]===void 0&&(E[T]=arguments[b][T]);return E},n.prepareContent=function(b,T,E,A,C){return f.Promise.resolve(T).then(function(L){return s.blob&&(L instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(L))!==-1)&&typeof FileReader<"u"?new f.Promise(function(I,H){var z=new FileReader;z.onload=function(Q){I(Q.target.result)},z.onerror=function(Q){H(Q.target.error)},z.readAsArrayBuffer(L)}):L}).then(function(L){var I=n.getTypeOf(L);return I?(I==="arraybuffer"?L=n.transformTo("uint8array",L):I==="string"&&(C?L=i.decode(L):E&&A!==!0&&(L=(function(H){return p(H,s.uint8array?new Uint8Array(H.length):new Array(H.length))})(L))),L):f.Promise.reject(new Error("Can't read the data of '"+b+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,r,n){var s=t("./reader/readerFor"),i=t("./utils"),o=t("./signature"),f=t("./zipEntry"),l=t("./support");function p(m){this.files=[],this.loadOptions=m}p.prototype={checkSignature:function(m){if(!this.reader.readAndCheckSignature(m)){this.reader.index-=4;var v=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(v)+", expected "+i.pretty(m)+")")}},isSignature:function(m,v){var y=this.reader.index;this.reader.setIndex(m);var _=this.reader.readString(4)===v;return this.reader.setIndex(y),_},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var m=this.reader.readData(this.zipCommentLength),v=l.uint8array?"uint8array":"array",y=i.transformTo(v,m);this.zipComment=this.loadOptions.decodeFileName(y)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var m,v,y,_=this.zip64EndOfCentralSize-44;0<_;)m=this.reader.readInt(2),v=this.reader.readInt(4),y=this.reader.readData(v),this.zip64ExtensibleData[m]={id:m,length:v,value:y}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var m,v;for(m=0;m<this.files.length;m++)v=this.files[m],this.reader.setIndex(v.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),v.readLocalPart(this.reader),v.handleUTF8(),v.processAttributes()},readCentralDir:function(){var m;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(m=new f({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(m);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var m=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(m<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(m);var v=m;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(m=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(m),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var y=this.centralDirOffset+this.centralDirSize;this.zip64&&(y+=20,y+=12+this.zip64EndOfCentralSize);var _=v-y;if(0<_)this.isSignature(v,o.CENTRAL_FILE_HEADER)||(this.reader.zero=_);else if(_<0)throw new Error("Corrupted zip: missing "+Math.abs(_)+" bytes.")},prepareReader:function(m){this.reader=s(m)},load:function(m){this.prepareReader(m),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=p},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,r,n){var s=t("./reader/readerFor"),i=t("./utils"),o=t("./compressedObject"),f=t("./crc32"),l=t("./utf8"),p=t("./compressions"),m=t("./support");function v(y,_){this.options=y,this.loadOptions=_}v.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(y){var _,b;if(y.skip(22),this.fileNameLength=y.readInt(2),b=y.readInt(2),this.fileName=y.readData(this.fileNameLength),y.skip(b),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((_=(function(T){for(var E in p)if(Object.prototype.hasOwnProperty.call(p,E)&&p[E].magic===T)return p[E];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,_,y.readData(this.compressedSize))},readCentralPart:function(y){this.versionMadeBy=y.readInt(2),y.skip(2),this.bitFlag=y.readInt(2),this.compressionMethod=y.readString(2),this.date=y.readDate(),this.crc32=y.readInt(4),this.compressedSize=y.readInt(4),this.uncompressedSize=y.readInt(4);var _=y.readInt(2);if(this.extraFieldsLength=y.readInt(2),this.fileCommentLength=y.readInt(2),this.diskNumberStart=y.readInt(2),this.internalFileAttributes=y.readInt(2),this.externalFileAttributes=y.readInt(4),this.localHeaderOffset=y.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");y.skip(_),this.readExtraFields(y),this.parseZIP64ExtraField(y),this.fileComment=y.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var y=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),y==0&&(this.dosPermissions=63&this.externalFileAttributes),y==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var y=s(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=y.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=y.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=y.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=y.readInt(4))}},readExtraFields:function(y){var _,b,T,E=y.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});y.index+4<E;)_=y.readInt(2),b=y.readInt(2),T=y.readData(b),this.extraFields[_]={id:_,length:b,value:T};y.setIndex(E)},handleUTF8:function(){var y=m.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=l.utf8decode(this.fileName),this.fileCommentStr=l.utf8decode(this.fileComment);else{var _=this.findExtraFieldUnicodePath();if(_!==null)this.fileNameStr=_;else{var b=i.transformTo(y,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(b)}var T=this.findExtraFieldUnicodeComment();if(T!==null)this.fileCommentStr=T;else{var E=i.transformTo(y,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(E)}}},findExtraFieldUnicodePath:function(){var y=this.extraFields[28789];if(y){var _=s(y.value);return _.readInt(1)!==1||f(this.fileName)!==_.readInt(4)?null:l.utf8decode(_.readData(y.length-5))}return null},findExtraFieldUnicodeComment:function(){var y=this.extraFields[25461];if(y){var _=s(y.value);return _.readInt(1)!==1||f(this.fileComment)!==_.readInt(4)?null:l.utf8decode(_.readData(y.length-5))}return null}},r.exports=v},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,r,n){function s(_,b,T){this.name=_,this.dir=T.dir,this.date=T.date,this.comment=T.comment,this.unixPermissions=T.unixPermissions,this.dosPermissions=T.dosPermissions,this._data=b,this._dataBinary=T.binary,this.options={compression:T.compression,compressionOptions:T.compressionOptions}}var i=t("./stream/StreamHelper"),o=t("./stream/DataWorker"),f=t("./utf8"),l=t("./compressedObject"),p=t("./stream/GenericWorker");s.prototype={internalStream:function(_){var b=null,T="string";try{if(!_)throw new Error("No output type specified.");var E=(T=_.toLowerCase())==="string"||T==="text";T!=="binarystring"&&T!=="text"||(T="string"),b=this._decompressWorker();var A=!this._dataBinary;A&&!E&&(b=b.pipe(new f.Utf8EncodeWorker)),!A&&E&&(b=b.pipe(new f.Utf8DecodeWorker))}catch(C){(b=new p("error")).error(C)}return new i(b,T,"")},async:function(_,b){return this.internalStream(_).accumulate(b)},nodeStream:function(_,b){return this.internalStream(_||"nodebuffer").toNodejsStream(b)},_compressWorker:function(_,b){if(this._data instanceof l&&this._data.compression.magic===_.magic)return this._data.getCompressedWorker();var T=this._decompressWorker();return this._dataBinary||(T=T.pipe(new f.Utf8EncodeWorker)),l.createWorkerFrom(T,_,b)},_decompressWorker:function(){return this._data instanceof l?this._data.getContentWorker():this._data instanceof p?this._data:new o(this._data)}};for(var m=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],v=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},y=0;y<m.length;y++)s.prototype[m[y]]=v;r.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,r,n){(function(s){var i,o,f=s.MutationObserver||s.WebKitMutationObserver;if(f){var l=0,p=new f(_),m=s.document.createTextNode("");p.observe(m,{characterData:!0}),i=function(){m.data=l=++l%2}}else if(s.setImmediate||s.MessageChannel===void 0)i="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var b=s.document.createElement("script");b.onreadystatechange=function(){_(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},s.document.documentElement.appendChild(b)}:function(){setTimeout(_,0)};else{var v=new s.MessageChannel;v.port1.onmessage=_,i=function(){v.port2.postMessage(0)}}var y=[];function _(){var b,T;o=!0;for(var E=y.length;E;){for(T=y,y=[],b=-1;++b<E;)T[b]();E=y.length}o=!1}r.exports=function(b){y.push(b)!==1||o||i()}}).call(this,typeof Wt<"u"?Wt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,r,n){var s=t("immediate");function i(){}var o={},f=["REJECTED"],l=["FULFILLED"],p=["PENDING"];function m(E){if(typeof E!="function")throw new TypeError("resolver must be a function");this.state=p,this.queue=[],this.outcome=void 0,E!==i&&b(this,E)}function v(E,A,C){this.promise=E,typeof A=="function"&&(this.onFulfilled=A,this.callFulfilled=this.otherCallFulfilled),typeof C=="function"&&(this.onRejected=C,this.callRejected=this.otherCallRejected)}function y(E,A,C){s(function(){var L;try{L=A(C)}catch(I){return o.reject(E,I)}L===E?o.reject(E,new TypeError("Cannot resolve promise with itself")):o.resolve(E,L)})}function _(E){var A=E&&E.then;if(E&&(typeof E=="object"||typeof E=="function")&&typeof A=="function")return function(){A.apply(E,arguments)}}function b(E,A){var C=!1;function L(z){C||(C=!0,o.reject(E,z))}function I(z){C||(C=!0,o.resolve(E,z))}var H=T(function(){A(I,L)});H.status==="error"&&L(H.value)}function T(E,A){var C={};try{C.value=E(A),C.status="success"}catch(L){C.status="error",C.value=L}return C}(r.exports=m).prototype.finally=function(E){if(typeof E!="function")return this;var A=this.constructor;return this.then(function(C){return A.resolve(E()).then(function(){return C})},function(C){return A.resolve(E()).then(function(){throw C})})},m.prototype.catch=function(E){return this.then(null,E)},m.prototype.then=function(E,A){if(typeof E!="function"&&this.state===l||typeof A!="function"&&this.state===f)return this;var C=new this.constructor(i);return this.state!==p?y(C,this.state===l?E:A,this.outcome):this.queue.push(new v(C,E,A)),C},v.prototype.callFulfilled=function(E){o.resolve(this.promise,E)},v.prototype.otherCallFulfilled=function(E){y(this.promise,this.onFulfilled,E)},v.prototype.callRejected=function(E){o.reject(this.promise,E)},v.prototype.otherCallRejected=function(E){y(this.promise,this.onRejected,E)},o.resolve=function(E,A){var C=T(_,A);if(C.status==="error")return o.reject(E,C.value);var L=C.value;if(L)b(E,L);else{E.state=l,E.outcome=A;for(var I=-1,H=E.queue.length;++I<H;)E.queue[I].callFulfilled(A)}return E},o.reject=function(E,A){E.state=f,E.outcome=A;for(var C=-1,L=E.queue.length;++C<L;)E.queue[C].callRejected(A);return E},m.resolve=function(E){return E instanceof this?E:o.resolve(new this(i),E)},m.reject=function(E){var A=new this(i);return o.reject(A,E)},m.all=function(E){var A=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=E.length,L=!1;if(!C)return this.resolve([]);for(var I=new Array(C),H=0,z=-1,Q=new this(i);++z<C;)U(E[z],z);return Q;function U(Z,we){A.resolve(Z).then(function(D){I[we]=D,++H!==C||L||(L=!0,o.resolve(Q,I))},function(D){L||(L=!0,o.reject(Q,D))})}},m.race=function(E){var A=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=E.length,L=!1;if(!C)return this.resolve([]);for(var I=-1,H=new this(i);++I<C;)z=E[I],A.resolve(z).then(function(Q){L||(L=!0,o.resolve(H,Q))},function(Q){L||(L=!0,o.reject(H,Q))});var z;return H}},{immediate:36}],38:[function(t,r,n){var s={};(0,t("./lib/utils/common").assign)(s,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),r.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,r,n){var s=t("./zlib/deflate"),i=t("./utils/common"),o=t("./utils/strings"),f=t("./zlib/messages"),l=t("./zlib/zstream"),p=Object.prototype.toString,m=0,v=-1,y=0,_=8;function b(E){if(!(this instanceof b))return new b(E);this.options=i.assign({level:v,method:_,chunkSize:16384,windowBits:15,memLevel:8,strategy:y,to:""},E||{});var A=this.options;A.raw&&0<A.windowBits?A.windowBits=-A.windowBits:A.gzip&&0<A.windowBits&&A.windowBits<16&&(A.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var C=s.deflateInit2(this.strm,A.level,A.method,A.windowBits,A.memLevel,A.strategy);if(C!==m)throw new Error(f[C]);if(A.header&&s.deflateSetHeader(this.strm,A.header),A.dictionary){var L;if(L=typeof A.dictionary=="string"?o.string2buf(A.dictionary):p.call(A.dictionary)==="[object ArrayBuffer]"?new Uint8Array(A.dictionary):A.dictionary,(C=s.deflateSetDictionary(this.strm,L))!==m)throw new Error(f[C]);this._dict_set=!0}}function T(E,A){var C=new b(A);if(C.push(E,!0),C.err)throw C.msg||f[C.err];return C.result}b.prototype.push=function(E,A){var C,L,I=this.strm,H=this.options.chunkSize;if(this.ended)return!1;L=A===~~A?A:A===!0?4:0,typeof E=="string"?I.input=o.string2buf(E):p.call(E)==="[object ArrayBuffer]"?I.input=new Uint8Array(E):I.input=E,I.next_in=0,I.avail_in=I.input.length;do{if(I.avail_out===0&&(I.output=new i.Buf8(H),I.next_out=0,I.avail_out=H),(C=s.deflate(I,L))!==1&&C!==m)return this.onEnd(C),!(this.ended=!0);I.avail_out!==0&&(I.avail_in!==0||L!==4&&L!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(i.shrinkBuf(I.output,I.next_out))):this.onData(i.shrinkBuf(I.output,I.next_out)))}while((0<I.avail_in||I.avail_out===0)&&C!==1);return L===4?(C=s.deflateEnd(this.strm),this.onEnd(C),this.ended=!0,C===m):L!==2||(this.onEnd(m),!(I.avail_out=0))},b.prototype.onData=function(E){this.chunks.push(E)},b.prototype.onEnd=function(E){E===m&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=E,this.msg=this.strm.msg},n.Deflate=b,n.deflate=T,n.deflateRaw=function(E,A){return(A=A||{}).raw=!0,T(E,A)},n.gzip=function(E,A){return(A=A||{}).gzip=!0,T(E,A)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,r,n){var s=t("./zlib/inflate"),i=t("./utils/common"),o=t("./utils/strings"),f=t("./zlib/constants"),l=t("./zlib/messages"),p=t("./zlib/zstream"),m=t("./zlib/gzheader"),v=Object.prototype.toString;function y(b){if(!(this instanceof y))return new y(b);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},b||{});var T=this.options;T.raw&&0<=T.windowBits&&T.windowBits<16&&(T.windowBits=-T.windowBits,T.windowBits===0&&(T.windowBits=-15)),!(0<=T.windowBits&&T.windowBits<16)||b&&b.windowBits||(T.windowBits+=32),15<T.windowBits&&T.windowBits<48&&(15&T.windowBits)==0&&(T.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var E=s.inflateInit2(this.strm,T.windowBits);if(E!==f.Z_OK)throw new Error(l[E]);this.header=new m,s.inflateGetHeader(this.strm,this.header)}function _(b,T){var E=new y(T);if(E.push(b,!0),E.err)throw E.msg||l[E.err];return E.result}y.prototype.push=function(b,T){var E,A,C,L,I,H,z=this.strm,Q=this.options.chunkSize,U=this.options.dictionary,Z=!1;if(this.ended)return!1;A=T===~~T?T:T===!0?f.Z_FINISH:f.Z_NO_FLUSH,typeof b=="string"?z.input=o.binstring2buf(b):v.call(b)==="[object ArrayBuffer]"?z.input=new Uint8Array(b):z.input=b,z.next_in=0,z.avail_in=z.input.length;do{if(z.avail_out===0&&(z.output=new i.Buf8(Q),z.next_out=0,z.avail_out=Q),(E=s.inflate(z,f.Z_NO_FLUSH))===f.Z_NEED_DICT&&U&&(H=typeof U=="string"?o.string2buf(U):v.call(U)==="[object ArrayBuffer]"?new Uint8Array(U):U,E=s.inflateSetDictionary(this.strm,H)),E===f.Z_BUF_ERROR&&Z===!0&&(E=f.Z_OK,Z=!1),E!==f.Z_STREAM_END&&E!==f.Z_OK)return this.onEnd(E),!(this.ended=!0);z.next_out&&(z.avail_out!==0&&E!==f.Z_STREAM_END&&(z.avail_in!==0||A!==f.Z_FINISH&&A!==f.Z_SYNC_FLUSH)||(this.options.to==="string"?(C=o.utf8border(z.output,z.next_out),L=z.next_out-C,I=o.buf2string(z.output,C),z.next_out=L,z.avail_out=Q-L,L&&i.arraySet(z.output,z.output,C,L,0),this.onData(I)):this.onData(i.shrinkBuf(z.output,z.next_out)))),z.avail_in===0&&z.avail_out===0&&(Z=!0)}while((0<z.avail_in||z.avail_out===0)&&E!==f.Z_STREAM_END);return E===f.Z_STREAM_END&&(A=f.Z_FINISH),A===f.Z_FINISH?(E=s.inflateEnd(this.strm),this.onEnd(E),this.ended=!0,E===f.Z_OK):A!==f.Z_SYNC_FLUSH||(this.onEnd(f.Z_OK),!(z.avail_out=0))},y.prototype.onData=function(b){this.chunks.push(b)},y.prototype.onEnd=function(b){b===f.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},n.Inflate=y,n.inflate=_,n.inflateRaw=function(b,T){return(T=T||{}).raw=!0,_(b,T)},n.ungzip=_},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,r,n){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";n.assign=function(f){for(var l=Array.prototype.slice.call(arguments,1);l.length;){var p=l.shift();if(p){if(typeof p!="object")throw new TypeError(p+"must be non-object");for(var m in p)p.hasOwnProperty(m)&&(f[m]=p[m])}}return f},n.shrinkBuf=function(f,l){return f.length===l?f:f.subarray?f.subarray(0,l):(f.length=l,f)};var i={arraySet:function(f,l,p,m,v){if(l.subarray&&f.subarray)f.set(l.subarray(p,p+m),v);else for(var y=0;y<m;y++)f[v+y]=l[p+y]},flattenChunks:function(f){var l,p,m,v,y,_;for(l=m=0,p=f.length;l<p;l++)m+=f[l].length;for(_=new Uint8Array(m),l=v=0,p=f.length;l<p;l++)y=f[l],_.set(y,v),v+=y.length;return _}},o={arraySet:function(f,l,p,m,v){for(var y=0;y<m;y++)f[v+y]=l[p+y]},flattenChunks:function(f){return[].concat.apply([],f)}};n.setTyped=function(f){f?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,i)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,o))},n.setTyped(s)},{}],42:[function(t,r,n){var s=t("./common"),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var f=new s.Buf8(256),l=0;l<256;l++)f[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function p(m,v){if(v<65537&&(m.subarray&&o||!m.subarray&&i))return String.fromCharCode.apply(null,s.shrinkBuf(m,v));for(var y="",_=0;_<v;_++)y+=String.fromCharCode(m[_]);return y}f[254]=f[254]=1,n.string2buf=function(m){var v,y,_,b,T,E=m.length,A=0;for(b=0;b<E;b++)(64512&(y=m.charCodeAt(b)))==55296&&b+1<E&&(64512&(_=m.charCodeAt(b+1)))==56320&&(y=65536+(y-55296<<10)+(_-56320),b++),A+=y<128?1:y<2048?2:y<65536?3:4;for(v=new s.Buf8(A),b=T=0;T<A;b++)(64512&(y=m.charCodeAt(b)))==55296&&b+1<E&&(64512&(_=m.charCodeAt(b+1)))==56320&&(y=65536+(y-55296<<10)+(_-56320),b++),y<128?v[T++]=y:(y<2048?v[T++]=192|y>>>6:(y<65536?v[T++]=224|y>>>12:(v[T++]=240|y>>>18,v[T++]=128|y>>>12&63),v[T++]=128|y>>>6&63),v[T++]=128|63&y);return v},n.buf2binstring=function(m){return p(m,m.length)},n.binstring2buf=function(m){for(var v=new s.Buf8(m.length),y=0,_=v.length;y<_;y++)v[y]=m.charCodeAt(y);return v},n.buf2string=function(m,v){var y,_,b,T,E=v||m.length,A=new Array(2*E);for(y=_=0;y<E;)if((b=m[y++])<128)A[_++]=b;else if(4<(T=f[b]))A[_++]=65533,y+=T-1;else{for(b&=T===2?31:T===3?15:7;1<T&&y<E;)b=b<<6|63&m[y++],T--;1<T?A[_++]=65533:b<65536?A[_++]=b:(b-=65536,A[_++]=55296|b>>10&1023,A[_++]=56320|1023&b)}return p(A,_)},n.utf8border=function(m,v){var y;for((v=v||m.length)>m.length&&(v=m.length),y=v-1;0<=y&&(192&m[y])==128;)y--;return y<0||y===0?v:y+f[m[y]]>v?y:v}},{"./common":41}],43:[function(t,r,n){r.exports=function(s,i,o,f){for(var l=65535&s|0,p=s>>>16&65535|0,m=0;o!==0;){for(o-=m=2e3<o?2e3:o;p=p+(l=l+i[f++]|0)|0,--m;);l%=65521,p%=65521}return l|p<<16|0}},{}],44:[function(t,r,n){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,r,n){var s=(function(){for(var i,o=[],f=0;f<256;f++){i=f;for(var l=0;l<8;l++)i=1&i?3988292384^i>>>1:i>>>1;o[f]=i}return o})();r.exports=function(i,o,f,l){var p=s,m=l+f;i^=-1;for(var v=l;v<m;v++)i=i>>>8^p[255&(i^o[v])];return-1^i}},{}],46:[function(t,r,n){var s,i=t("../utils/common"),o=t("./trees"),f=t("./adler32"),l=t("./crc32"),p=t("./messages"),m=0,v=4,y=0,_=-2,b=-1,T=4,E=2,A=8,C=9,L=286,I=30,H=19,z=2*L+1,Q=15,U=3,Z=258,we=Z+U+1,D=42,G=113,g=1,ee=2,ke=3,ae=4;function je(d,J){return d.msg=p[J],J}function ue(d){return(d<<1)-(4<d?9:0)}function Pe(d){for(var J=d.length;0<=--J;)d[J]=0}function W(d){var J=d.state,K=J.pending;K>d.avail_out&&(K=d.avail_out),K!==0&&(i.arraySet(d.output,J.pending_buf,J.pending_out,K,d.next_out),d.next_out+=K,J.pending_out+=K,d.total_out+=K,d.avail_out-=K,J.pending-=K,J.pending===0&&(J.pending_out=0))}function V(d,J){o._tr_flush_block(d,0<=d.block_start?d.block_start:-1,d.strstart-d.block_start,J),d.block_start=d.strstart,W(d.strm)}function Ee(d,J){d.pending_buf[d.pending++]=J}function be(d,J){d.pending_buf[d.pending++]=J>>>8&255,d.pending_buf[d.pending++]=255&J}function pe(d,J){var K,P,k=d.max_chain_length,B=d.strstart,te=d.prev_length,se=d.nice_match,q=d.strstart>d.w_size-we?d.strstart-(d.w_size-we):0,he=d.window,ve=d.w_mask,fe=d.prev,Se=d.strstart+Z,Le=he[B+te-1],Ae=he[B+te];d.prev_length>=d.good_match&&(k>>=2),se>d.lookahead&&(se=d.lookahead);do if(he[(K=J)+te]===Ae&&he[K+te-1]===Le&&he[K]===he[B]&&he[++K]===he[B+1]){B+=2,K++;do;while(he[++B]===he[++K]&&he[++B]===he[++K]&&he[++B]===he[++K]&&he[++B]===he[++K]&&he[++B]===he[++K]&&he[++B]===he[++K]&&he[++B]===he[++K]&&he[++B]===he[++K]&&B<Se);if(P=Z-(Se-B),B=Se-Z,te<P){if(d.match_start=J,se<=(te=P))break;Le=he[B+te-1],Ae=he[B+te]}}while((J=fe[J&ve])>q&&--k!=0);return te<=d.lookahead?te:d.lookahead}function We(d){var J,K,P,k,B,te,se,q,he,ve,fe=d.w_size;do{if(k=d.window_size-d.lookahead-d.strstart,d.strstart>=fe+(fe-we)){for(i.arraySet(d.window,d.window,fe,fe,0),d.match_start-=fe,d.strstart-=fe,d.block_start-=fe,J=K=d.hash_size;P=d.head[--J],d.head[J]=fe<=P?P-fe:0,--K;);for(J=K=fe;P=d.prev[--J],d.prev[J]=fe<=P?P-fe:0,--K;);k+=fe}if(d.strm.avail_in===0)break;if(te=d.strm,se=d.window,q=d.strstart+d.lookahead,he=k,ve=void 0,ve=te.avail_in,he<ve&&(ve=he),K=ve===0?0:(te.avail_in-=ve,i.arraySet(se,te.input,te.next_in,ve,q),te.state.wrap===1?te.adler=f(te.adler,se,ve,q):te.state.wrap===2&&(te.adler=l(te.adler,se,ve,q)),te.next_in+=ve,te.total_in+=ve,ve),d.lookahead+=K,d.lookahead+d.insert>=U)for(B=d.strstart-d.insert,d.ins_h=d.window[B],d.ins_h=(d.ins_h<<d.hash_shift^d.window[B+1])&d.hash_mask;d.insert&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[B+U-1])&d.hash_mask,d.prev[B&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=B,B++,d.insert--,!(d.lookahead+d.insert<U)););}while(d.lookahead<we&&d.strm.avail_in!==0)}function Je(d,J){for(var K,P;;){if(d.lookahead<we){if(We(d),d.lookahead<we&&J===m)return g;if(d.lookahead===0)break}if(K=0,d.lookahead>=U&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+U-1])&d.hash_mask,K=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart),K!==0&&d.strstart-K<=d.w_size-we&&(d.match_length=pe(d,K)),d.match_length>=U)if(P=o._tr_tally(d,d.strstart-d.match_start,d.match_length-U),d.lookahead-=d.match_length,d.match_length<=d.max_lazy_match&&d.lookahead>=U){for(d.match_length--;d.strstart++,d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+U-1])&d.hash_mask,K=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart,--d.match_length!=0;);d.strstart++}else d.strstart+=d.match_length,d.match_length=0,d.ins_h=d.window[d.strstart],d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+1])&d.hash_mask;else P=o._tr_tally(d,0,d.window[d.strstart]),d.lookahead--,d.strstart++;if(P&&(V(d,!1),d.strm.avail_out===0))return g}return d.insert=d.strstart<U-1?d.strstart:U-1,J===v?(V(d,!0),d.strm.avail_out===0?ke:ae):d.last_lit&&(V(d,!1),d.strm.avail_out===0)?g:ee}function Ce(d,J){for(var K,P,k;;){if(d.lookahead<we){if(We(d),d.lookahead<we&&J===m)return g;if(d.lookahead===0)break}if(K=0,d.lookahead>=U&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+U-1])&d.hash_mask,K=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart),d.prev_length=d.match_length,d.prev_match=d.match_start,d.match_length=U-1,K!==0&&d.prev_length<d.max_lazy_match&&d.strstart-K<=d.w_size-we&&(d.match_length=pe(d,K),d.match_length<=5&&(d.strategy===1||d.match_length===U&&4096<d.strstart-d.match_start)&&(d.match_length=U-1)),d.prev_length>=U&&d.match_length<=d.prev_length){for(k=d.strstart+d.lookahead-U,P=o._tr_tally(d,d.strstart-1-d.prev_match,d.prev_length-U),d.lookahead-=d.prev_length-1,d.prev_length-=2;++d.strstart<=k&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+U-1])&d.hash_mask,K=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart),--d.prev_length!=0;);if(d.match_available=0,d.match_length=U-1,d.strstart++,P&&(V(d,!1),d.strm.avail_out===0))return g}else if(d.match_available){if((P=o._tr_tally(d,0,d.window[d.strstart-1]))&&V(d,!1),d.strstart++,d.lookahead--,d.strm.avail_out===0)return g}else d.match_available=1,d.strstart++,d.lookahead--}return d.match_available&&(P=o._tr_tally(d,0,d.window[d.strstart-1]),d.match_available=0),d.insert=d.strstart<U-1?d.strstart:U-1,J===v?(V(d,!0),d.strm.avail_out===0?ke:ae):d.last_lit&&(V(d,!1),d.strm.avail_out===0)?g:ee}function $e(d,J,K,P,k){this.good_length=d,this.max_lazy=J,this.nice_length=K,this.max_chain=P,this.func=k}function Ye(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=A,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*z),this.dyn_dtree=new i.Buf16(2*(2*I+1)),this.bl_tree=new i.Buf16(2*(2*H+1)),Pe(this.dyn_ltree),Pe(this.dyn_dtree),Pe(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(Q+1),this.heap=new i.Buf16(2*L+1),Pe(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*L+1),Pe(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ge(d){var J;return d&&d.state?(d.total_in=d.total_out=0,d.data_type=E,(J=d.state).pending=0,J.pending_out=0,J.wrap<0&&(J.wrap=-J.wrap),J.status=J.wrap?D:G,d.adler=J.wrap===2?0:1,J.last_flush=m,o._tr_init(J),y):je(d,_)}function Be(d){var J=ge(d);return J===y&&(function(K){K.window_size=2*K.w_size,Pe(K.head),K.max_lazy_match=s[K.level].max_lazy,K.good_match=s[K.level].good_length,K.nice_match=s[K.level].nice_length,K.max_chain_length=s[K.level].max_chain,K.strstart=0,K.block_start=0,K.lookahead=0,K.insert=0,K.match_length=K.prev_length=U-1,K.match_available=0,K.ins_h=0})(d.state),J}function tt(d,J,K,P,k,B){if(!d)return _;var te=1;if(J===b&&(J=6),P<0?(te=0,P=-P):15<P&&(te=2,P-=16),k<1||C<k||K!==A||P<8||15<P||J<0||9<J||B<0||T<B)return je(d,_);P===8&&(P=9);var se=new Ye;return(d.state=se).strm=d,se.wrap=te,se.gzhead=null,se.w_bits=P,se.w_size=1<<se.w_bits,se.w_mask=se.w_size-1,se.hash_bits=k+7,se.hash_size=1<<se.hash_bits,se.hash_mask=se.hash_size-1,se.hash_shift=~~((se.hash_bits+U-1)/U),se.window=new i.Buf8(2*se.w_size),se.head=new i.Buf16(se.hash_size),se.prev=new i.Buf16(se.w_size),se.lit_bufsize=1<<k+6,se.pending_buf_size=4*se.lit_bufsize,se.pending_buf=new i.Buf8(se.pending_buf_size),se.d_buf=1*se.lit_bufsize,se.l_buf=3*se.lit_bufsize,se.level=J,se.strategy=B,se.method=K,Be(d)}s=[new $e(0,0,0,0,function(d,J){var K=65535;for(K>d.pending_buf_size-5&&(K=d.pending_buf_size-5);;){if(d.lookahead<=1){if(We(d),d.lookahead===0&&J===m)return g;if(d.lookahead===0)break}d.strstart+=d.lookahead,d.lookahead=0;var P=d.block_start+K;if((d.strstart===0||d.strstart>=P)&&(d.lookahead=d.strstart-P,d.strstart=P,V(d,!1),d.strm.avail_out===0)||d.strstart-d.block_start>=d.w_size-we&&(V(d,!1),d.strm.avail_out===0))return g}return d.insert=0,J===v?(V(d,!0),d.strm.avail_out===0?ke:ae):(d.strstart>d.block_start&&(V(d,!1),d.strm.avail_out),g)}),new $e(4,4,8,4,Je),new $e(4,5,16,8,Je),new $e(4,6,32,32,Je),new $e(4,4,16,16,Ce),new $e(8,16,32,32,Ce),new $e(8,16,128,128,Ce),new $e(8,32,128,256,Ce),new $e(32,128,258,1024,Ce),new $e(32,258,258,4096,Ce)],n.deflateInit=function(d,J){return tt(d,J,A,15,8,0)},n.deflateInit2=tt,n.deflateReset=Be,n.deflateResetKeep=ge,n.deflateSetHeader=function(d,J){return d&&d.state?d.state.wrap!==2?_:(d.state.gzhead=J,y):_},n.deflate=function(d,J){var K,P,k,B;if(!d||!d.state||5<J||J<0)return d?je(d,_):_;if(P=d.state,!d.output||!d.input&&d.avail_in!==0||P.status===666&&J!==v)return je(d,d.avail_out===0?-5:_);if(P.strm=d,K=P.last_flush,P.last_flush=J,P.status===D)if(P.wrap===2)d.adler=0,Ee(P,31),Ee(P,139),Ee(P,8),P.gzhead?(Ee(P,(P.gzhead.text?1:0)+(P.gzhead.hcrc?2:0)+(P.gzhead.extra?4:0)+(P.gzhead.name?8:0)+(P.gzhead.comment?16:0)),Ee(P,255&P.gzhead.time),Ee(P,P.gzhead.time>>8&255),Ee(P,P.gzhead.time>>16&255),Ee(P,P.gzhead.time>>24&255),Ee(P,P.level===9?2:2<=P.strategy||P.level<2?4:0),Ee(P,255&P.gzhead.os),P.gzhead.extra&&P.gzhead.extra.length&&(Ee(P,255&P.gzhead.extra.length),Ee(P,P.gzhead.extra.length>>8&255)),P.gzhead.hcrc&&(d.adler=l(d.adler,P.pending_buf,P.pending,0)),P.gzindex=0,P.status=69):(Ee(P,0),Ee(P,0),Ee(P,0),Ee(P,0),Ee(P,0),Ee(P,P.level===9?2:2<=P.strategy||P.level<2?4:0),Ee(P,3),P.status=G);else{var te=A+(P.w_bits-8<<4)<<8;te|=(2<=P.strategy||P.level<2?0:P.level<6?1:P.level===6?2:3)<<6,P.strstart!==0&&(te|=32),te+=31-te%31,P.status=G,be(P,te),P.strstart!==0&&(be(P,d.adler>>>16),be(P,65535&d.adler)),d.adler=1}if(P.status===69)if(P.gzhead.extra){for(k=P.pending;P.gzindex<(65535&P.gzhead.extra.length)&&(P.pending!==P.pending_buf_size||(P.gzhead.hcrc&&P.pending>k&&(d.adler=l(d.adler,P.pending_buf,P.pending-k,k)),W(d),k=P.pending,P.pending!==P.pending_buf_size));)Ee(P,255&P.gzhead.extra[P.gzindex]),P.gzindex++;P.gzhead.hcrc&&P.pending>k&&(d.adler=l(d.adler,P.pending_buf,P.pending-k,k)),P.gzindex===P.gzhead.extra.length&&(P.gzindex=0,P.status=73)}else P.status=73;if(P.status===73)if(P.gzhead.name){k=P.pending;do{if(P.pending===P.pending_buf_size&&(P.gzhead.hcrc&&P.pending>k&&(d.adler=l(d.adler,P.pending_buf,P.pending-k,k)),W(d),k=P.pending,P.pending===P.pending_buf_size)){B=1;break}B=P.gzindex<P.gzhead.name.length?255&P.gzhead.name.charCodeAt(P.gzindex++):0,Ee(P,B)}while(B!==0);P.gzhead.hcrc&&P.pending>k&&(d.adler=l(d.adler,P.pending_buf,P.pending-k,k)),B===0&&(P.gzindex=0,P.status=91)}else P.status=91;if(P.status===91)if(P.gzhead.comment){k=P.pending;do{if(P.pending===P.pending_buf_size&&(P.gzhead.hcrc&&P.pending>k&&(d.adler=l(d.adler,P.pending_buf,P.pending-k,k)),W(d),k=P.pending,P.pending===P.pending_buf_size)){B=1;break}B=P.gzindex<P.gzhead.comment.length?255&P.gzhead.comment.charCodeAt(P.gzindex++):0,Ee(P,B)}while(B!==0);P.gzhead.hcrc&&P.pending>k&&(d.adler=l(d.adler,P.pending_buf,P.pending-k,k)),B===0&&(P.status=103)}else P.status=103;if(P.status===103&&(P.gzhead.hcrc?(P.pending+2>P.pending_buf_size&&W(d),P.pending+2<=P.pending_buf_size&&(Ee(P,255&d.adler),Ee(P,d.adler>>8&255),d.adler=0,P.status=G)):P.status=G),P.pending!==0){if(W(d),d.avail_out===0)return P.last_flush=-1,y}else if(d.avail_in===0&&ue(J)<=ue(K)&&J!==v)return je(d,-5);if(P.status===666&&d.avail_in!==0)return je(d,-5);if(d.avail_in!==0||P.lookahead!==0||J!==m&&P.status!==666){var se=P.strategy===2?(function(q,he){for(var ve;;){if(q.lookahead===0&&(We(q),q.lookahead===0)){if(he===m)return g;break}if(q.match_length=0,ve=o._tr_tally(q,0,q.window[q.strstart]),q.lookahead--,q.strstart++,ve&&(V(q,!1),q.strm.avail_out===0))return g}return q.insert=0,he===v?(V(q,!0),q.strm.avail_out===0?ke:ae):q.last_lit&&(V(q,!1),q.strm.avail_out===0)?g:ee})(P,J):P.strategy===3?(function(q,he){for(var ve,fe,Se,Le,Ae=q.window;;){if(q.lookahead<=Z){if(We(q),q.lookahead<=Z&&he===m)return g;if(q.lookahead===0)break}if(q.match_length=0,q.lookahead>=U&&0<q.strstart&&(fe=Ae[Se=q.strstart-1])===Ae[++Se]&&fe===Ae[++Se]&&fe===Ae[++Se]){Le=q.strstart+Z;do;while(fe===Ae[++Se]&&fe===Ae[++Se]&&fe===Ae[++Se]&&fe===Ae[++Se]&&fe===Ae[++Se]&&fe===Ae[++Se]&&fe===Ae[++Se]&&fe===Ae[++Se]&&Se<Le);q.match_length=Z-(Le-Se),q.match_length>q.lookahead&&(q.match_length=q.lookahead)}if(q.match_length>=U?(ve=o._tr_tally(q,1,q.match_length-U),q.lookahead-=q.match_length,q.strstart+=q.match_length,q.match_length=0):(ve=o._tr_tally(q,0,q.window[q.strstart]),q.lookahead--,q.strstart++),ve&&(V(q,!1),q.strm.avail_out===0))return g}return q.insert=0,he===v?(V(q,!0),q.strm.avail_out===0?ke:ae):q.last_lit&&(V(q,!1),q.strm.avail_out===0)?g:ee})(P,J):s[P.level].func(P,J);if(se!==ke&&se!==ae||(P.status=666),se===g||se===ke)return d.avail_out===0&&(P.last_flush=-1),y;if(se===ee&&(J===1?o._tr_align(P):J!==5&&(o._tr_stored_block(P,0,0,!1),J===3&&(Pe(P.head),P.lookahead===0&&(P.strstart=0,P.block_start=0,P.insert=0))),W(d),d.avail_out===0))return P.last_flush=-1,y}return J!==v?y:P.wrap<=0?1:(P.wrap===2?(Ee(P,255&d.adler),Ee(P,d.adler>>8&255),Ee(P,d.adler>>16&255),Ee(P,d.adler>>24&255),Ee(P,255&d.total_in),Ee(P,d.total_in>>8&255),Ee(P,d.total_in>>16&255),Ee(P,d.total_in>>24&255)):(be(P,d.adler>>>16),be(P,65535&d.adler)),W(d),0<P.wrap&&(P.wrap=-P.wrap),P.pending!==0?y:1)},n.deflateEnd=function(d){var J;return d&&d.state?(J=d.state.status)!==D&&J!==69&&J!==73&&J!==91&&J!==103&&J!==G&&J!==666?je(d,_):(d.state=null,J===G?je(d,-3):y):_},n.deflateSetDictionary=function(d,J){var K,P,k,B,te,se,q,he,ve=J.length;if(!d||!d.state||(B=(K=d.state).wrap)===2||B===1&&K.status!==D||K.lookahead)return _;for(B===1&&(d.adler=f(d.adler,J,ve,0)),K.wrap=0,ve>=K.w_size&&(B===0&&(Pe(K.head),K.strstart=0,K.block_start=0,K.insert=0),he=new i.Buf8(K.w_size),i.arraySet(he,J,ve-K.w_size,K.w_size,0),J=he,ve=K.w_size),te=d.avail_in,se=d.next_in,q=d.input,d.avail_in=ve,d.next_in=0,d.input=J,We(K);K.lookahead>=U;){for(P=K.strstart,k=K.lookahead-(U-1);K.ins_h=(K.ins_h<<K.hash_shift^K.window[P+U-1])&K.hash_mask,K.prev[P&K.w_mask]=K.head[K.ins_h],K.head[K.ins_h]=P,P++,--k;);K.strstart=P,K.lookahead=U-1,We(K)}return K.strstart+=K.lookahead,K.block_start=K.strstart,K.insert=K.lookahead,K.lookahead=0,K.match_length=K.prev_length=U-1,K.match_available=0,d.next_in=se,d.input=q,d.avail_in=te,K.wrap=B,y},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,r,n){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,r,n){r.exports=function(s,i){var o,f,l,p,m,v,y,_,b,T,E,A,C,L,I,H,z,Q,U,Z,we,D,G,g,ee;o=s.state,f=s.next_in,g=s.input,l=f+(s.avail_in-5),p=s.next_out,ee=s.output,m=p-(i-s.avail_out),v=p+(s.avail_out-257),y=o.dmax,_=o.wsize,b=o.whave,T=o.wnext,E=o.window,A=o.hold,C=o.bits,L=o.lencode,I=o.distcode,H=(1<<o.lenbits)-1,z=(1<<o.distbits)-1;e:do{C<15&&(A+=g[f++]<<C,C+=8,A+=g[f++]<<C,C+=8),Q=L[A&H];t:for(;;){if(A>>>=U=Q>>>24,C-=U,(U=Q>>>16&255)===0)ee[p++]=65535&Q;else{if(!(16&U)){if((64&U)==0){Q=L[(65535&Q)+(A&(1<<U)-1)];continue t}if(32&U){o.mode=12;break e}s.msg="invalid literal/length code",o.mode=30;break e}Z=65535&Q,(U&=15)&&(C<U&&(A+=g[f++]<<C,C+=8),Z+=A&(1<<U)-1,A>>>=U,C-=U),C<15&&(A+=g[f++]<<C,C+=8,A+=g[f++]<<C,C+=8),Q=I[A&z];r:for(;;){if(A>>>=U=Q>>>24,C-=U,!(16&(U=Q>>>16&255))){if((64&U)==0){Q=I[(65535&Q)+(A&(1<<U)-1)];continue r}s.msg="invalid distance code",o.mode=30;break e}if(we=65535&Q,C<(U&=15)&&(A+=g[f++]<<C,(C+=8)<U&&(A+=g[f++]<<C,C+=8)),y<(we+=A&(1<<U)-1)){s.msg="invalid distance too far back",o.mode=30;break e}if(A>>>=U,C-=U,(U=p-m)<we){if(b<(U=we-U)&&o.sane){s.msg="invalid distance too far back",o.mode=30;break e}if(G=E,(D=0)===T){if(D+=_-U,U<Z){for(Z-=U;ee[p++]=E[D++],--U;);D=p-we,G=ee}}else if(T<U){if(D+=_+T-U,(U-=T)<Z){for(Z-=U;ee[p++]=E[D++],--U;);if(D=0,T<Z){for(Z-=U=T;ee[p++]=E[D++],--U;);D=p-we,G=ee}}}else if(D+=T-U,U<Z){for(Z-=U;ee[p++]=E[D++],--U;);D=p-we,G=ee}for(;2<Z;)ee[p++]=G[D++],ee[p++]=G[D++],ee[p++]=G[D++],Z-=3;Z&&(ee[p++]=G[D++],1<Z&&(ee[p++]=G[D++]))}else{for(D=p-we;ee[p++]=ee[D++],ee[p++]=ee[D++],ee[p++]=ee[D++],2<(Z-=3););Z&&(ee[p++]=ee[D++],1<Z&&(ee[p++]=ee[D++]))}break}}break}}while(f<l&&p<v);f-=Z=C>>3,A&=(1<<(C-=Z<<3))-1,s.next_in=f,s.next_out=p,s.avail_in=f<l?l-f+5:5-(f-l),s.avail_out=p<v?v-p+257:257-(p-v),o.hold=A,o.bits=C}},{}],49:[function(t,r,n){var s=t("../utils/common"),i=t("./adler32"),o=t("./crc32"),f=t("./inffast"),l=t("./inftrees"),p=1,m=2,v=0,y=-2,_=1,b=852,T=592;function E(D){return(D>>>24&255)+(D>>>8&65280)+((65280&D)<<8)+((255&D)<<24)}function A(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function C(D){var G;return D&&D.state?(G=D.state,D.total_in=D.total_out=G.total=0,D.msg="",G.wrap&&(D.adler=1&G.wrap),G.mode=_,G.last=0,G.havedict=0,G.dmax=32768,G.head=null,G.hold=0,G.bits=0,G.lencode=G.lendyn=new s.Buf32(b),G.distcode=G.distdyn=new s.Buf32(T),G.sane=1,G.back=-1,v):y}function L(D){var G;return D&&D.state?((G=D.state).wsize=0,G.whave=0,G.wnext=0,C(D)):y}function I(D,G){var g,ee;return D&&D.state?(ee=D.state,G<0?(g=0,G=-G):(g=1+(G>>4),G<48&&(G&=15)),G&&(G<8||15<G)?y:(ee.window!==null&&ee.wbits!==G&&(ee.window=null),ee.wrap=g,ee.wbits=G,L(D))):y}function H(D,G){var g,ee;return D?(ee=new A,(D.state=ee).window=null,(g=I(D,G))!==v&&(D.state=null),g):y}var z,Q,U=!0;function Z(D){if(U){var G;for(z=new s.Buf32(512),Q=new s.Buf32(32),G=0;G<144;)D.lens[G++]=8;for(;G<256;)D.lens[G++]=9;for(;G<280;)D.lens[G++]=7;for(;G<288;)D.lens[G++]=8;for(l(p,D.lens,0,288,z,0,D.work,{bits:9}),G=0;G<32;)D.lens[G++]=5;l(m,D.lens,0,32,Q,0,D.work,{bits:5}),U=!1}D.lencode=z,D.lenbits=9,D.distcode=Q,D.distbits=5}function we(D,G,g,ee){var ke,ae=D.state;return ae.window===null&&(ae.wsize=1<<ae.wbits,ae.wnext=0,ae.whave=0,ae.window=new s.Buf8(ae.wsize)),ee>=ae.wsize?(s.arraySet(ae.window,G,g-ae.wsize,ae.wsize,0),ae.wnext=0,ae.whave=ae.wsize):(ee<(ke=ae.wsize-ae.wnext)&&(ke=ee),s.arraySet(ae.window,G,g-ee,ke,ae.wnext),(ee-=ke)?(s.arraySet(ae.window,G,g-ee,ee,0),ae.wnext=ee,ae.whave=ae.wsize):(ae.wnext+=ke,ae.wnext===ae.wsize&&(ae.wnext=0),ae.whave<ae.wsize&&(ae.whave+=ke))),0}n.inflateReset=L,n.inflateReset2=I,n.inflateResetKeep=C,n.inflateInit=function(D){return H(D,15)},n.inflateInit2=H,n.inflate=function(D,G){var g,ee,ke,ae,je,ue,Pe,W,V,Ee,be,pe,We,Je,Ce,$e,Ye,ge,Be,tt,d,J,K,P,k=0,B=new s.Buf8(4),te=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!D||!D.state||!D.output||!D.input&&D.avail_in!==0)return y;(g=D.state).mode===12&&(g.mode=13),je=D.next_out,ke=D.output,Pe=D.avail_out,ae=D.next_in,ee=D.input,ue=D.avail_in,W=g.hold,V=g.bits,Ee=ue,be=Pe,J=v;e:for(;;)switch(g.mode){case _:if(g.wrap===0){g.mode=13;break}for(;V<16;){if(ue===0)break e;ue--,W+=ee[ae++]<<V,V+=8}if(2&g.wrap&&W===35615){B[g.check=0]=255&W,B[1]=W>>>8&255,g.check=o(g.check,B,2,0),V=W=0,g.mode=2;break}if(g.flags=0,g.head&&(g.head.done=!1),!(1&g.wrap)||(((255&W)<<8)+(W>>8))%31){D.msg="incorrect header check",g.mode=30;break}if((15&W)!=8){D.msg="unknown compression method",g.mode=30;break}if(V-=4,d=8+(15&(W>>>=4)),g.wbits===0)g.wbits=d;else if(d>g.wbits){D.msg="invalid window size",g.mode=30;break}g.dmax=1<<d,D.adler=g.check=1,g.mode=512&W?10:12,V=W=0;break;case 2:for(;V<16;){if(ue===0)break e;ue--,W+=ee[ae++]<<V,V+=8}if(g.flags=W,(255&g.flags)!=8){D.msg="unknown compression method",g.mode=30;break}if(57344&g.flags){D.msg="unknown header flags set",g.mode=30;break}g.head&&(g.head.text=W>>8&1),512&g.flags&&(B[0]=255&W,B[1]=W>>>8&255,g.check=o(g.check,B,2,0)),V=W=0,g.mode=3;case 3:for(;V<32;){if(ue===0)break e;ue--,W+=ee[ae++]<<V,V+=8}g.head&&(g.head.time=W),512&g.flags&&(B[0]=255&W,B[1]=W>>>8&255,B[2]=W>>>16&255,B[3]=W>>>24&255,g.check=o(g.check,B,4,0)),V=W=0,g.mode=4;case 4:for(;V<16;){if(ue===0)break e;ue--,W+=ee[ae++]<<V,V+=8}g.head&&(g.head.xflags=255&W,g.head.os=W>>8),512&g.flags&&(B[0]=255&W,B[1]=W>>>8&255,g.check=o(g.check,B,2,0)),V=W=0,g.mode=5;case 5:if(1024&g.flags){for(;V<16;){if(ue===0)break e;ue--,W+=ee[ae++]<<V,V+=8}g.length=W,g.head&&(g.head.extra_len=W),512&g.flags&&(B[0]=255&W,B[1]=W>>>8&255,g.check=o(g.check,B,2,0)),V=W=0}else g.head&&(g.head.extra=null);g.mode=6;case 6:if(1024&g.flags&&(ue<(pe=g.length)&&(pe=ue),pe&&(g.head&&(d=g.head.extra_len-g.length,g.head.extra||(g.head.extra=new Array(g.head.extra_len)),s.arraySet(g.head.extra,ee,ae,pe,d)),512&g.flags&&(g.check=o(g.check,ee,pe,ae)),ue-=pe,ae+=pe,g.length-=pe),g.length))break e;g.length=0,g.mode=7;case 7:if(2048&g.flags){if(ue===0)break e;for(pe=0;d=ee[ae+pe++],g.head&&d&&g.length<65536&&(g.head.name+=String.fromCharCode(d)),d&&pe<ue;);if(512&g.flags&&(g.check=o(g.check,ee,pe,ae)),ue-=pe,ae+=pe,d)break e}else g.head&&(g.head.name=null);g.length=0,g.mode=8;case 8:if(4096&g.flags){if(ue===0)break e;for(pe=0;d=ee[ae+pe++],g.head&&d&&g.length<65536&&(g.head.comment+=String.fromCharCode(d)),d&&pe<ue;);if(512&g.flags&&(g.check=o(g.check,ee,pe,ae)),ue-=pe,ae+=pe,d)break e}else g.head&&(g.head.comment=null);g.mode=9;case 9:if(512&g.flags){for(;V<16;){if(ue===0)break e;ue--,W+=ee[ae++]<<V,V+=8}if(W!==(65535&g.check)){D.msg="header crc mismatch",g.mode=30;break}V=W=0}g.head&&(g.head.hcrc=g.flags>>9&1,g.head.done=!0),D.adler=g.check=0,g.mode=12;break;case 10:for(;V<32;){if(ue===0)break e;ue--,W+=ee[ae++]<<V,V+=8}D.adler=g.check=E(W),V=W=0,g.mode=11;case 11:if(g.havedict===0)return D.next_out=je,D.avail_out=Pe,D.next_in=ae,D.avail_in=ue,g.hold=W,g.bits=V,2;D.adler=g.check=1,g.mode=12;case 12:if(G===5||G===6)break e;case 13:if(g.last){W>>>=7&V,V-=7&V,g.mode=27;break}for(;V<3;){if(ue===0)break e;ue--,W+=ee[ae++]<<V,V+=8}switch(g.last=1&W,V-=1,3&(W>>>=1)){case 0:g.mode=14;break;case 1:if(Z(g),g.mode=20,G!==6)break;W>>>=2,V-=2;break e;case 2:g.mode=17;break;case 3:D.msg="invalid block type",g.mode=30}W>>>=2,V-=2;break;case 14:for(W>>>=7&V,V-=7&V;V<32;){if(ue===0)break e;ue--,W+=ee[ae++]<<V,V+=8}if((65535&W)!=(W>>>16^65535)){D.msg="invalid stored block lengths",g.mode=30;break}if(g.length=65535&W,V=W=0,g.mode=15,G===6)break e;case 15:g.mode=16;case 16:if(pe=g.length){if(ue<pe&&(pe=ue),Pe<pe&&(pe=Pe),pe===0)break e;s.arraySet(ke,ee,ae,pe,je),ue-=pe,ae+=pe,Pe-=pe,je+=pe,g.length-=pe;break}g.mode=12;break;case 17:for(;V<14;){if(ue===0)break e;ue--,W+=ee[ae++]<<V,V+=8}if(g.nlen=257+(31&W),W>>>=5,V-=5,g.ndist=1+(31&W),W>>>=5,V-=5,g.ncode=4+(15&W),W>>>=4,V-=4,286<g.nlen||30<g.ndist){D.msg="too many length or distance symbols",g.mode=30;break}g.have=0,g.mode=18;case 18:for(;g.have<g.ncode;){for(;V<3;){if(ue===0)break e;ue--,W+=ee[ae++]<<V,V+=8}g.lens[te[g.have++]]=7&W,W>>>=3,V-=3}for(;g.have<19;)g.lens[te[g.have++]]=0;if(g.lencode=g.lendyn,g.lenbits=7,K={bits:g.lenbits},J=l(0,g.lens,0,19,g.lencode,0,g.work,K),g.lenbits=K.bits,J){D.msg="invalid code lengths set",g.mode=30;break}g.have=0,g.mode=19;case 19:for(;g.have<g.nlen+g.ndist;){for(;$e=(k=g.lencode[W&(1<<g.lenbits)-1])>>>16&255,Ye=65535&k,!((Ce=k>>>24)<=V);){if(ue===0)break e;ue--,W+=ee[ae++]<<V,V+=8}if(Ye<16)W>>>=Ce,V-=Ce,g.lens[g.have++]=Ye;else{if(Ye===16){for(P=Ce+2;V<P;){if(ue===0)break e;ue--,W+=ee[ae++]<<V,V+=8}if(W>>>=Ce,V-=Ce,g.have===0){D.msg="invalid bit length repeat",g.mode=30;break}d=g.lens[g.have-1],pe=3+(3&W),W>>>=2,V-=2}else if(Ye===17){for(P=Ce+3;V<P;){if(ue===0)break e;ue--,W+=ee[ae++]<<V,V+=8}V-=Ce,d=0,pe=3+(7&(W>>>=Ce)),W>>>=3,V-=3}else{for(P=Ce+7;V<P;){if(ue===0)break e;ue--,W+=ee[ae++]<<V,V+=8}V-=Ce,d=0,pe=11+(127&(W>>>=Ce)),W>>>=7,V-=7}if(g.have+pe>g.nlen+g.ndist){D.msg="invalid bit length repeat",g.mode=30;break}for(;pe--;)g.lens[g.have++]=d}}if(g.mode===30)break;if(g.lens[256]===0){D.msg="invalid code -- missing end-of-block",g.mode=30;break}if(g.lenbits=9,K={bits:g.lenbits},J=l(p,g.lens,0,g.nlen,g.lencode,0,g.work,K),g.lenbits=K.bits,J){D.msg="invalid literal/lengths set",g.mode=30;break}if(g.distbits=6,g.distcode=g.distdyn,K={bits:g.distbits},J=l(m,g.lens,g.nlen,g.ndist,g.distcode,0,g.work,K),g.distbits=K.bits,J){D.msg="invalid distances set",g.mode=30;break}if(g.mode=20,G===6)break e;case 20:g.mode=21;case 21:if(6<=ue&&258<=Pe){D.next_out=je,D.avail_out=Pe,D.next_in=ae,D.avail_in=ue,g.hold=W,g.bits=V,f(D,be),je=D.next_out,ke=D.output,Pe=D.avail_out,ae=D.next_in,ee=D.input,ue=D.avail_in,W=g.hold,V=g.bits,g.mode===12&&(g.back=-1);break}for(g.back=0;$e=(k=g.lencode[W&(1<<g.lenbits)-1])>>>16&255,Ye=65535&k,!((Ce=k>>>24)<=V);){if(ue===0)break e;ue--,W+=ee[ae++]<<V,V+=8}if($e&&(240&$e)==0){for(ge=Ce,Be=$e,tt=Ye;$e=(k=g.lencode[tt+((W&(1<<ge+Be)-1)>>ge)])>>>16&255,Ye=65535&k,!(ge+(Ce=k>>>24)<=V);){if(ue===0)break e;ue--,W+=ee[ae++]<<V,V+=8}W>>>=ge,V-=ge,g.back+=ge}if(W>>>=Ce,V-=Ce,g.back+=Ce,g.length=Ye,$e===0){g.mode=26;break}if(32&$e){g.back=-1,g.mode=12;break}if(64&$e){D.msg="invalid literal/length code",g.mode=30;break}g.extra=15&$e,g.mode=22;case 22:if(g.extra){for(P=g.extra;V<P;){if(ue===0)break e;ue--,W+=ee[ae++]<<V,V+=8}g.length+=W&(1<<g.extra)-1,W>>>=g.extra,V-=g.extra,g.back+=g.extra}g.was=g.length,g.mode=23;case 23:for(;$e=(k=g.distcode[W&(1<<g.distbits)-1])>>>16&255,Ye=65535&k,!((Ce=k>>>24)<=V);){if(ue===0)break e;ue--,W+=ee[ae++]<<V,V+=8}if((240&$e)==0){for(ge=Ce,Be=$e,tt=Ye;$e=(k=g.distcode[tt+((W&(1<<ge+Be)-1)>>ge)])>>>16&255,Ye=65535&k,!(ge+(Ce=k>>>24)<=V);){if(ue===0)break e;ue--,W+=ee[ae++]<<V,V+=8}W>>>=ge,V-=ge,g.back+=ge}if(W>>>=Ce,V-=Ce,g.back+=Ce,64&$e){D.msg="invalid distance code",g.mode=30;break}g.offset=Ye,g.extra=15&$e,g.mode=24;case 24:if(g.extra){for(P=g.extra;V<P;){if(ue===0)break e;ue--,W+=ee[ae++]<<V,V+=8}g.offset+=W&(1<<g.extra)-1,W>>>=g.extra,V-=g.extra,g.back+=g.extra}if(g.offset>g.dmax){D.msg="invalid distance too far back",g.mode=30;break}g.mode=25;case 25:if(Pe===0)break e;if(pe=be-Pe,g.offset>pe){if((pe=g.offset-pe)>g.whave&&g.sane){D.msg="invalid distance too far back",g.mode=30;break}We=pe>g.wnext?(pe-=g.wnext,g.wsize-pe):g.wnext-pe,pe>g.length&&(pe=g.length),Je=g.window}else Je=ke,We=je-g.offset,pe=g.length;for(Pe<pe&&(pe=Pe),Pe-=pe,g.length-=pe;ke[je++]=Je[We++],--pe;);g.length===0&&(g.mode=21);break;case 26:if(Pe===0)break e;ke[je++]=g.length,Pe--,g.mode=21;break;case 27:if(g.wrap){for(;V<32;){if(ue===0)break e;ue--,W|=ee[ae++]<<V,V+=8}if(be-=Pe,D.total_out+=be,g.total+=be,be&&(D.adler=g.check=g.flags?o(g.check,ke,be,je-be):i(g.check,ke,be,je-be)),be=Pe,(g.flags?W:E(W))!==g.check){D.msg="incorrect data check",g.mode=30;break}V=W=0}g.mode=28;case 28:if(g.wrap&&g.flags){for(;V<32;){if(ue===0)break e;ue--,W+=ee[ae++]<<V,V+=8}if(W!==(4294967295&g.total)){D.msg="incorrect length check",g.mode=30;break}V=W=0}g.mode=29;case 29:J=1;break e;case 30:J=-3;break e;case 31:return-4;case 32:default:return y}return D.next_out=je,D.avail_out=Pe,D.next_in=ae,D.avail_in=ue,g.hold=W,g.bits=V,(g.wsize||be!==D.avail_out&&g.mode<30&&(g.mode<27||G!==4))&&we(D,D.output,D.next_out,be-D.avail_out)?(g.mode=31,-4):(Ee-=D.avail_in,be-=D.avail_out,D.total_in+=Ee,D.total_out+=be,g.total+=be,g.wrap&&be&&(D.adler=g.check=g.flags?o(g.check,ke,be,D.next_out-be):i(g.check,ke,be,D.next_out-be)),D.data_type=g.bits+(g.last?64:0)+(g.mode===12?128:0)+(g.mode===20||g.mode===15?256:0),(Ee==0&&be===0||G===4)&&J===v&&(J=-5),J)},n.inflateEnd=function(D){if(!D||!D.state)return y;var G=D.state;return G.window&&(G.window=null),D.state=null,v},n.inflateGetHeader=function(D,G){var g;return D&&D.state?(2&(g=D.state).wrap)==0?y:((g.head=G).done=!1,v):y},n.inflateSetDictionary=function(D,G){var g,ee=G.length;return D&&D.state?(g=D.state).wrap!==0&&g.mode!==11?y:g.mode===11&&i(1,G,ee,0)!==g.check?-3:we(D,G,ee,ee)?(g.mode=31,-4):(g.havedict=1,v):y},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,r,n){var s=t("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],f=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],l=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(p,m,v,y,_,b,T,E){var A,C,L,I,H,z,Q,U,Z,we=E.bits,D=0,G=0,g=0,ee=0,ke=0,ae=0,je=0,ue=0,Pe=0,W=0,V=null,Ee=0,be=new s.Buf16(16),pe=new s.Buf16(16),We=null,Je=0;for(D=0;D<=15;D++)be[D]=0;for(G=0;G<y;G++)be[m[v+G]]++;for(ke=we,ee=15;1<=ee&&be[ee]===0;ee--);if(ee<ke&&(ke=ee),ee===0)return _[b++]=20971520,_[b++]=20971520,E.bits=1,0;for(g=1;g<ee&&be[g]===0;g++);for(ke<g&&(ke=g),D=ue=1;D<=15;D++)if(ue<<=1,(ue-=be[D])<0)return-1;if(0<ue&&(p===0||ee!==1))return-1;for(pe[1]=0,D=1;D<15;D++)pe[D+1]=pe[D]+be[D];for(G=0;G<y;G++)m[v+G]!==0&&(T[pe[m[v+G]]++]=G);if(z=p===0?(V=We=T,19):p===1?(V=i,Ee-=257,We=o,Je-=257,256):(V=f,We=l,-1),D=g,H=b,je=G=W=0,L=-1,I=(Pe=1<<(ae=ke))-1,p===1&&852<Pe||p===2&&592<Pe)return 1;for(;;){for(Q=D-je,Z=T[G]<z?(U=0,T[G]):T[G]>z?(U=We[Je+T[G]],V[Ee+T[G]]):(U=96,0),A=1<<D-je,g=C=1<<ae;_[H+(W>>je)+(C-=A)]=Q<<24|U<<16|Z|0,C!==0;);for(A=1<<D-1;W&A;)A>>=1;if(A!==0?(W&=A-1,W+=A):W=0,G++,--be[D]==0){if(D===ee)break;D=m[v+T[G]]}if(ke<D&&(W&I)!==L){for(je===0&&(je=ke),H+=g,ue=1<<(ae=D-je);ae+je<ee&&!((ue-=be[ae+je])<=0);)ae++,ue<<=1;if(Pe+=1<<ae,p===1&&852<Pe||p===2&&592<Pe)return 1;_[L=W&I]=ke<<24|ae<<16|H-b|0}}return W!==0&&(_[H+W]=D-je<<24|64<<16|0),E.bits=ke,0}},{"../utils/common":41}],51:[function(t,r,n){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,r,n){var s=t("../utils/common"),i=0,o=1;function f(k){for(var B=k.length;0<=--B;)k[B]=0}var l=0,p=29,m=256,v=m+1+p,y=30,_=19,b=2*v+1,T=15,E=16,A=7,C=256,L=16,I=17,H=18,z=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Q=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],U=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],we=new Array(2*(v+2));f(we);var D=new Array(2*y);f(D);var G=new Array(512);f(G);var g=new Array(256);f(g);var ee=new Array(p);f(ee);var ke,ae,je,ue=new Array(y);function Pe(k,B,te,se,q){this.static_tree=k,this.extra_bits=B,this.extra_base=te,this.elems=se,this.max_length=q,this.has_stree=k&&k.length}function W(k,B){this.dyn_tree=k,this.max_code=0,this.stat_desc=B}function V(k){return k<256?G[k]:G[256+(k>>>7)]}function Ee(k,B){k.pending_buf[k.pending++]=255&B,k.pending_buf[k.pending++]=B>>>8&255}function be(k,B,te){k.bi_valid>E-te?(k.bi_buf|=B<<k.bi_valid&65535,Ee(k,k.bi_buf),k.bi_buf=B>>E-k.bi_valid,k.bi_valid+=te-E):(k.bi_buf|=B<<k.bi_valid&65535,k.bi_valid+=te)}function pe(k,B,te){be(k,te[2*B],te[2*B+1])}function We(k,B){for(var te=0;te|=1&k,k>>>=1,te<<=1,0<--B;);return te>>>1}function Je(k,B,te){var se,q,he=new Array(T+1),ve=0;for(se=1;se<=T;se++)he[se]=ve=ve+te[se-1]<<1;for(q=0;q<=B;q++){var fe=k[2*q+1];fe!==0&&(k[2*q]=We(he[fe]++,fe))}}function Ce(k){var B;for(B=0;B<v;B++)k.dyn_ltree[2*B]=0;for(B=0;B<y;B++)k.dyn_dtree[2*B]=0;for(B=0;B<_;B++)k.bl_tree[2*B]=0;k.dyn_ltree[2*C]=1,k.opt_len=k.static_len=0,k.last_lit=k.matches=0}function $e(k){8<k.bi_valid?Ee(k,k.bi_buf):0<k.bi_valid&&(k.pending_buf[k.pending++]=k.bi_buf),k.bi_buf=0,k.bi_valid=0}function Ye(k,B,te,se){var q=2*B,he=2*te;return k[q]<k[he]||k[q]===k[he]&&se[B]<=se[te]}function ge(k,B,te){for(var se=k.heap[te],q=te<<1;q<=k.heap_len&&(q<k.heap_len&&Ye(B,k.heap[q+1],k.heap[q],k.depth)&&q++,!Ye(B,se,k.heap[q],k.depth));)k.heap[te]=k.heap[q],te=q,q<<=1;k.heap[te]=se}function Be(k,B,te){var se,q,he,ve,fe=0;if(k.last_lit!==0)for(;se=k.pending_buf[k.d_buf+2*fe]<<8|k.pending_buf[k.d_buf+2*fe+1],q=k.pending_buf[k.l_buf+fe],fe++,se===0?pe(k,q,B):(pe(k,(he=g[q])+m+1,B),(ve=z[he])!==0&&be(k,q-=ee[he],ve),pe(k,he=V(--se),te),(ve=Q[he])!==0&&be(k,se-=ue[he],ve)),fe<k.last_lit;);pe(k,C,B)}function tt(k,B){var te,se,q,he=B.dyn_tree,ve=B.stat_desc.static_tree,fe=B.stat_desc.has_stree,Se=B.stat_desc.elems,Le=-1;for(k.heap_len=0,k.heap_max=b,te=0;te<Se;te++)he[2*te]!==0?(k.heap[++k.heap_len]=Le=te,k.depth[te]=0):he[2*te+1]=0;for(;k.heap_len<2;)he[2*(q=k.heap[++k.heap_len]=Le<2?++Le:0)]=1,k.depth[q]=0,k.opt_len--,fe&&(k.static_len-=ve[2*q+1]);for(B.max_code=Le,te=k.heap_len>>1;1<=te;te--)ge(k,he,te);for(q=Se;te=k.heap[1],k.heap[1]=k.heap[k.heap_len--],ge(k,he,1),se=k.heap[1],k.heap[--k.heap_max]=te,k.heap[--k.heap_max]=se,he[2*q]=he[2*te]+he[2*se],k.depth[q]=(k.depth[te]>=k.depth[se]?k.depth[te]:k.depth[se])+1,he[2*te+1]=he[2*se+1]=q,k.heap[1]=q++,ge(k,he,1),2<=k.heap_len;);k.heap[--k.heap_max]=k.heap[1],(function(Ae,Qe){var gt,it,Et,Ve,St,Nt,De=Qe.dyn_tree,At=Qe.max_code,Ct=Qe.stat_desc.static_tree,tr=Qe.stat_desc.has_stree,at=Qe.stat_desc.extra_bits,rr=Qe.stat_desc.extra_base,ot=Qe.stat_desc.max_length,Tt=0;for(Ve=0;Ve<=T;Ve++)Ae.bl_count[Ve]=0;for(De[2*Ae.heap[Ae.heap_max]+1]=0,gt=Ae.heap_max+1;gt<b;gt++)ot<(Ve=De[2*De[2*(it=Ae.heap[gt])+1]+1]+1)&&(Ve=ot,Tt++),De[2*it+1]=Ve,At<it||(Ae.bl_count[Ve]++,St=0,rr<=it&&(St=at[it-rr]),Nt=De[2*it],Ae.opt_len+=Nt*(Ve+St),tr&&(Ae.static_len+=Nt*(Ct[2*it+1]+St)));if(Tt!==0){do{for(Ve=ot-1;Ae.bl_count[Ve]===0;)Ve--;Ae.bl_count[Ve]--,Ae.bl_count[Ve+1]+=2,Ae.bl_count[ot]--,Tt-=2}while(0<Tt);for(Ve=ot;Ve!==0;Ve--)for(it=Ae.bl_count[Ve];it!==0;)At<(Et=Ae.heap[--gt])||(De[2*Et+1]!==Ve&&(Ae.opt_len+=(Ve-De[2*Et+1])*De[2*Et],De[2*Et+1]=Ve),it--)}})(k,B),Je(he,Le,k.bl_count)}function d(k,B,te){var se,q,he=-1,ve=B[1],fe=0,Se=7,Le=4;for(ve===0&&(Se=138,Le=3),B[2*(te+1)+1]=65535,se=0;se<=te;se++)q=ve,ve=B[2*(se+1)+1],++fe<Se&&q===ve||(fe<Le?k.bl_tree[2*q]+=fe:q!==0?(q!==he&&k.bl_tree[2*q]++,k.bl_tree[2*L]++):fe<=10?k.bl_tree[2*I]++:k.bl_tree[2*H]++,he=q,Le=(fe=0)===ve?(Se=138,3):q===ve?(Se=6,3):(Se=7,4))}function J(k,B,te){var se,q,he=-1,ve=B[1],fe=0,Se=7,Le=4;for(ve===0&&(Se=138,Le=3),se=0;se<=te;se++)if(q=ve,ve=B[2*(se+1)+1],!(++fe<Se&&q===ve)){if(fe<Le)for(;pe(k,q,k.bl_tree),--fe!=0;);else q!==0?(q!==he&&(pe(k,q,k.bl_tree),fe--),pe(k,L,k.bl_tree),be(k,fe-3,2)):fe<=10?(pe(k,I,k.bl_tree),be(k,fe-3,3)):(pe(k,H,k.bl_tree),be(k,fe-11,7));he=q,Le=(fe=0)===ve?(Se=138,3):q===ve?(Se=6,3):(Se=7,4)}}f(ue);var K=!1;function P(k,B,te,se){be(k,(l<<1)+(se?1:0),3),(function(q,he,ve,fe){$e(q),fe&&(Ee(q,ve),Ee(q,~ve)),s.arraySet(q.pending_buf,q.window,he,ve,q.pending),q.pending+=ve})(k,B,te,!0)}n._tr_init=function(k){K||((function(){var B,te,se,q,he,ve=new Array(T+1);for(q=se=0;q<p-1;q++)for(ee[q]=se,B=0;B<1<<z[q];B++)g[se++]=q;for(g[se-1]=q,q=he=0;q<16;q++)for(ue[q]=he,B=0;B<1<<Q[q];B++)G[he++]=q;for(he>>=7;q<y;q++)for(ue[q]=he<<7,B=0;B<1<<Q[q]-7;B++)G[256+he++]=q;for(te=0;te<=T;te++)ve[te]=0;for(B=0;B<=143;)we[2*B+1]=8,B++,ve[8]++;for(;B<=255;)we[2*B+1]=9,B++,ve[9]++;for(;B<=279;)we[2*B+1]=7,B++,ve[7]++;for(;B<=287;)we[2*B+1]=8,B++,ve[8]++;for(Je(we,v+1,ve),B=0;B<y;B++)D[2*B+1]=5,D[2*B]=We(B,5);ke=new Pe(we,z,m+1,v,T),ae=new Pe(D,Q,0,y,T),je=new Pe(new Array(0),U,0,_,A)})(),K=!0),k.l_desc=new W(k.dyn_ltree,ke),k.d_desc=new W(k.dyn_dtree,ae),k.bl_desc=new W(k.bl_tree,je),k.bi_buf=0,k.bi_valid=0,Ce(k)},n._tr_stored_block=P,n._tr_flush_block=function(k,B,te,se){var q,he,ve=0;0<k.level?(k.strm.data_type===2&&(k.strm.data_type=(function(fe){var Se,Le=4093624447;for(Se=0;Se<=31;Se++,Le>>>=1)if(1&Le&&fe.dyn_ltree[2*Se]!==0)return i;if(fe.dyn_ltree[18]!==0||fe.dyn_ltree[20]!==0||fe.dyn_ltree[26]!==0)return o;for(Se=32;Se<m;Se++)if(fe.dyn_ltree[2*Se]!==0)return o;return i})(k)),tt(k,k.l_desc),tt(k,k.d_desc),ve=(function(fe){var Se;for(d(fe,fe.dyn_ltree,fe.l_desc.max_code),d(fe,fe.dyn_dtree,fe.d_desc.max_code),tt(fe,fe.bl_desc),Se=_-1;3<=Se&&fe.bl_tree[2*Z[Se]+1]===0;Se--);return fe.opt_len+=3*(Se+1)+5+5+4,Se})(k),q=k.opt_len+3+7>>>3,(he=k.static_len+3+7>>>3)<=q&&(q=he)):q=he=te+5,te+4<=q&&B!==-1?P(k,B,te,se):k.strategy===4||he===q?(be(k,2+(se?1:0),3),Be(k,we,D)):(be(k,4+(se?1:0),3),(function(fe,Se,Le,Ae){var Qe;for(be(fe,Se-257,5),be(fe,Le-1,5),be(fe,Ae-4,4),Qe=0;Qe<Ae;Qe++)be(fe,fe.bl_tree[2*Z[Qe]+1],3);J(fe,fe.dyn_ltree,Se-1),J(fe,fe.dyn_dtree,Le-1)})(k,k.l_desc.max_code+1,k.d_desc.max_code+1,ve+1),Be(k,k.dyn_ltree,k.dyn_dtree)),Ce(k),se&&$e(k)},n._tr_tally=function(k,B,te){return k.pending_buf[k.d_buf+2*k.last_lit]=B>>>8&255,k.pending_buf[k.d_buf+2*k.last_lit+1]=255&B,k.pending_buf[k.l_buf+k.last_lit]=255&te,k.last_lit++,B===0?k.dyn_ltree[2*te]++:(k.matches++,B--,k.dyn_ltree[2*(g[te]+m+1)]++,k.dyn_dtree[2*V(B)]++),k.last_lit===k.lit_bufsize-1},n._tr_align=function(k){be(k,2,3),pe(k,C,we),(function(B){B.bi_valid===16?(Ee(B,B.bi_buf),B.bi_buf=0,B.bi_valid=0):8<=B.bi_valid&&(B.pending_buf[B.pending++]=255&B.bi_buf,B.bi_buf>>=8,B.bi_valid-=8)})(k)}},{"../utils/common":41}],53:[function(t,r,n){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,r,n){(function(s){(function(i,o){if(!i.setImmediate){var f,l,p,m,v=1,y={},_=!1,b=i.document,T=Object.getPrototypeOf&&Object.getPrototypeOf(i);T=T&&T.setTimeout?T:i,f={}.toString.call(i.process)==="[object process]"?function(L){Ut.nextTick(function(){A(L)})}:(function(){if(i.postMessage&&!i.importScripts){var L=!0,I=i.onmessage;return i.onmessage=function(){L=!1},i.postMessage("","*"),i.onmessage=I,L}})()?(m="setImmediate$"+Math.random()+"$",i.addEventListener?i.addEventListener("message",C,!1):i.attachEvent("onmessage",C),function(L){i.postMessage(m+L,"*")}):i.MessageChannel?((p=new MessageChannel).port1.onmessage=function(L){A(L.data)},function(L){p.port2.postMessage(L)}):b&&"onreadystatechange"in b.createElement("script")?(l=b.documentElement,function(L){var I=b.createElement("script");I.onreadystatechange=function(){A(L),I.onreadystatechange=null,l.removeChild(I),I=null},l.appendChild(I)}):function(L){setTimeout(A,0,L)},T.setImmediate=function(L){typeof L!="function"&&(L=new Function(""+L));for(var I=new Array(arguments.length-1),H=0;H<I.length;H++)I[H]=arguments[H+1];var z={callback:L,args:I};return y[v]=z,f(v),v++},T.clearImmediate=E}function E(L){delete y[L]}function A(L){if(_)setTimeout(A,0,L);else{var I=y[L];if(I){_=!0;try{(function(H){var z=H.callback,Q=H.args;switch(Q.length){case 0:z();break;case 1:z(Q[0]);break;case 2:z(Q[0],Q[1]);break;case 3:z(Q[0],Q[1],Q[2]);break;default:z.apply(o,Q)}})(I)}finally{E(L),_=!1}}}}function C(L){L.source===i&&typeof L.data=="string"&&L.data.indexOf(m)===0&&A(+L.data.slice(m.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof Wt<"u"?Wt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Vs);var Zr=(()=>{if(typeof self>"u")return!1;if("top"in self&&self!==top)try{top.window.document._=0}catch{return!1}return"showOpenFilePicker"in self})(),za=Zr?Promise.resolve().then(function(){return Ga}):Promise.resolve().then(function(){return Qa});function Ma(...c){return j(this,null,function*(){return(yield za).default(...c)})}Zr?Promise.resolve().then(function(){return Ka}):Promise.resolve().then(function(){return eo});var Ua=Zr?Promise.resolve().then(function(){return Ja}):Promise.resolve().then(function(){return ro});function qa(...c){return j(this,null,function*(){return(yield Ua).default(...c)})}var Wa=c=>j(null,null,function*(){let e=yield c.getFile();return e.handle=c,e}),Va=(...e)=>j(null,[...e],function*(c=[{}]){Array.isArray(c)||(c=[c]);let t=[];c.forEach((s,i)=>{t[i]={description:s.description||"Files",accept:{}},s.mimeTypes?s.mimeTypes.map(o=>{t[i].accept[o]=s.extensions||[]}):t[i].accept["*/*"]=s.extensions||[]});let r=yield window.showOpenFilePicker({id:c[0].id,startIn:c[0].startIn,types:t,multiple:c[0].multiple||!1,excludeAcceptAllOption:c[0].excludeAcceptAllOption||!1}),n=yield Promise.all(r.map(Wa));return c[0].multiple?n:n[0]}),Ga={__proto__:null,default:Va};function qr(c){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var r=t.done;return Promise.resolve(t.value).then(function(n){return{value:n,done:r}})}return qr=function(t){this.s=t,this.n=t.next},qr.prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(t){var r=this.s.return;return r===void 0?Promise.resolve({value:t,done:!0}):e(r.apply(this.s,arguments))},throw:function(t){var r=this.s.return;return r===void 0?Promise.reject(t):e(r.apply(this.s,arguments))}},new qr(c)}var Gs=(n,s,...i)=>j(null,[n,s,...i],function*(c,e,t=c.name,r){let o=[],f=[];var l,p=!1,m=!1;try{for(var v,y=(function(_){var b,T,E,A=2;for(typeof Symbol<"u"&&(T=Symbol.asyncIterator,E=Symbol.iterator);A--;){if(T&&(b=_[T])!=null)return b.call(_);if(E&&(b=_[E])!=null)return new qr(b.call(_));T="@@asyncIterator",E="@@iterator"}throw new TypeError("Object is not async iterable")})(c.values());p=!(v=yield y.next()).done;p=!1){let _=v.value,b=`${t}/${_.name}`;_.kind==="file"?f.push(_.getFile().then(T=>(T.directoryHandle=c,T.handle=_,Object.defineProperty(T,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>b})))):_.kind!=="directory"||!e||r&&r(_)||o.push(Gs(_,e,b,r))}}catch(_){m=!0,l=_}finally{try{p&&y.return!=null&&(yield y.return())}finally{if(m)throw l}}return[...(yield Promise.all(o)).flat(),...yield Promise.all(f)]}),Ha=(...e)=>j(null,[...e],function*(c={}){c.recursive=c.recursive||!1,c.mode=c.mode||"read";let t=yield window.showDirectoryPicker({id:c.id,startIn:c.startIn,mode:c.mode});return(yield(yield t.values()).next()).done?[t]:Gs(t,c.recursive,void 0,c.skipDirectory)}),Ka={__proto__:null,default:Ha},Ya=(s,...i)=>j(null,[s,...i],function*(c,e=[{}],t=null,r=!1,n=null){Array.isArray(e)||(e=[e]),e[0].fileName=e[0].fileName||"Untitled";let o=[],f=null;if(c instanceof Blob&&c.type?f=c.type:c.headers&&c.headers.get("content-type")&&(f=c.headers.get("content-type")),e.forEach((m,v)=>{o[v]={description:m.description||"Files",accept:{}},m.mimeTypes?(v===0&&f&&m.mimeTypes.push(f),m.mimeTypes.map(y=>{o[v].accept[y]=m.extensions||[]})):f?o[v].accept[f]=m.extensions||[]:o[v].accept["*/*"]=m.extensions||[]}),t)try{yield t.getFile()}catch(m){if(t=null,r)throw m}let l=t||(yield window.showSaveFilePicker({suggestedName:e[0].fileName,id:e[0].id,startIn:e[0].startIn,types:o,excludeAcceptAllOption:e[0].excludeAcceptAllOption||!1}));!t&&n&&n(l);let p=yield l.createWritable();return"stream"in c?(yield c.stream().pipeTo(p),l):"body"in c?(yield c.body.pipeTo(p),l):(yield p.write(yield c),yield p.close(),l)}),Ja={__proto__:null,default:Ya},Za=(...e)=>j(null,[...e],function*(c=[{}]){return Array.isArray(c)||(c=[c]),new Promise((t,r)=>{let n=document.createElement("input");n.type="file";let s=[...c.map(l=>l.mimeTypes||[]),...c.map(l=>l.extensions||[])].join();n.multiple=c[0].multiple||!1,n.accept=s||"",n.style.display="none",document.body.append(n);let i=l=>{typeof o=="function"&&o(),t(l)},o=c[0].legacySetup&&c[0].legacySetup(i,()=>o(r),n),f=()=>{window.removeEventListener("focus",f),n.remove()};n.addEventListener("click",()=>{window.addEventListener("focus",f)}),n.addEventListener("change",()=>{window.removeEventListener("focus",f),n.remove(),i(n.multiple?Array.from(n.files):n.files[0])}),"showPicker"in HTMLInputElement.prototype?n.showPicker():n.click()})}),Qa={__proto__:null,default:Za},Xa=(...e)=>j(null,[...e],function*(c=[{}]){return Array.isArray(c)||(c=[c]),c[0].recursive=c[0].recursive||!1,new Promise((t,r)=>{let n=document.createElement("input");n.type="file",n.webkitdirectory=!0;let s=o=>{typeof i=="function"&&i(),t(o)},i=c[0].legacySetup&&c[0].legacySetup(s,()=>i(r),n);n.addEventListener("change",()=>{let o=Array.from(n.files);c[0].recursive?c[0].recursive&&c[0].skipDirectory&&(o=o.filter(f=>f.webkitRelativePath.split("/").every(l=>!c[0].skipDirectory({name:l,kind:"directory"})))):o=o.filter(f=>f.webkitRelativePath.split("/").length===2),s(o)}),"showPicker"in HTMLInputElement.prototype?n.showPicker():n.click()})}),eo={__proto__:null,default:Xa},to=(t,...r)=>j(null,[t,...r],function*(c,e={}){Array.isArray(e)&&(e=e[0]);let n=document.createElement("a"),s=c;"body"in c&&(s=yield(function(f,l){return j(this,null,function*(){let p=f.getReader(),m=new ReadableStream({start:_=>(function b(){return j(this,null,function*(){return p.read().then(({done:T,value:E})=>{if(!T)return _.enqueue(E),b();_.close()})})})()}),v=new Response(m),y=yield v.blob();return p.releaseLock(),new Blob([y],{type:l})})})(c.body,c.headers.get("content-type"))),n.download=e.fileName||"Untitled",n.href=URL.createObjectURL(yield s);let i=()=>{typeof o=="function"&&o()},o=e.legacySetup&&e.legacySetup(i,()=>o(),n);return n.addEventListener("click",()=>{setTimeout(()=>URL.revokeObjectURL(n.href),3e4),i()}),n.click(),null}),ro={__proto__:null,default:to},no=":host{display:block;--jeep-sqlite-top:10%;--jeep-sqlite-right:1%;--jeep-sqlite-font-size:2em;--jeep-sqlite-padding:2%;--jeep-sqlite-background-color:#a9a9a9;--jeep-sqlite-color:#ffffff}#fileElem{display:none}#pickButton{position:absolute;top:var(--jeep-sqlite-top);right:var(--jeep-sqlite-right);font-size:var(--jeep-sqlite-font-size);padding:var(--jeep-sqlite-padding);background-color:var(--jeep-sqlite-background-color);color:var(--jeep-sqlite-color)}#saveButton{position:absolute;top:var(--jeep-sqlite-top);right:var(--jeep-sqlite-right);font-size:var(--jeep-sqlite-font-size);padding:var(--jeep-sqlite-padding);background-color:var(--jeep-sqlite-background-color);color:var(--jeep-sqlite-color)}",so=no,io=zn(class extends Ln{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.importProgress=lr(this,"jeepSqliteImportProgress",7),this.exportProgress=lr(this,"jeepSqliteExportProgress",7),this.HTTPRequestEnded=lr(this,"jeepSqliteHTTPRequestEnded",7),this.PickDatabaseEnded=lr(this,"jeepSqlitePickDatabaseEnded",7),this.SaveDatabaseEnded=lr(this,"jeepSqliteSaveDatabaseToDisk",7),this.isStore=!1,this._dbDict={},this.databaseList={},this._versionUpgrades={},this._overwrite=!0,this.autoSave=!1,this.typeOrm=!1,this.wasmPath=void 0,this.pickText=void 0,this.saveText=void 0,this.buttonOptions=void 0,this.innerAutoSave=void 0,this.innerTypeOrm=void 0,this.innerWasmPath=void 0,this.innerPickText=void 0,this.innerSaveText=void 0,this.innerButtonOptions=void 0}parseAutoSave(e){this.innerAutoSave=e}parseTypeOrm(e){this.innerTypeOrm=e}parseWasmPath(e){this.innerWasmPath=e}parsePickText(e){this.innerPickText=e}parseSaveText(e){this.innerSaveText=e}parseButtonOptions(e){this.innerButtonOptions=JSON.parse(e);let t=Object.keys(this.innerButtonOptions);for(let r of t)switch(r){case"top":{this.el.style.setProperty("--jeep-sqlite-top",this.innerButtonOptions[r]);break}case"right":{this.el.style.setProperty("--jeep-sqlite-right",this.innerButtonOptions[r]);break}case"fontSize":{this.el.style.setProperty("--jeep-sqlite-font-size",this.innerButtonOptions[r]);break}case"padding":{this.el.style.setProperty("--jeep-sqlite-padding",this.innerButtonOptions[r]);break}case"backgroundColor":{this.el.style.setProperty("--jeep-sqlite-background-color",this.innerButtonOptions[r]);break}case"color":{this.el.style.setProperty("--jeep-sqlite-color",this.innerButtonOptions[r]);break}}}echo(e){return j(this,null,function*(){return e})}createConnection(e){return j(this,null,function*(){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");let r=e.database,n=e.version?e.version:1,s=e.readonly?e.readonly:!1;try{return yield this._createConnection(r,n,s),Promise.resolve()}catch(i){return Promise.reject(i)}})}isConnection(e){return j(this,null,function*(){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");let r=e.database,n=e.readonly?e.readonly:!1,s=yield this._isConnection(r,n);return Promise.resolve(s)})}closeConnection(e){return j(this,null,function*(){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");let r=e.database,n=e.readonly?e.readonly:!1;try{return yield this._closeConnection(r,n),Promise.resolve()}catch(s){return Promise.reject(s)}})}open(e){return j(this,null,function*(){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");let r=e.database,n=e.readonly?e.readonly:!1;try{return yield this._open(r,n),Promise.resolve()}catch(s){return Promise.reject(s)}})}close(e){return j(this,null,function*(){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");let r=e.database,n=e.readonly?e.readonly:!1;try{return yield this._close(r,n),Promise.resolve()}catch(s){return Promise.reject(s)}})}getVersion(e){return j(this,null,function*(){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");let r=e.database,n=e.readonly?e.readonly:!1;try{let s=yield this._getVersion(r,n);return Promise.resolve(s)}catch(s){return Promise.reject(s)}})}beginTransaction(e){return j(this,null,function*(){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");let r=e.database;if(e.readonly?e.readonly:!1)return Promise.reject("BeginTransaction: not allowed in read-only mode");try{let s=yield this._beginTransaction(r);return Promise.resolve(s)}catch(s){return Promise.reject(s)}})}commitTransaction(e){return j(this,null,function*(){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");let r=e.database;if(e.readonly?e.readonly:!1)return Promise.reject("CommitTransaction: not allowed in read-only mode");try{let s=yield this._commitTransaction(r);return Promise.resolve(s)}catch(s){return Promise.reject(s)}})}rollbackTransaction(e){return j(this,null,function*(){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");let r=e.database;if(e.readonly?e.readonly:!1)return Promise.reject("BeginTransaction: not allowed in read-only mode");try{let s=yield this._rollbackTransaction(r);return Promise.resolve(s)}catch(s){return Promise.reject(s)}})}isTransactionActive(e){return j(this,null,function*(){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");let r=e.database;if(e.readonly?e.readonly:!1)return Promise.reject("isTransactionActive: not allowed in read-only mode");try{let s=yield this._isTransactionActive(r);return Promise.resolve(s)}catch(s){return Promise.reject(s)}})}execute(e){return j(this,null,function*(){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);let t=Object.keys(e);if(!t.includes("database"))return Promise.reject("Must provide a database name");if(!t.includes("statements")||e.statements.length===0)return Promise.reject("Must provide raw SQL statements");let r=e.database,n=e.statements,s=!0,i=e.readonly?e.readonly:!1;t.includes("transaction")&&(s=e.transaction);try{let o=yield this._execute(r,n,s,i);return Promise.resolve(o)}catch(o){return Promise.reject(o)}})}executeSet(e){return j(this,null,function*(){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);let t=Object.keys(e);if(!t.includes("database"))return Promise.reject("Must provide a database name");if(!t.includes("set")||e.set.length===0)return Promise.reject("Must provide a non-empty set of SQL statements");let r=e.database,n=e.set,s=!0;t.includes("transaction")&&(s=e.transaction);let i=e.readonly?e.readonly:!1,o=e.returnMode?e.returnMode:"no";try{let f=yield this._executeSet(r,n,s,i,o);return Promise.resolve(f)}catch(f){return Promise.reject(f)}})}run(e){return j(this,null,function*(){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);let t=Object.keys(e);if(!t.includes("database"))return Promise.reject("Must provide a database name");if(!t.includes("statement")||e.statement.length===0)return Promise.reject("Must provide a run statement");let r=e.database,n=e.statement,s=[];t.includes("values")&&(s=e.values.length>0?e.values:[]);let i=!0;t.includes("transaction")&&(i=e.transaction);let o=e.readonly?e.readonly:!1,f=e.returnMode?e.returnMode:"no";try{let l=yield this._run(r,n,s,i,o,f);return Promise.resolve(l)}catch(l){return Promise.reject(l)}})}query(e){return j(this,null,function*(){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);let t=Object.keys(e);if(!t.includes("database"))return Promise.reject("Must provide a database name");if(!t.includes("statement")||e.statement.length===0)return Promise.reject("Must provide a query statement");let r=[];t.includes("values")&&(r=e.values.length>0?e.values:[]);let n=e.database,s=e.statement,i=e.readonly?e.readonly:!1;try{let o=yield this._query(n,s,r,i);return Promise.resolve(o)}catch(o){return Promise.reject(o)}})}getTableList(e){return j(this,null,function*(){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");let r=e.database,n=e.readonly?e.readonly:!1;try{let s=yield this._getTableList(r,n);return Promise.resolve(s)}catch(s){return Promise.reject(s)}})}isDBExists(e){return j(this,null,function*(){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");let r=e.database,n=e.readonly?e.readonly:!1;try{let s=yield this._isDBExists(r,n);return Promise.resolve(s)}catch(s){return Promise.reject(s)}})}isDBOpen(e){return j(this,null,function*(){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");let r=e.database,n=e.readonly?e.readonly:!1;try{let s=yield this._isDBOpen(r,n);return Promise.resolve(s)}catch(s){return Promise.reject(s)}})}deleteDatabase(e){return j(this,null,function*(){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");let r=e.database,n=e.readonly?e.readonly:!1;try{return yield this._deleteDatabase(r,n)}catch(s){return Promise.reject(s)}})}isStoreOpen(){return j(this,null,function*(){return Promise.resolve(this.isStore)})}copyFromAssets(e){return j(this,null,function*(){let t;if(e!=null?t=Object.keys(e).includes("overwrite")?e.overwrite:!0:t=!0,!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);try{return yield this._copyFromAssets(t),Promise.resolve()}catch(r){return Promise.reject(r)}})}isTableExists(e){return j(this,null,function*(){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);let t=Object.keys(e);if(!t.includes("database"))return Promise.reject("Must provide a database name");let r=e.database;if(!t.includes("table"))return Promise.reject("Must provide a table name");let n=e.table,s=e.readonly?e.readonly:!1;try{let i=yield this._isTableExists(r,n,s);return Promise.resolve(i)}catch(i){return Promise.reject(i)}})}createSyncTable(e){return j(this,null,function*(){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");let r=e.database,n=e.readonly?e.readonly:!1;try{let s=yield this._createSyncTable(r,n);return Promise.resolve(s)}catch(s){return Promise.reject(s)}})}getSyncDate(e){return j(this,null,function*(){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");let r=e.database,n=e.readonly?e.readonly:!1;try{let s=yield this._getSyncDate(r,n);return Promise.resolve(s)}catch(s){return Promise.reject(s)}})}setSyncDate(e){return j(this,null,function*(){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);let t=Object.keys(e);if(!t.includes("database"))return Promise.reject("Must provide a database name");if(!t.includes("syncdate"))return Promise.reject("Must provide a synchronization date");let r=e.database,n=e.syncdate,s=e.readonly?e.readonly:!1;try{return yield this._setSyncDate(r,n,s),Promise.resolve()}catch(i){return Promise.reject(i)}})}isJsonValid(e){return j(this,null,function*(){if(!Object.keys(e).includes("jsonstring"))return Promise.reject("Must provide a json object");let r=e.jsonstring;try{let n=yield this._isJsonValid(r);return Promise.resolve(n)}catch(n){return Promise.reject(n)}})}importFromJson(e){return j(this,null,function*(){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("jsonstring"))return Promise.reject("Must provide a json object");let r=e.jsonstring;try{let n=yield this._importFromJson(r);return Promise.resolve(n)}catch(n){return Promise.reject(n)}})}exportToJson(e){return j(this,null,function*(){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);let t=Object.keys(e);if(!t.includes("database"))return Promise.reject("Must provide a database name");if(!t.includes("jsonexportmode"))return Promise.reject("Must provide a json export mode");let r=e.database,n=e.jsonexportmode,s=e.readonly?e.readonly:!1;try{let i=yield this._exportToJson(r,n,s);return Promise.resolve(i)}catch(i){return Promise.reject(i)}})}deleteExportedRows(e){return j(this,null,function*(){if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");let r=e.database,n=e.readonly?e.readonly:!1;try{return yield this._deleteExportedRows(r,n),Promise.resolve()}catch(s){return Promise.reject(s)}})}addUpgradeStatement(e){return j(this,null,function*(){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);let t=Object.keys(e);if(!t.includes("database"))return Promise.reject("Must provide a database name");if(!t.includes("upgrade"))return Promise.reject("Must provide an upgrade capSQLiteVersionUpgrade Object");let r=e.database,n=e.upgrade;for(let s of n){let i=Object.keys(s);if(!i.includes("toVersion")||!i.includes("statements"))return Promise.reject("Must provide an upgrade capSQLiteVersionUpgrade Object");if(typeof s.toVersion!="number")return Promise.reject("upgrade.toVersion must be a number");if(this._versionUpgrades[r])this._versionUpgrades[r][s.toVersion]=s;else{let o={};o[s.toVersion]=s,this._versionUpgrades[r]=o}}return Promise.resolve()})}isDatabase(e){return j(this,null,function*(){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");let r=e.database;try{let n=yield this._isDatabase(r);return Promise.resolve(n)}catch(n){return Promise.reject(n)}})}getDatabaseList(){return j(this,null,function*(){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);try{let e=yield this._getDatabaseList();return Promise.resolve(e)}catch(e){return Promise.reject(e)}})}checkConnectionsConsistency(e){return j(this,null,function*(){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);let t=Object.keys(e);if(!t.includes("dbNames"))return Promise.reject("Must provide a list of connection's name");let r=e.dbNames;if(!t.includes("openModes"))return Promise.reject("Must provide a list of connection's open mode");let n=e.openModes;try{let s=yield this._checkConnectionsConsistency(r,n);return Promise.resolve(s)}catch(s){return Promise.reject(s)}})}saveToStore(e){return j(this,null,function*(){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");let r=e.database,n=e.readonly?e.readonly:!1;try{return yield this._saveToStore(r,n),Promise.resolve()}catch(s){return Promise.reject(s)}})}saveToLocalDisk(e){return j(this,null,function*(){if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");let r=e.database;try{return yield this._saveToLocalDisk(r),Promise.resolve()}catch(n){return Promise.reject(n)}})}getFromLocalDiskToStore(e){return j(this,null,function*(){let t=e.overwrite?e.overwrite:!0;console.log(Zr?"Using the File System Access API.":"Using the fallback implementation.");try{return yield this._getFromLocalDiskToStore(t),Promise.resolve()}catch(r){return Promise.reject(r)}})}getFromHTTPRequest(e){return j(this,null,function*(){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("url"))return Promise.reject("Must provide an url");let r=e.url,n=e.overwrite?e.overwrite:!0;try{return yield this._getFromHTTPRequest(r,n),Promise.resolve()}catch(s){return Promise.reject(s)}})}connectedCallback(){this.parseAutoSave(this.autoSave!==void 0?this.autoSave:!1),this.parseTypeOrm(this.typeOrm!==void 0?this.typeOrm:!1),this.parseWasmPath(this.wasmPath!==void 0?this.wasmPath:"/assets"),this.parseSaveText(this.saveText!==void 0?this.saveText:"Save"),this.parsePickText(this.pickText!==void 0?this.pickText:"Pick a database"),this.buttonOptions!==void 0&&this.parseButtonOptions(this.buttonOptions),this.openStore("jeepSqliteStore","databases").then(e=>{this.isStore=e})}componentWillLoad(){}componentDidLoad(){return j(this,null,function*(){this._element=this.el.shadowRoot,this.isStore||console.log("jeep-sqlite isStore = false")})}_createConnection(e,t,r){return j(this,null,function*(){let n={},s=Object.keys(this._versionUpgrades);s.length!==0&&s.includes(e)&&(n=this._versionUpgrades[e]);let i=Object.keys(this._dbDict),o;try{i.length>0&&(i.includes("RW_"+e)||i.includes("RO_"+e))?o=i.includes("RW_"+e)?this._dbDict["RW_"+e]:this._dbDict["RO_"+e]:o=new Gr(e+"SQLite.db",t,n,this.store,this.innerAutoSave,this.innerWasmPath);let f=r?"RO_"+e:"RW_"+e;return this._dbDict[f]=o,Promise.resolve()}catch(f){let l=f.message?f.message:f;return Promise.reject(l)}})}_isConnection(e,t){return j(this,null,function*(){let r=Object.keys(this._dbDict),n=t?"RO_"+e:"RW_"+e;return r.includes(n)?{result:!0}:{result:!1}})}_closeConnection(e,t){return j(this,null,function*(){let r=Object.keys(this._dbDict),n=t?"RO_"+e:"RW_"+e;if(!r.includes(n))return Promise.reject(`CloseConnection: No available connection for ${e}`);let s=this._dbDict[n];try{return s.isDBOpen()&&(yield s.close()),delete this._dbDict[n],Promise.resolve()}catch(i){let o=i.message?i.message:i;return Promise.reject(`CloseConnection: ${o}`)}})}_open(e,t){return j(this,null,function*(){let r=Object.keys(this._dbDict),n=t?"RO_"+e:"RW_"+e;if(!r.includes(n))return Promise.reject(`Open: No available connection for ${e}`);let s=this._dbDict[n];try{return yield s.open(),Promise.resolve()}catch(i){let o=i.message?i.message:i;return Promise.reject(`Open: ${o}`)}})}_close(e,t){return j(this,null,function*(){let r=Object.keys(this._dbDict),n=t?"RO_"+e:"RW_"+e;if(!r.includes(n))return Promise.reject(`Close: No available connection for ${e}`);let s=this._dbDict[n];if(!s.isDBOpen())return Promise.reject(`Close: ${e} database not opened`);try{return yield s.close(),Promise.resolve()}catch(i){let o=i.message?i.message:i;return Promise.reject(`Close: ${o}`)}})}_saveToStore(e,t){return j(this,null,function*(){let r=Object.keys(this._dbDict),n=t?"RO_"+e:"RW_"+e;if(!r.includes(n))return Promise.reject(`SaveToStore: No available connection for ${e}`);let s=this._dbDict[n];if(!s.isDBOpen())return Promise.reject(`SaveToStore: ${e} database not opened`);try{return yield s.saveToStore(),Promise.resolve()}catch(i){let o=i.message?i.message:i;return Promise.reject(`SaveToStore: ${o}`)}})}_saveToLocalDisk(e){return j(this,null,function*(){try{let t=Object.keys(this._dbDict),r="RW_"+e;if(!t.includes(r))return Promise.reject(`SaveToLocalDisk: No available connection for ${e}`);let n=this._dbDict[r];if(!n.isDBOpen())return Promise.reject(`SaveToLocalDisk: ${e} database not opened`);let s=yield n.exportDB();this._blob=yield this.uint2blob(s);let i=`${e}SQLite.db`;return this._opts={fileName:i,extensions:[".db"],startIn:"documents"},this._buttonSaveEl=document.createElement("button"),this._buttonSaveEl.setAttribute("id","saveButton"),this._buttonSaveEl.innerHTML=`${this.innerSaveText} ${i}`,this._element.appendChild(this._buttonSaveEl),this._buttonSaveEl.addEventListener("click",this.saveFile.bind(this)),Promise.resolve()}catch(t){let r=t.message?t.message:t;return Promise.reject(`SaveToLocalDisk: ${r}`)}})}_getFromLocalDiskToStore(e){return j(this,null,function*(){return this._buttonPickEl=document.createElement("button"),this._buttonPickEl.setAttribute("id","pickButton"),this._buttonPickEl.innerHTML=`${this.innerPickText}`,this._element.appendChild(this._buttonPickEl),this._buttonPickEl.addEventListener("click",this.pickDatabase.bind(this)),this._overwrite=e,Promise.resolve()})}pickDatabase(){return j(this,null,function*(){try{let e=yield Ma({extensions:[".db"]}),t=yield this.blob2uint(e),r=this.removePathSuffix(e.name),n=this.setPathSuffix(e.name);(yield qe.isDBInStore(n,this.store))?this._overwrite?(yield qe.removeDBFromStore(n,this.store),yield qe.saveDBToStore(n,t,this.store)):this.PickDatabaseEnded.emit({message:`Error: cannot overwrite ${n}`}):yield qe.saveDBToStore(n,t,this.store),this._element.removeChild(this._buttonPickEl),this.PickDatabaseEnded.emit({db_name:r})}catch(e){let t=e.message?e.message:e;this.PickDatabaseEnded.emit({message:t})}})}saveFile(){return j(this,null,function*(){try{yield qa(this._blob,[this._opts]);let e=this._opts.fileName;this._element.removeChild(this._buttonSaveEl),this.SaveDatabaseEnded.emit({db_name:e})}catch(e){let t=e.message?e.message:e;this.SaveDatabaseEnded.emit({message:t})}})}_getVersion(e,t){return j(this,null,function*(){let r=Object.keys(this._dbDict),n=t?"RO_"+e:"RW_"+e;if(!r.includes(n))return Promise.reject(`Open: No available connection for ${e}`);let s=this._dbDict[n];if(!s.isDBOpen())return Promise.reject(`GetVersion: ${e} database not opened`);try{let i=yield s.getVersion(),o={};return o.version=i,Promise.resolve(o)}catch(i){let o=i.message?i.message:i;return Promise.reject(`Open: ${o}`)}})}_beginTransaction(e){return j(this,null,function*(){let t=Object.keys(this._dbDict),r="RW_"+e;if(!t.includes(r))return Promise.reject(`BeginTransaction: No available connection for ${e}`);let n=this._dbDict[r];if(!n.isDBOpen())return Promise.reject(`BeginTransaction: ${e} database not opened`);let s={};return s={changes:{changes:yield n.beginTransaction()}},Promise.resolve(s)})}_commitTransaction(e){return j(this,null,function*(){let t=Object.keys(this._dbDict),r="RW_"+e;if(!t.includes(r))return Promise.reject(`CommitTransaction: No available connection for ${e}`);let n=this._dbDict[r];if(!n.isDBOpen())return Promise.reject(`CommitTransaction: ${e} database not opened`);let s={};return s={changes:{changes:yield n.commitTransaction()}},Promise.resolve(s)})}_rollbackTransaction(e){return j(this,null,function*(){let t=Object.keys(this._dbDict),r="RW_"+e;if(!t.includes(r))return Promise.reject(`RollbackTransaction: No available connection for ${e}`);let n=this._dbDict[r];if(!n.isDBOpen())return Promise.reject(`RollbackTransaction: ${e} database not opened`);let s={};return s={changes:{changes:yield n.rollbackTransaction()}},Promise.resolve(s)})}_isTransactionActive(e){return j(this,null,function*(){let t=Object.keys(this._dbDict),r="RW_"+e;if(!t.includes(r))return Promise.reject(`IsTransactionActive: No available connection for ${e}`);let n=this._dbDict[r];if(!n.isDBOpen())return Promise.reject(`IsTransactionActive: ${e} database not opened`);let s={};return s={result:n.isTransActive()},Promise.resolve(s)})}_execute(e,t,r,n){return j(this,null,function*(){let s=Object.keys(this._dbDict),i="RW_"+e;if(!s.includes(i))return Promise.reject(`Execute: No available connection for ${e}`);let o=this._dbDict[i];if(!o.isDBOpen())return Promise.reject(`Execute: ${e} database not opened`);if(n)return Promise.reject("Execute: not allowed in read-only mode");let f={},l=t.substring(0,6);if(this.innerAutoSave&&l==="COMMIT"&&this.innerTypeOrm)return f={changes:{changes:0}},Promise.resolve(f);try{return f={changes:{changes:yield o.executeSQL(t,r)}},Promise.resolve(f)}catch(p){let m=p.message?p.message:p;return Promise.reject(`Execute: ${m}`)}})}_executeSet(e,t,r,n,s){return j(this,null,function*(){let i=Object.keys(this._dbDict),o="RW_"+e;if(!i.includes(o))return Promise.reject(`ExecuteSet: No available connection for ${e}`);let f=this._dbDict[o];if(!f.isDBOpen())return Promise.reject(`ExecuteSet: ${e} database not opened`);if(n)return Promise.reject("ExecuteSet: not allowed in read-only mode");for(let l of t)if(!("statement"in l)||!("values"in l))return Promise.reject("ExecuteSet: Must provide a set as Array of {statement,values}");try{let l=yield f.execSet(t,r,s),p={changes:{changes:l.changes,lastId:l.lastId,values:l.values}};return Promise.resolve(p)}catch(l){let p=l.message?l.message:l;return Promise.reject(`ExecuteSet: ${p}`)}})}_run(e,t,r,n,s,i){return j(this,null,function*(){let o=Object.keys(this._dbDict),f="RW_"+e;if(!o.includes(f))return Promise.reject(`Run: No available connection for ${e}`);let l=this._dbDict[f];if(!l.isDBOpen())return Promise.reject(`Run: ${e} database not opened`);if(s)return Promise.reject("Run: not allowed in read-only mode");let p={},m=t.substring(0,6);if(this.innerAutoSave&&m==="COMMIT")return p={changes:{changes:0}},Promise.resolve(p);try{let v=yield l.runSQL(t,r,n,i);return p={changes:{changes:v.changes,lastId:v.lastId,values:v.values}},Promise.resolve(p)}catch(v){let y=v.message?v.message:v;return Promise.reject(`Run: ${y}`)}})}_query(e,t,r,n){return j(this,null,function*(){let s=Object.keys(this._dbDict),i=n?"RO_"+e:"RW_"+e;if(!s.includes(i))return Promise.reject(`Query: No available connection for ${e}`);let o=this._dbDict[i];if(!o.isDBOpen())return Promise.reject(`Query: ${e} database not opened`);let f=[],l=t.substring(0,6);if(this.innerAutoSave&&l==="COMMIT")return Promise.resolve({values:f});try{return f=yield o.selectSQL(t,r),Promise.resolve({values:f})}catch(p){let m=p.message?p.message:p;return Promise.reject(`Query failed: ${m}`)}})}_getTableList(e,t){return j(this,null,function*(){let r=Object.keys(this._dbDict),n=t?"RO_"+e:"RW_"+e;if(!r.includes(n))return Promise.reject(`GetTableList: No available connection for ${e}`);let s=this._dbDict[n];if(!s.isDBOpen())return Promise.reject(`GetTableList: ${e} database not opened`);let i=[];try{return i=yield s.getTableNames(),Promise.resolve({values:i})}catch(o){let f=o.message?o.message:o;return Promise.reject(`GetTableList failed: ${f}`)}})}_isDBExists(e,t){return j(this,null,function*(){let r=Object.keys(this._dbDict),n=t?"RO_"+e:"RW_"+e;if(!r.includes(n))return Promise.reject(`IsDBExists: No available connection for ${e}`);let s=this._dbDict[n];try{let o={result:yield s.isDBExists(e+"SQLite.db")};return Promise.resolve(o)}catch(i){let o=i.message?i.message:i;return Promise.reject(`IsDBExists: ${o}`)}})}_isDBOpen(e,t){return j(this,null,function*(){let r=Object.keys(this._dbDict),n=t?"RO_"+e:"RW_"+e;if(!r.includes(n))return Promise.reject(`IsDBOpen: No available connection for ${e}`);let s=this._dbDict[n];if(!s.isDBOpen()){let i={result:!1};return Promise.resolve(i)}try{let o={result:yield s.isDBOpen(e+"SQLite.db")};return Promise.resolve(o)}catch(i){let o=i.message?i.message:i;return Promise.reject(`IsDBOpen: ${o}`)}})}_deleteDatabase(e,t){return j(this,null,function*(){let r=Object.keys(this._dbDict),n="RW_"+e;if(!r.includes(n))return Promise.reject(`DeleteDatabase: No available connection for ${e}`);let s=this._dbDict[n];if(t)return Promise.reject("DeleteDatabase: not allowed in read-only mode");try{return yield s.deleteDB(e+"SQLite.db"),Promise.resolve()}catch(i){let o=i.message?i.message:i;return Promise.reject(`DeleteDatabase: ${o}`)}})}_isTableExists(e,t,r){return j(this,null,function*(){let n=Object.keys(this._dbDict),s=r?"RO_"+e:"RW_"+e;if(!n.includes(s))return Promise.reject(`IsTableExists: No available connection for ${e}`);let i=this._dbDict[s];if(!i.isDBOpen())return Promise.reject(`IsTableExists: ${e} database not opened`);try{let f={result:yield i.isTable(t)};return Promise.resolve(f)}catch(o){let f=o.message?o.message:o;return Promise.reject(`IsTableExists: ${f}`)}})}_createSyncTable(e,t){return j(this,null,function*(){let r=Object.keys(this._dbDict),n="RW_"+e;if(!r.includes(n))return Promise.reject(`CreateSyncTable: No available connection for ${e}`);let s=this._dbDict[n];if(!s.isDBOpen())return Promise.reject(`CreateSyncTable: ${e} database not opened`);if(t)return Promise.reject("CreateSyncTable: not allowed in read-only mode");try{let i=yield s.createSyncTable();return Promise.resolve({changes:{changes:i}})}catch(i){let o=i.message?i.message:i;return Promise.reject(`CreateSyncTable: ${o}`)}})}_getSyncDate(e,t){return j(this,null,function*(){let r=Object.keys(this._dbDict),n=t?"RO_"+e:"RW_"+e;if(!r.includes(n))return Promise.reject(`GetSyncDate: No available connection for ${e}`);let s=this._dbDict[n];if(!s.isDBOpen())return Promise.reject(`GetSyncDate: ${e} database not opened`);try{let i=yield s.getSyncDate();return Promise.resolve({syncDate:i})}catch(i){let o=i.message?i.message:i;return Promise.reject(`GetSyncDate: ${o}`)}})}_setSyncDate(e,t,r){return j(this,null,function*(){let n=Object.keys(this._dbDict),s="RW_"+e;if(!n.includes(s))return Promise.reject(`SetSyncDate: No available connection for ${e}`);let i=this._dbDict[s];if(!i.isDBOpen())return Promise.reject(`SetSyncDate: ${e} database not opened`);if(r)return Promise.reject("SetSyncDate: not allowed in read-only mode");try{let o=yield i.setSyncDate(t);return o.result?Promise.resolve():Promise.reject(`SetSyncDate: ${o.message}`)}catch(o){let f=o.message?o.message:o;return Promise.reject(`SetSyncDate: ${f}`)}})}_isJsonValid(e){return j(this,null,function*(){let t=JSON.parse(e);return(yield st.isJsonSQLite(t))?Promise.resolve({result:!0}):Promise.reject("IsJsonValid: Stringify Json Object not Valid")})}_importFromJson(e){return j(this,null,function*(){var t,r;let n=JSON.parse(e);if(!(yield st.isJsonSQLite(n)))return Promise.reject("ImportFromJson: Stringify Json Object not Valid");let i=n,o=`${i.database}SQLite.db`,f=(t=i.version)!==null&&t!==void 0?t:1,l=i.mode,p=(r=i.overwrite)!==null&&r!==void 0?r:!1,m=new Gr(o,f,{},this.store,this.innerAutoSave,this.innerWasmPath);try{p&&l==="full"&&qe.isDBInStore(o,this.store)&&(yield qe.removeDBFromStore(o,this.store)),yield m.open();let v=yield m.getTableNames();if(l==="full"&&v.length>0){let _=yield m.getVersion();if(f<_)return Promise.reject(`ImportFromJson: Cannot import a version lower than ${_}`);if(_===f)return Promise.resolve({changes:{changes:0}})}let y=yield m.importJson(i,this.importProgress);return yield m.close(),Promise.resolve({changes:{changes:y}})}catch(v){let y=v.message?v.message:v;return Promise.reject(`ImportFromJson: ${y}`)}})}_exportToJson(e,t,r){return j(this,null,function*(){let n=Object.keys(this._dbDict),s=r?"RO_"+e:"RW_"+e;if(!n.includes(s))return Promise.reject(`ExportToJson: No available connection for ${e}`);let i=this._dbDict[s];if(!i.isDBOpen())return Promise.reject(`ExportToJson: ${e} database not opened`);try{let o=yield i.exportJson(t,this.exportProgress);return Object.keys(o).includes("message")?Promise.reject(`ExportToJson: ${o.message}`):Promise.resolve({export:o})}catch(o){let f=o.message?o.message:o;return Promise.reject(`ExportToJson: ${f}`)}})}_deleteExportedRows(e,t){return j(this,null,function*(){let r=Object.keys(this._dbDict),n="RW_"+e;if(!r.includes(n))return Promise.reject(`DeleteExportedRows: No available connection for ${e}`);let s=this._dbDict[n];if(!s.isDBOpen())return Promise.reject(`DeleteExportedRows: ${e} database not opened`);if(t)return Promise.reject("DeleteExportedRows: not allowed in read-only mode");try{yield s.deleteExportedRows()}catch(i){let o=i.message?i.message:i;return Promise.reject(`DeleteExportedRows: ${o}`)}})}_copyFromAssets(e){return j(this,null,function*(){let t=yield this.loadJSON("/assets/databases/databases.json");if(t!=null)if(this.databaseList=JSON.parse(t),Object.keys(this.databaseList).includes("databaseList"))try{for(let n of this.databaseList.databaseList)n.substring(n.length-3)===".db"&&(yield this.copyDatabase(`/assets/databases/${n}`,e)),n.substring(n.length-4)===".zip"&&(yield this.unzipDatabase(`/assets/databases/${n}`,e));return Promise.resolve()}catch(n){let s=n.message?n.message:n;return Promise.reject(`CopyFromAssets: ${s}`)}else return Promise.reject("CopyFromAssets: no key databaseList in databases.json");else return Promise.reject("CopyFromAssets: no databases.json file in /assets/databases folder")})}_getFromHTTPRequest(e,t){return j(this,null,function*(){try{let r=this.getFileExtensionInUrl(e),n;switch(r){case"db":yield this.copyDatabase(e,t),n="db";break;case"zip":yield this.unzipDatabase(e,t),n="zip";break;default:n="Unknown file type in url."}return this.HTTPRequestEnded.emit({message:n}),Promise.resolve()}catch(r){let n=r.message?r.message:r;return Promise.reject(`GetFromHTTPRequest: ${n}`)}})}_isDatabase(e){return j(this,null,function*(){try{let r={result:yield qe.isDBInStore(e+"SQLite.db",this.store)};return Promise.resolve(r)}catch(t){let r=t.message?t.message:t;return Promise.reject(`IsDatabase: ${r}`)}})}_getDatabaseList(){return j(this,null,function*(){try{let t={values:yield qe.getDBListFromStore(this.store)};return Promise.resolve(t)}catch(e){let t=e.message?e.message:e;return Promise.reject(`GetDatabaseList: ${t}`)}})}_checkConnectionsConsistency(e,t){return j(this,null,function*(){let r={};r.result=!1;let n=[];e.forEach((s,i)=>{n.push(`${t[i]}_${s}`)});try{let s=new Set(Object.keys(this._dbDict)),i=new Set(n);if(i.size===0)return yield this._resetDbDict(Object.keys(this._dbDict)),Promise.resolve(r);if(s.size<i.size)return yield this._resetDbDict(Object.keys(this._dbDict)),Promise.resolve(r);if(s.size>i.size){let o={};for(let f of s)if(!Array.from(i.keys()).includes(f)){let l=!1;f.substring(0,3)==="RO_"&&(l=!0),o.database=f.substring(3),o.readonly=l,yield this._closeConnection(o.database,o.readonly)}}return s=new Set(Object.keys(this._dbDict)),s.size===i.size?(yield this.symmetricDifference(s,i)).size===0?(r.result=!0,Promise.resolve(r)):(yield this._resetDbDict(Object.keys(this._dbDict)),Promise.resolve(r)):(yield this._resetDbDict(Object.keys(this._dbDict)),Promise.resolve(r))}catch(s){let i=s.message?s.message:s;return Promise.reject(`CheckConnectionsConsistency: ${i}`)}})}_resetDbDict(e){return j(this,null,function*(){try{for(let t of e){let r={},n=!1;t.substring(0,3)==="RO_"&&(n=!0),r.database=t.substring(3),r.readonly=n,yield this._closeConnection(r.database,r.readonly)}}catch(t){let r=t.message?t.message:t;return Promise.reject(`ResetDbDict: ${r}`)}})}symmetricDifference(e,t){return j(this,null,function*(){let r=new Set;e.forEach(s=>{r.add(s.substring(3))});let n=new Set;t.forEach(s=>{n.add(s.substring(3))});for(let s of n)r.has(s)?r.delete(s):r.add(s);return r})}unzipDatabase(e,t){return j(this,null,function*(){return new Promise((r,n)=>{var s=new XMLHttpRequest;s.open("GET",e,!0),s.responseType="arraybuffer",s.onerror=()=>{n(new Error("unzipDatabase: failed"))},s.onload=()=>{Vs.exports.loadAsync(s.response).then(i=>j(this,null,function*(){let o=Object.keys(i.files);try{for(let f of o)yield this.retrieveDBFromZip(i.files,f,t);r()}catch(f){let l=f.message?f.message:f;n(new Error(`unzipDatabase Error: ${l}`))}}))},s.send()})})}retrieveDBFromZip(e,t,r){return j(this,null,function*(){return new Promise((n,s)=>{e[t].async("nodebuffer").then(i=>j(this,null,function*(){try{let o=new Uint8Array(i),f=this.setPathSuffix(t);(yield qe.isDBInStore(f,this.store))?r?(yield qe.removeDBFromStore(f,this.store),yield qe.saveDBToStore(f,o,this.store)):s(new Error(`retrieveDBFromZip: cannot overwrite ${f}`)):yield qe.saveDBToStore(f,o,this.store),n()}catch(o){let f=o.message?o.message:o;s(new Error(`retrieveDBFromZip:: ${f}`))}}))})})}copyDatabase(e,t){return j(this,null,function*(){return new Promise((r,n)=>{var s=new XMLHttpRequest,i;s.open("GET",e,!0),s.responseType="arraybuffer",s.onerror=()=>{n(new Error("CopyDatabase: failed"))},s.onload=()=>{i=new Uint8Array(s.response)},s.onloadend=()=>j(this,null,function*(){let o=this.setPathSuffix(e);(yield qe.isDBInStore(o,this.store))?t?(yield qe.removeDBFromStore(o,this.store),yield qe.saveDBToStore(o,i,this.store)):n(new Error(`CopyDatabase Error: cannot overwrite ${o}`)):yield qe.saveDBToStore(o,i,this.store),r()}),s.send()})})}loadJSON(e){return j(this,null,function*(){return new Promise((t,r)=>{var n=new XMLHttpRequest;n.overrideMimeType("application/json"),n.open("GET",e,!0),n.onerror=()=>{r(new Error("LoadJSON: failed"))},n.onreadystatechange=function(){n.status==404&&t(null),n.readyState==4&&n.status==200&&t(n.responseText)},n.send(null)})})}openStore(e,t){return j(this,null,function*(){let r=!1,n=this.setConfig(e,t);return this.store=ms.createInstance(n),this.store!=null&&(this.storeName=e,r=!0),r})}setConfig(e,t){return{name:e,storeName:t,driver:[ms.INDEXEDDB],version:1}}removePathSuffix(e){return e.includes("SQLite.db")?e.split("SQLite.db")[0]:e.substring(e.length-3)===".db"?e.slice(0,e.lastIndexOf(".")):e}setPathSuffix(e){let t=e.slice(e.lastIndexOf("/")+1);return e.substring(e.length-3)===".db"&&(e.includes("SQLite.db")||(t=e.slice(e.lastIndexOf("/")+1,-3)+"SQLite.db")),t}blob2uint(e){return j(this,null,function*(){return new Response(e).arrayBuffer().then(t=>new Uint8Array(t))})}uint2blob(e){return j(this,null,function*(){let t=new Blob([e.buffer]);return Promise.resolve(t)})}getFileExtensionInUrl(e){let t=e.match(/\.([a-zA-Z0-9]+)(?:[\?#]|$)/);return t?t[1].toLowerCase():null}render(){}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{autoSave:["parseAutoSave"],typeOrm:["parseTypeOrm"],wasmPath:["parseWasmPath"],pickText:["parsePickText"],saveText:["parseSaveText"],buttonOptions:["parseButtonOptions"]}}static get style(){return so}},[1,"jeep-sqlite",{autoSave:[516,"autosave"],typeOrm:[516,"typeorm"],wasmPath:[513,"wasmpath"],pickText:[513,"picktext"],saveText:[513,"savetext"],buttonOptions:[513,"buttonoptions"],innerAutoSave:[32],innerTypeOrm:[32],innerWasmPath:[32],innerPickText:[32],innerSaveText:[32],innerButtonOptions:[32],echo:[64],createConnection:[64],isConnection:[64],closeConnection:[64],open:[64],close:[64],getVersion:[64],beginTransaction:[64],commitTransaction:[64],rollbackTransaction:[64],isTransactionActive:[64],execute:[64],executeSet:[64],run:[64],query:[64],getTableList:[64],isDBExists:[64],isDBOpen:[64],deleteDatabase:[64],isStoreOpen:[64],copyFromAssets:[64],isTableExists:[64],createSyncTable:[64],getSyncDate:[64],setSyncDate:[64],isJsonValid:[64],importFromJson:[64],exportToJson:[64],deleteExportedRows:[64],addUpgradeStatement:[64],isDatabase:[64],getDatabaseList:[64],checkConnectionsConsistency:[64],saveToStore:[64],saveToLocalDisk:[64],getFromLocalDiskToStore:[64],getFromHTTPRequest:[64]},void 0,{autoSave:["parseAutoSave"],typeOrm:["parseTypeOrm"],wasmPath:["parseWasmPath"],pickText:["parsePickText"],saveText:["parseSaveText"],buttonOptions:["parseButtonOptions"]}]);var Hs=io;var Ks=()=>{};var Ys=(c,e)=>j(null,null,function*(){if(!(typeof window>"u"))return yield Ks(),os([["jeep-sqlite",[[1,"jeep-sqlite",{autoSave:[516,"autosave"],typeOrm:[516,"typeorm"],wasmPath:[513,"wasmpath"],pickText:[513,"picktext"],saveText:[513,"savetext"],buttonOptions:[513,"buttonoptions"],innerAutoSave:[32],innerTypeOrm:[32],innerWasmPath:[32],innerPickText:[32],innerSaveText:[32],innerButtonOptions:[32],echo:[64],createConnection:[64],isConnection:[64],closeConnection:[64],open:[64],close:[64],getVersion:[64],beginTransaction:[64],commitTransaction:[64],rollbackTransaction:[64],isTransactionActive:[64],execute:[64],executeSet:[64],run:[64],query:[64],getTableList:[64],isDBExists:[64],isDBOpen:[64],deleteDatabase:[64],isStoreOpen:[64],copyFromAssets:[64],isTableExists:[64],createSyncTable:[64],getSyncDate:[64],setSyncDate:[64],isJsonValid:[64],importFromJson:[64],exportToJson:[64],deleteExportedRows:[64],addUpgradeStatement:[64],isDatabase:[64],getDatabaseList:[64],checkConnectionsConsistency:[64],saveToStore:[64],saveToLocalDisk:[64],getFromLocalDiskToStore:[64],getFromHTTPRequest:[64]},null,{autoSave:["parseAutoSave"],typeOrm:["parseTypeOrm"],wasmPath:["parseWasmPath"],pickText:["parsePickText"],saveText:["parseSaveText"],buttonOptions:["parseButtonOptions"]}]]]],e)});var ao={providers:[{provide:Cn,useClass:Un},Yn(),Bn(ls,$n(Fn)),{provide:"APP_INIT",useFactory:c=>()=>c.init(),deps:[Mr],multi:!0}]};function oo(){return j(this,null,function*(){if(In.getPlatform()==="web"){yield Ys(window),customElements.get("jeep-sqlite")||customElements.define("jeep-sqlite",Hs);let c=document.createElement("jeep-sqlite");document.body.appendChild(c),yield customElements.whenDefined("jeep-sqlite"),yield new Promise(e=>setTimeout(e,120)),yield on.initWebStore();try{yield on.createConnection({database:"remind.db",readonly:!1,encrypted:!1,mode:"no-encryption",version:2})}catch(e){console.warn("createConnection (pre-bootstrap) failed, continuing",e)}}yield Nn(us,ao),zr({"home-outline":Xn,"search-outline":es,"shuffle-outline":rs,"settings-outline":ts,add:Zn})})}oo().catch(c=>console.error("[App] Initialization failed:",c));
